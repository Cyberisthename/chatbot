/*! ------------------------------------------- START OF THIRD PARTY NOTICE -----------------------------------------

This file is based on or incorporates material from the projects listed below (Third Party IP). The original copyright notice and the license under which Microsoft received such Third Party IP, are set forth below. Such licenses and notices are provided for informational purposes only. Microsoft licenses the Third Party IP to you under the licensing terms for the Microsoft product. Microsoft reserves all other rights not expressly granted under this agreement, whether by implication, estoppel or otherwise. 

 * json2.js (2016-05-01)
 * https://github.com/douglascrockford/JSON-js
 * License: Public Domain

Provided for Informational Purposes Only

Public Domain
  
NO WARRANTY EXPRESSED OR IMPLIED. USE AT YOUR OWN RISK.
----------------------------------------------- END OF THIRD PARTY NOTICE ------------------------------------------ */
function Encrypt(e,t,n,r){var i=[];switch(n.toLowerCase()){case"chgsqsa":if(null==e||null==t)return null;i=PackageSAData(e,t);break;case"chgpwd":if(null==e||null==r)return null;i=PackageNewAndOldPwd(e,r);break;case"pwd":if(null==e)return null;i=PackagePwdOnly(e);break;case"pin":if(null==e)return null;i=PackagePinOnly(e);break;case"proof":if(null==e&&null==t)return null;i=PackageLoginIntData(null!=e?e:t);break;case"saproof":if(null==t)return null;i=PackageSADataForProof(t);break;case"newpwd":if(null==r)return null;i=PackageNewPwdOnly(r)}if(null==i||"undefined"==typeof i)return i;if("undefined"!=typeof Key&&void 0!==parseRSAKeyFromString)var a=parseRSAKeyFromString(Key);var o=RSAEncrypt(i,a,randomNum);return o}function PackageSAData(e,t){var n=[],r=0;n[r++]=1,n[r++]=1,n[r++]=0;var i,a=t.length;for(n[r++]=2*a,i=0;a>i;i++)n[r++]=255&t.charCodeAt(i),n[r++]=(65280&t.charCodeAt(i))>>8;var o=e.length;for(n[r++]=o,i=0;o>i;i++)n[r++]=127&e.charCodeAt(i);return n}function PackagePwdOnly(e){var t=[],n=0;t[n++]=1,t[n++]=1,t[n++]=0,t[n++]=0;var r,i=e.length;for(t[n++]=i,r=0;i>r;r++)t[n++]=127&e.charCodeAt(r);return t}function PackagePinOnly(e){var t=[],n=0;t[n++]=1,t[n++]=2,t[n++]=0,t[n++]=0,t[n++]=0;var r,i=e.length;for(t[n++]=i,r=0;i>r;r++)t[n++]=127&e.charCodeAt(r);return t}function PackageLoginIntData(e){var t,n=[],r=0;for(t=0;t<e.length;t++)n[r++]=255&e.charCodeAt(t),n[r++]=(65280&e.charCodeAt(t))>>8;return n}function PackageSADataForProof(e){var t,n=[],r=0;for(t=0;t<e.length;t++)n[r++]=127&e.charCodeAt(t),n[r++]=(65280&e.charCodeAt(t))>>8;return n}function PackageNewPwdOnly(e){var t=[],n=0;t[n++]=1,t[n++]=1;var r,i=e.length;for(t[n++]=i,r=0;i>r;r++)t[n++]=127&e.charCodeAt(r);return t[n++]=0,t[n++]=0,t}function PackageNewAndOldPwd(e,t){var n=[],r=0;n[r++]=1,n[r++]=1;var i,a=t.length;for(n[r++]=a,i=0;a>i;i++)n[r++]=127&t.charCodeAt(i);for(n[r++]=0,a=e.length,n[r++]=a,i=0;a>i;i++)n[r++]=127&e.charCodeAt(i);return n}function mapByteToBase64(e){return e>=0&&26>e?String.fromCharCode(65+e):e>=26&&52>e?String.fromCharCode(97+e-26):e>=52&&62>e?String.fromCharCode(48+e-52):62==e?"+":"/"}function base64Encode(e,t){var n,r="";for(n=t;4>n;n++)e>>=6;for(n=0;t>n;n++)r=mapByteToBase64(63&e)+r,e>>=6;return r}function byteArrayToBase64(e){var t,n,r=e.length,i="";for(t=r-3;t>=0;t-=3)n=e[t]|e[t+1]<<8|e[t+2]<<16,i+=base64Encode(n,4);var a=r%3;for(n=0,t+=2;t>=0;t--)n=n<<8|e[t];return 1==a?i=i+base64Encode(n<<16,2)+"==":2==a&&(i=i+base64Encode(n<<8,3)+"="),i}function parseRSAKeyFromString(e){var t=e.indexOf(";");if(0>t)return null;var n=e.substr(0,t),r=e.substr(t+1),i=n.indexOf("=");if(0>i)return null;var a=n.substr(i+1);if(i=r.indexOf("="),0>i)return null;var o=r.substr(i+1),s=new Object;return s.n=hexStringToMP(o),s.e=parseInt(a,16),s}function RSAEncrypt(e,t){for(var n=[],r=42,i=2*t.n.size-r,a=0;a<e.length;a+=i)if(a+i>=e.length){var o=RSAEncryptBlock(e.slice(a),t,randomNum);o&&(n=o.concat(n))}else{var o=RSAEncryptBlock(e.slice(a,a+i),t,randomNum);o&&(n=o.concat(n))}var s=byteArrayToBase64(n);return s}function RSAEncryptBlock(e,t,n){var r=t.n,i=t.e,a=e.length,o=2*r.size,s=42;if(a+s>o)return null;applyPKCSv2Padding(e,o,n),e=e.reverse();var l=byteArrayToMP(e),u=modularExp(l,i,r);u.size=r.size;var d=mpToByteArray(u);return d=d.reverse()}function JSMPnumber(){this.size=1,this.data=[],this.data[0]=0}function duplicateMP(e){var t=new JSMPnumber;return t.size=e.size,t.data=e.data.slice(0),t}function byteArrayToMP(e){var t=new JSMPnumber,n=0,r=e.length,i=r>>1;for(n=0;i>n;n++)t.data[n]=e[2*n]+(e[1+2*n]<<8);return r%2&&(t.data[n++]=e[r-1]),t.size=n,t}function mpToByteArray(e){var t=[],n=0,r=e.size;for(n=0;r>n;n++){t[2*n]=255&e.data[n];var i=e.data[n]>>>8;t[2*n+1]=i}return t}function modularExp(e,t,n){for(var r=[],i=0;t>0;)r[i]=1&t,t>>>=1,i++;for(var a=duplicateMP(e),o=i-2;o>=0;o--)a=modularMultiply(a,a,n),1==r[o]&&(a=modularMultiply(a,e,n));return a}function modularMultiply(e,t,n){var r=multiplyMP(e,t),i=divideMP(r,n);return i.r}function multiplyMP(e,t){var n=new JSMPnumber;n.size=e.size+t.size;var r,i;for(r=0;r<n.size;r++)n.data[r]=0;var a=e.data,o=t.data,s=n.data;if(e==t){for(r=0;r<e.size;r++)s[2*r]+=a[r]*a[r];for(r=1;r<e.size;r++)for(i=0;r>i;i++)s[r+i]+=2*a[r]*a[i]}else for(r=0;r<e.size;r++)for(i=0;i<t.size;i++)s[r+i]+=a[r]*o[i];return normalizeJSMP(n),n}function normalizeJSMP(e){var t,n,r,i,a;for(r=e.size,n=0,t=0;r>t;t++)i=e.data[t],i+=n,a=i,n=Math.floor(i/65536),i-=65536*n,e.data[t]=i}function removeLeadingZeroes(e){for(var t=e.size-1;t>0&&0==e.data[t--];)e.size--}function divideMP(e,t){var n=e.size,r=t.size,i=t.data[r-1],a=t.data[r-1]+t.data[r-2]/65536,o=new JSMPnumber;o.size=n-r+1,e.data[n]=0;for(var s=n-1;s>=r-1;s--){var l=s-r+1,u=Math.floor((65536*e.data[s+1]+e.data[s])/a);if(u>0){var d=multiplyAndSubtract(e,u,t,l);for(0>d&&(u--,multiplyAndSubtract(e,u,t,l));d>0&&e.data[s]>=i;)d=multiplyAndSubtract(e,1,t,l),d>0&&u++}o.data[l]=u}removeLeadingZeroes(e);var c={q:o,r:e};return c}function multiplyAndSubtract(e,t,n,r){var i,a=e.data.slice(0),o=0,s=e.data;for(i=0;i<n.size;i++){var l=o+n.data[i]*t;o=l>>>16,l-=65536*o,l>s[i+r]?(s[i+r]+=65536-l,o++):s[i+r]-=l}return o>0&&(s[i+r]-=o),s[i+r]<0?(e.data=a.slice(0),-1):1}function applyPKCSv2Padding(e,t,n){var r,i=e.length,a=[218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9],o=t-i-40-2,s=[];for(r=0;o>r;r++)s[r]=0;s[o]=1;var l=a.concat(s,e),u=[];for(r=0;20>r;r++)u[r]=Math.floor(256*Math.random());u=SHA1(u.concat(n));var d=MGF(u,t-21),c=XORarrays(l,d),p=MGF(c,20),f=XORarrays(u,p),m=[];for(m[0]=0,m=m.concat(f,c),r=0;r<m.length;r++)e[r]=m[r]}function MGF(e,t){if(t>4096)return null;var n=e.slice(0),r=n.length;n[r++]=0,n[r++]=0,n[r++]=0,n[r]=0;for(var i=0,a=[];a.length<t;)n[r]=i++,a=a.concat(SHA1(n));return a.slice(0,t)}function XORarrays(e,t){if(e.length!=t.length)return null;for(var n=[],r=e.length,i=0;r>i;i++)n[i]=e[i]^t[i];return n}function SHA1(e){var t,n=e.slice(0);PadSHA1Input(n);var r={A:1732584193,B:4023233417,C:2562383102,D:271733878,E:3285377520};for(t=0;t<n.length;t+=64)SHA1RoundFunction(r,n,t);var i=[];return wordToBytes(r.A,i,0),wordToBytes(r.B,i,4),wordToBytes(r.C,i,8),wordToBytes(r.D,i,12),wordToBytes(r.E,i,16),i}function wordToBytes(e,t,n){var r;for(r=3;r>=0;r--)t[n+r]=255&e,e>>>=8}function PadSHA1Input(e){var t,n=e.length,r=n,i=n%64,a=55>i?56:120;for(e[r++]=128,t=i+1;a>t;t++)e[r++]=0;var o=8*n;for(t=1;8>t;t++)e[r+8-t]=255&o,o>>>=8}function SHA1RoundFunction(e,t,n){var r,i,a,o=1518500249,s=1859775393,l=2400959708,u=3395469782,d=[],c=e.A,p=e.B,f=e.C,m=e.D,v=e.E;for(i=0,a=n;16>i;i++,a+=4)d[i]=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]<<0;for(i=16;80>i;i++)d[i]=rotateLeft(d[i-3]^d[i-8]^d[i-14]^d[i-16],1);var g;for(r=0;20>r;r++)g=rotateLeft(c,5)+(p&f|~p&m)+v+d[r]+o&4294967295,v=m,m=f,f=rotateLeft(p,30),p=c,c=g;for(r=20;40>r;r++)g=rotateLeft(c,5)+(p^f^m)+v+d[r]+s&4294967295,v=m,m=f,f=rotateLeft(p,30),p=c,c=g;for(r=40;60>r;r++)g=rotateLeft(c,5)+(p&f|p&m|f&m)+v+d[r]+l&4294967295,v=m,m=f,f=rotateLeft(p,30),p=c,c=g;for(r=60;80>r;r++)g=rotateLeft(c,5)+(p^f^m)+v+d[r]+u&4294967295,v=m,m=f,f=rotateLeft(p,30),p=c,c=g;e.A=e.A+c&4294967295,e.B=e.B+p&4294967295,e.C=e.C+f&4294967295,e.D=e.D+m&4294967295,e.E=e.E+v&4294967295}function rotateLeft(e,t){var n=e>>>32-t,r=(1<<32-t)-1,i=e&r;return i<<t|n}function hexStringToMP(e){var t,n,r=Math.ceil(e.length/4),i=new JSMPnumber;for(i.size=r,t=0;r>t;t++)n=e.substr(4*t,4),i.data[r-1-t]=parseInt(n,16);return i}"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return 10>e?"0"+e:e}function this_value(){return this.valueOf()}function quote(e){return rx_escapable.lastIndex=0,rx_escapable.test(e)?'"'+e.replace(rx_escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,r,i,a,o,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(l)){for(a=l.length,n=0;a>n;n+=1)o[n]=str(n,l)||"null";return i=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;a>n;n+=1)"string"==typeof rep[n]&&(r=rep[n],i=str(r,l),i&&o.push(quote(r)+(gap?": ":":")+i));else for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(i=str(r,l),i&&o.push(quote(r)+(gap?": ":":")+i));return i=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,i}}var rx_one=/^[\],:{}\s]*$/,rx_two=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,rx_three=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rx_four=/(?:^|:|,)(?:\s*\[)+/g,rx_escapable=/[\\\"\u0000-\u001f\u007f-\u009f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,rx_dangerous=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},Boolean.prototype.toJSON=this_value,Number.prototype.toJSON=this_value,String.prototype.toJSON=this_value);var gap,indent,meta,rep;"function"!=typeof JSON.stringify&&(meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},JSON.stringify=function(e,t,n){var r;if(gap="",indent="","number"==typeof n)for(r=0;n>r;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,r,i=e[t];if(i&&"object"==typeof i)for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r=walk(i,n),void 0!==r?i[n]=r:delete i[n]);return reviver.call(e,t,i)}var j;if(text=String(text),rx_dangerous.lastIndex=0,rx_dangerous.test(text)&&(text=text.replace(rx_dangerous,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),rx_one.test(text.replace(rx_two,"@").replace(rx_three,"]").replace(rx_four,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),/*!------------------------------------------- START OF THIRD PARTY NOTICE -----------------------------------------

This file is based on or incorporates material from the projects listed below (Third Party IP). The original copyright notice and the license under which Microsoft received such Third Party IP, are set forth below. Such licenses and notices are provided for informational purposes only. Microsoft licenses the Third Party IP to you under the licensing terms for the Microsoft product. Microsoft reserves all other rights not expressly granted under this agreement, whether by implication, estoppel or otherwise. 

Knockout-Validation 
============================================================================= 
            Author:              Eric M. Barnard - @ericmbarnard                                                                                       
            License:             MIT (http://opensource.org/licenses/mit-license.php)                                                                                                                                                                                                                                                         
            Description:         Validation Library for KnockoutJS                                                                           
            Version:             2.0.2                                                                                                                             
===============================================================================

Provided for Informational Purposes Only

MIT License 

Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the Software), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions: 

The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF 
MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE 
LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION 
OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION 
WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
----------------------------------------------- END OF THIRD PARTY NOTICE ------------------------------------------*/
!function(e){"function"==typeof require&&"object"==typeof exports&&"object"==typeof module?e(require("knockout"),exports):"function"==typeof define&&define.amd?define(["knockout","exports"],e):e(ko,ko.validation={})}(function(e,t){function n(e){var t="max"===e;return function(n,r){if(a.utils.isEmptyVal(n))return!0;var i,o;void 0===r.typeAttr?(o="text",i=r):(o=r.typeAttr,i=r.value),isNaN(i)||i instanceof Date||(o="number");var s,l,u;switch(o.toLowerCase()){case"week":if(s=/^(\d{4})-W(\d{2})$/,l=n.match(s),null===l)throw new Error("Invalid value for "+e+" attribute for week input.  Should look like '2000-W33' http://www.w3.org/TR/html-markup/input.week.html#input.week.attrs.min");return u=i.match(s),u?t?l[1]<u[1]||l[1]===u[1]&&l[2]<=u[2]:l[1]>u[1]||l[1]===u[1]&&l[2]>=u[2]:!1;case"month":if(s=/^(\d{4})-(\d{2})$/,l=n.match(s),null===l)throw new Error("Invalid value for "+e+" attribute for month input.  Should look like '2000-03' http://www.w3.org/TR/html-markup/input.month.html#input.month.attrs.min");return u=i.match(s),u?t?l[1]<u[1]||l[1]===u[1]&&l[2]<=u[2]:l[1]>u[1]||l[1]===u[1]&&l[2]>=u[2]:!1;case"number":case"range":return t?!isNaN(n)&&parseFloat(n)<=parseFloat(i):!isNaN(n)&&parseFloat(n)>=parseFloat(i);default:return t?i>=n:n>=i}}}function r(e,t,n){return t.validator(e(),void 0===n.params?!0:s(n.params))?!0:(e.setError(a.formatMessage(n.message||t.message,s(n.params),e)),!1)}function i(e,t,n){e.isValidating(!0);var r=function(r){var i=!1,o="";return e.__valid__()?(r.message?(i=r.isValid,o=r.message):i=r,i||(e.error(a.formatMessage(o||n.message||t.message,s(n.params),e)),e.__valid__(i)),void e.isValidating(!1)):void e.isValidating(!1)};t.validator(e(),s(n.params||!0),r)}if("undefined"==typeof e)throw new Error("Knockout is required, please ensure it is loaded before loading this validation plug-in");e.validation=t;var a=e.validation,o=e.utils,s=o.unwrapObservable,l=o.arrayForEach,u=o.extend,d={registerExtenders:!0,messagesOnModified:!0,errorsAsTitle:!0,errorsAsTitleOnModified:!1,messageTemplate:null,insertMessages:!0,parseInputAttributes:!1,writeInputAttributes:!1,decorateInputElement:!1,decorateElementOnModified:!0,errorClass:null,errorElementClass:"validationElement",errorMessageClass:"validationMessage",allowHtmlMessages:!1,grouping:{deep:!1,observable:!0,live:!1},validate:{}},c=u({},d);c.html5Attributes=["required","pattern","min","max","step"],c.html5InputTypes=["email","number","date"],c.reset=function(){u(c,d)},a.configuration=c,a.utils=function(){var e=(new Date).getTime(),t={},n="__ko_validation__";return{isArray:function(e){return e.isArray||"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return null!==e&&"object"==typeof e},isNumber:function(e){return!isNaN(e)},isObservableArray:function(e){return!!e&&"function"==typeof e.remove&&"function"==typeof e.removeAll&&"function"==typeof e.destroy&&"function"==typeof e.destroyAll&&"function"==typeof e.indexOf&&"function"==typeof e.replace},values:function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},getValue:function(e){return"function"==typeof e?e():e},hasAttribute:function(e,t){return null!==e.getAttribute(t)},getAttribute:function(e,t){return e.getAttribute(t)},setAttribute:function(e,t,n){return e.setAttribute(t,n)},isValidatable:function(e){return!!(e&&e.rules&&e.isValid&&e.isModified)},insertAfter:function(e,t){e.parentNode.insertBefore(t,e.nextSibling)},newId:function(){return e+=1},getConfigOptions:function(e){var t=a.utils.contextFor(e);return t||a.configuration},setDomData:function(e,r){var i=e[n];i||(e[n]=i=a.utils.newId()),t[i]=r},getDomData:function(e){var r=e[n];return r?t[r]:void 0},contextFor:function(e){switch(e.nodeType){case 1:case 8:var t=a.utils.getDomData(e);if(t)return t;if(e.parentNode)return a.utils.contextFor(e.parentNode)}return void 0},isEmptyVal:function(e){return void 0===e?!0:null===e?!0:""===e?!0:void 0},getOriginalElementTitle:function(e){var t=a.utils.getAttribute(e,"data-orig-title"),n=e.title,r=a.utils.hasAttribute(e,"data-orig-title");return r?t:n},async:function(e){window.setImmediate?window.setImmediate(e):window.setTimeout(e,0)},forEach:function(e,t){if(a.utils.isArray(e))return l(e,t);for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}}}();var p=function(){function t(e){l(e.subscriptions,function(e){e.dispose()}),e.subscriptions=[]}function n(e){e.options.deep&&(l(e.flagged,function(e){delete e.__kv_traversed}),e.flagged.length=0),e.options.live||t(e)}function r(e,r){r.validatables=[],t(r),i(e,r),n(r)}function i(t,n,r){var a=[],o=t.peek?t.peek():t;t.__kv_traversed!==!0&&(n.options.deep&&(t.__kv_traversed=!0,n.flagged.push(t)),r=void 0!==r?r:n.options.deep?1:-1,e.isObservable(t)&&(t.errors||f.isValidatable(t)||t.extend({validatable:!0}),n.validatables.push(t),n.options.live&&f.isObservableArray(t)&&n.subscriptions.push(t.subscribe(function(){n.graphMonitor.valueHasMutated()}))),o&&!o._destroy&&(f.isArray(o)?a=o:f.isObject(o)&&(a=f.values(o))),0!==r&&f.forEach(a,function(t){!t||t.nodeType||e.isComputed(t)&&!t.rules||i(t,n,r+1)}))}function d(e){var t=[];return l(e,function(e){f.isValidatable(e)&&!e.isValid()&&t.push(e.error.peek())}),t}var c=0,p=a.configuration,f=a.utils;return{init:function(e,t){c>0&&!t||(e=e||{},e.errorElementClass=e.errorElementClass||e.errorClass||p.errorElementClass,e.errorMessageClass=e.errorMessageClass||e.errorClass||p.errorMessageClass,u(p,e),p.registerExtenders&&a.registerExtenders(),c=1)},reset:a.configuration.reset,group:function(t,n){n=u(u({},p.grouping),n);var i={options:n,graphMonitor:e.observable(),flagged:[],subscriptions:[],validatables:[]},a=null;return a=n.observable?e.computed(function(){return i.graphMonitor(),r(t,i),d(i.validatables)}):function(){return r(t,i),d(i.validatables)},a.showAllMessages=function(e){void 0===e&&(e=!0),a.forEach(function(t){f.isValidatable(t)&&t.isModified(e)})},a.isAnyMessageShown=function(){var e;return e=!!a.find(function(e){return f.isValidatable(e)&&!e.isValid()&&e.isModified()})},a.filter=function(e){return e=e||function(){return!0},a(),o.arrayFilter(i.validatables,e)},a.find=function(e){return e=e||function(){return!0},a(),o.arrayFirst(i.validatables,e)},a.forEach=function(e){e=e||function(){},a(),l(i.validatables,e)},a.map=function(e){return e=e||function(e){return e},a(),o.arrayMap(i.validatables,e)},a._updateState=function(e){if(!f.isObject(e))throw new Error("An object is required.");return t=e,n.observable?void i.graphMonitor.valueHasMutated():(r(e,i),d(i.validatables))},a},formatMessage:function(e,t,n){if(f.isObject(t)&&t.typeAttr&&(t=t.value),"function"==typeof e)return e(t,n);var r=s(t)||[];return f.isArray(r)||(r=[r]),e.replace(/{(\d+)}/gi,function(e,t){return"undefined"!=typeof r[t]?r[t]:e})},addRule:function(e,t){e.extend({validatable:!0});var n=!!o.arrayFirst(e.rules(),function(e){return e.rule&&e.rule===t.rule});return n||e.rules.push(t),e},addAnonymousRule:function(e,t){void 0===t.message&&(t.message="Error"),t.onlyIf&&(t.condition=t.onlyIf),a.addRule(e,t)},addExtender:function(t){e.extenders[t]=function(e,n){return n&&(n.message||n.onlyIf)?a.addRule(e,{rule:t,message:n.message,params:f.isEmptyVal(n.params)?!0:n.params,condition:n.onlyIf}):a.addRule(e,{rule:t,params:n})}},registerExtenders:function(){if(p.registerExtenders)for(var t in a.rules)a.rules.hasOwnProperty(t)&&(e.extenders[t]||a.addExtender(t))},insertValidationMessage:function(e){var t=document.createElement("SPAN");return t.className=f.getConfigOptions(e).errorMessageClass,f.insertAfter(e,t),t},parseInputValidationAttributes:function(e,t){l(a.configuration.html5Attributes,function(n){if(f.hasAttribute(e,n)){var r=e.getAttribute(n)||!0;if("min"===n||"max"===n){var i=e.getAttribute("type");"undefined"!=typeof i&&i||(i="text"),r={typeAttr:i,value:r}}a.addRule(t(),{rule:n,params:r})}});var n=e.getAttribute("type");l(a.configuration.html5InputTypes,function(e){e===n&&a.addRule(t(),{rule:"date"===e?"dateISO":e,params:!0})})},writeInputValidationAttributes:function(t,n){var r=n();if(r&&r.rules){var i=r.rules();l(a.configuration.html5Attributes,function(n){var r=o.arrayFirst(i,function(e){return e.rule&&e.rule.toLowerCase()===n.toLowerCase()});r&&e.computed({read:function(){var i=e.unwrap(r.params);"pattern"===r.rule&&i instanceof RegExp&&(i=i.source),t.setAttribute(n,i)},disposeWhenNodeIsRemoved:t})}),i=null}},makeBindingHandlerValidatable:function(t){var n=e.bindingHandlers[t].init;e.bindingHandlers[t].init=function(t,r,i,a,o){return n(t,r,i,a,o),e.bindingHandlers.validationCore.init(t,r,i,a,o)}},setRules:function(t,n){var r=function(t,n){if(t&&n)for(var i in n)if(n.hasOwnProperty(i)){var o=n[i];if(t[i]){var l=t[i],u=s(l),d={},c={};for(var p in o)o.hasOwnProperty(p)&&(a.rules[p]?d[p]=o[p]:c[p]=o[p]);if(e.isObservable(l)&&l.extend(d),u&&f.isArray(u))for(var m=0;m<u.length;m++)r(u[m],c);else r(u,c)}}};r(t,n)}}}();u(e.validation,p),a.rules={},a.rules.required={validator:function(e,t){var n;return void 0===e||null===e?!t:(n=e,"string"==typeof e&&(n=String.prototype.trim?e.trim():e.replace(/^\s+|\s+$/g,"")),t?(n+"").length>0:!0)},message:"This field is required."},a.rules.min={validator:n("min"),message:"Please enter a value greater than or equal to {0}."},a.rules.max={validator:n("max"),message:"Please enter a value less than or equal to {0}."},a.rules.minLength={validator:function(e,t){if(a.utils.isEmptyVal(e))return!0;var n=a.utils.isNumber(e)?""+e:e;return n.length>=t},message:"Please enter at least {0} characters."},a.rules.maxLength={validator:function(e,t){if(a.utils.isEmptyVal(e))return!0;var n=a.utils.isNumber(e)?""+e:e;return n.length<=t},message:"Please enter no more than {0} characters."},a.rules.pattern={validator:function(e,t){return a.utils.isEmptyVal(e)||null!==e.toString().match(t)},message:"Please check this value."},a.rules.step={validator:function(e,t){if(a.utils.isEmptyVal(e)||"any"===t)return!0;var n=100*e%(100*t);return Math.abs(n)<1e-5||Math.abs(1-n)<1e-5},message:"The value must increment by {0}."},a.rules.email={validator:function(e,t){return t?a.utils.isEmptyVal(e)||t&&/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e):!0},message:"Please enter a proper email address."},a.rules.date={validator:function(e,t){return t?a.utils.isEmptyVal(e)||t&&!/Invalid|NaN/.test(new Date(e)):!0},message:"Please enter a proper date."},a.rules.dateISO={validator:function(e,t){return t?a.utils.isEmptyVal(e)||t&&/^\d{4}[-/](?:0?[1-9]|1[012])[-/](?:0?[1-9]|[12][0-9]|3[01])$/.test(e):!0},message:"Please enter a proper date."},a.rules.number={validator:function(e,t){return t?a.utils.isEmptyVal(e)||t&&/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e):!0},message:"Please enter a number."},a.rules.digit={validator:function(e,t){return t?a.utils.isEmptyVal(e)||t&&/^\d+$/.test(e):!0},message:"Please enter a digit."},a.rules.phoneUS={validator:function(e,t){return t?a.utils.isEmptyVal(e)?!0:"string"!=typeof e?!1:(e=e.replace(/\s+/g,""),t&&e.length>9&&e.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/)):!0},message:"Please specify a valid phone number."},a.rules.equal={validator:function(e,t){var n=t;return e===a.utils.getValue(n)},message:"Values must equal."},a.rules.notEqual={validator:function(e,t){var n=t;return e!==a.utils.getValue(n)},message:"Please choose another value."},a.rules.unique={validator:function(e,t){var n=a.utils.getValue(t.collection),r=a.utils.getValue(t.externalValue),i=0;return e&&n?(o.arrayFilter(n,function(n){e===(t.valueAccessor?t.valueAccessor(n):n)&&i++}),(r?1:2)>i):!0},message:"Please make sure the value is unique."},function(){a.registerExtenders()}(),e.bindingHandlers.validationCore=function(){return{init:function(t,n){var r=a.utils.getConfigOptions(t),i=n();if(r.parseInputAttributes&&a.utils.async(function(){a.parseInputValidationAttributes(t,n)}),r.insertMessages&&a.utils.isValidatable(i)){var o=a.insertValidationMessage(t);r.messageTemplate?e.renderTemplate(r.messageTemplate,{field:i},null,o,"replaceNode"):e.applyBindingsToNode(o,{validationMessage:i})}r.writeInputAttributes&&a.utils.isValidatable(i)&&a.writeInputValidationAttributes(t,n),r.decorateInputElement&&a.utils.isValidatable(i)&&e.applyBindingsToNode(t,{validationElement:i})}}}(),a.makeBindingHandlerValidatable("value"),a.makeBindingHandlerValidatable("checked"),e.bindingHandlers.textInput&&a.makeBindingHandlerValidatable("textInput"),a.makeBindingHandlerValidatable("selectedOptions"),e.bindingHandlers.validationMessage={update:function(t,n){var r=n(),i=a.utils.getConfigOptions(t),l=(s(r),!1),u=!1;if(null===r||"undefined"==typeof r)throw new Error("Cannot bind validationMessage to undefined value. data-bind expression: "+t.getAttribute("data-bind"));l=r.isModified&&r.isModified(),u=r.isValid&&r.isValid();var d=null;(!i.messagesOnModified||l)&&(d=u?null:r.error);var c=!i.messagesOnModified||l?!u:!1,p="none"!==t.style.display;i.allowHtmlMessages?o.setHtml(t,d):e.bindingHandlers.text.update(t,function(){return d}),p&&!c?t.style.display="none":!p&&c&&(t.style.display="")}},e.bindingHandlers.validationElement={update:function(t,n,r){var i=n(),o=a.utils.getConfigOptions(t),l=(s(i),!1),u=!1;if(null===i||"undefined"==typeof i)throw new Error("Cannot bind validationElement to undefined value. data-bind expression: "+t.getAttribute("data-bind"));l=i.isModified&&i.isModified(),u=i.isValid&&i.isValid();var d=function(){var e={},t=!o.decorateElementOnModified||l?!u:!1;return e[o.errorElementClass]=t,e};e.bindingHandlers.css.update(t,d,r),o.errorsAsTitle&&e.bindingHandlers.attr.update(t,function(){var e=!o.errorsAsTitleOnModified||l,n=a.utils.getOriginalElementTitle(t);return e&&!u?{title:i.error,"data-orig-title":n}:!e||u?{title:n,"data-orig-title":null}:void 0})}},e.bindingHandlers.validationOptions=function(){return{init:function(e,t){var n=s(t());if(n){var r=u({},a.configuration);u(r,n),a.utils.setDomData(e,r)}}}}(),e.extenders.validation=function(e,t){return l(a.utils.isArray(t)?t:[t],function(t){a.addAnonymousRule(e,t)}),e},e.extenders.validatable=function(t,n){if(a.utils.isObject(n)||(n={enable:n}),"enable"in n||(n.enable=!0),n.enable&&!a.utils.isValidatable(t)){var r=a.configuration.validate||{},i={throttleEvaluation:n.throttle||r.throttle};t.error=e.observable(null),t.rules=e.observableArray(),t.isValidating=e.observable(!1),t.__valid__=e.observable(!0),t.isModified=e.observable(!1),t.isValid=e.computed(t.__valid__),t.setError=function(e){var n=t.error.peek(),r=t.__valid__.peek();t.error(e),t.__valid__(!1),n===e||r||t.isValid.notifySubscribers()},t.clearError=function(){return t.error(null),t.__valid__(!0),t};var o=t.subscribe(function(){t.isModified(!0)}),s=e.computed(u({read:function(){return t(),t.rules(),a.validateObservable(t),!0}},i));u(s,i),t._disposeValidation=function(){t.isValid.dispose(),t.rules.removeAll(),o.dispose(),s.dispose(),delete t.rules,delete t.error,delete t.isValid,delete t.isValidating,delete t.__valid__,delete t.isModified,delete t.setError,delete t.clearError,delete t._disposeValidation}}else n.enable===!1&&t._disposeValidation&&t._disposeValidation();return t},a.validateObservable=function(e){for(var t,n,o=0,s=e.rules(),l=s.length;l>o;o++)if(n=s[o],!n.condition||n.condition())if(t=n.rule?a.rules[n.rule]:n,t.async||n.async)i(e,t,n);else if(!r(e,t,n))return!1;return e.clearError(),!0};var f,m={};a.defineLocale=function(e,t){return e&&t?(m[e.toLowerCase()]=t,t):null},a.locale=function(e){if(e){if(e=e.toLowerCase(),!m.hasOwnProperty(e))throw new Error("Localization "+e+" has not been loaded.");a.localize(m[e]),f=e}return f},a.localize=function(e){var t=a.rules;for(var n in e)t.hasOwnProperty(n)&&(t[n].message=e[n])},function(){var e={},t=a.rules;for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n].message);a.defineLocale("en-us",e)}(),f="en-us",e.applyBindingsWithValidation=function(t,n,r){var i,o=document.body;n&&n.nodeType?(o=n,i=r):i=n,a.init(),i&&(i=u(u({},a.configuration),i),a.utils.setDomData(o,i)),e.applyBindings(t,o)};var v=e.applyBindings;e.applyBindings=function(e,t){a.init(),v(e,t)},e.validatedObservable=function(t,n){if(!n&&!a.utils.isObject(t))return e.observable(t).extend({validatable:!0});var r=e.observable(t);return r.errors=a.group(a.utils.isObject(t)?t:{},n),r.isValid=e.observable(0===r.errors().length),e.isObservable(r.errors)?r.errors.subscribe(function(e){r.isValid(0===e.length)}):e.computed(r.errors).subscribe(function(e){r.isValid(0===e.length)}),r.subscribe(function(e){a.utils.isObject(e)||(e={}),r.errors._updateState(e),r.isValid(0===r.errors().length)}),r}}),/*!
--------------------------------------------------------------------------------------------------- 
Bootstrap: dropdown.js v3.3.6 (http://getbootstrap.com)

Microsoft grants you the right to use these JavaScript files for the sole purpose of either: (i) interacting through your browser with the Microsoft website, subject to the website's terms of use; or (ii) using the files as included with a Microsoft product subject to that product's license terms. Microsoft reserves all other rights to the files not expressly granted by Microsoft, whether by implication, estoppel or otherwise. The notices and licenses below are for informational purposes only. 


Bootstrap: dropdown.js v3.3.6 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)


Provided for Informational Purposes Only


MIT License 


Permission is hereby granted, free of charge, to any person obtaining 
a copy of this software and associated documentation files (the 
"Software"), to deal in the Software without restriction, including 
without limitation the rights to use, copy, modify, merge, publish, 
distribute, sublicense, and/or sell copies of the Software, and to 
permit persons to whom the Software is furnished to do so, subject to 
the following conditions: 

The above copyright notice and this permission notice shall be 
included in all copies or substantial portions of the Software. 
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. 
-----------------------------------------------------------------------------------------
*/
+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var r=n&&e(n);return r&&r.length?r:t.parent()}function n(n){n&&3===n.which||(e(i).remove(),e(a).each(function(){var r=e(this),i=t(r),a={relatedTarget:this};i.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(i[0],n.target)||(i.trigger(n=e.Event("hide.bs.dropdown",a)),n.isDefaultPrevented()||(r.attr("aria-expanded","false"),i.removeClass("open").trigger(e.Event("hidden.bs.dropdown",a)))))}))}function r(t){return this.each(function(){var n=e(this),r=n.data("bs.dropdown");r||n.data("bs.dropdown",r=new o(this)),"string"==typeof t&&r[t].call(n)})}var i=".dropdown-backdrop",a='[data-toggle="dropdown"]',o=function(t){e(t).on("click.bs.dropdown",this.toggle)};o.VERSION="3.3.6",o.prototype.toggle=function(r){var i=e(this);if(!i.is(".disabled, :disabled")){var a=t(i),o=a.hasClass("open");if(n(),!o){"ontouchstart"in document.documentElement&&!a.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(a.trigger(r=e.Event("show.bs.dropdown",s)),r.isDefaultPrevented())return;i.trigger("focus").attr("aria-expanded","true"),a.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},o.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var r=e(this);if(n.preventDefault(),n.stopPropagation(),!r.is(".disabled, :disabled")){var i=t(r),o=i.hasClass("open");if(!o&&27!=n.which||o&&27==n.which)return 27==n.which&&i.find(a).trigger("focus"),r.trigger("click");var s=" li:not(.disabled):visible a",l=i.find(".dropdown-menu"+s);if(l.length){var u=l.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=r,e.fn.dropdown.Constructor=o,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",a,o.prototype.toggle).on("keydown.bs.dropdown.data-api",a,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),function(){var e=window,t=e.$B,n=e.Debug={};n.options={tracePagePath:!1},n.fail=function(n){var r=new Error(n+" "),i=e.$WebWatson;if(i&&i.submitFromException(r,void 0,33),!t||!t.BlackBerry)throw r;alert("Error: "+n)},n.assert=function(e,t){e||(t="Assert failed: "+t,confirm(t+"\r\n\r\nBreak into debugger?")&&n.fail(t))},n.failIf=function(e,t){e||n.fail(t)},n.trace=function(t,r){if(t||(t=""),e.console&&e.console.log){if(n.options.tracePagePath){var i=e.location.pathname;r=r?i+": "+r:i}r&&(t=r+": "+t),e.console.log(t)}}}(),function(){var e=window,t=e.Object;t.resolve||(t.resolve=function(e){try{"string"==typeof e?e=Function.parse(e):"object"==typeof e?e=e.constructor:"function"!=typeof e&&(e=null)}catch(t){return null}return e}),t.__typeName="Object"}(),function(){function e(e,t,r){var i=r.s===t;if(!i){t=t||0;var a,o,s=e.charCodeAt(t);r.s=-1,55296>s||s>57343?r.c=s:56319>=s?(a=s,o=e.charCodeAt(t+1),n.assert(!isNaN(o),"High surrogate not followed by low surrogate in fixedCharCodeAt()"),r.c=1024*(a-55296)+(o-56320)+65536,r.s=t+1):(r.c=-1,i=!0)}return!i}var t=window,n=t.Debug,r=t.String,i=t.String.prototype;i.endsWith=function(e){return n.assert(e,"must provide suffix"),this.substr(this.length-e.length)==e},i.startsWith=function(e){return n.assert(e,"must provide prefix"),this.substr(0,e.length)==e},i.trim=function(){return this.replace(/^\s+|\s+$/g,"")};var a=/\{\d+\}/g,o=/[\{\}]/g;i.format=function(){function e(e){var r=t[e.replace(o,"")];return n.assert("undefined"!=typeof r,"String Format- Provide argument at index "+e.replace(o,"")),null==r&&(r=""),r}var t=arguments;return this.replace(a,e)};var s=/[^\w.,-]/g;i.encodeXmlAttribute=i.encodeHtmlAttribute=function(){return this.replace(s,function(e){return["&#",e.charCodeAt(0),";"].join("")})};var l=/[^\w .,-]/g;i.encodeXml=i.encodeHtml=function(){var t={c:0,s:-1};return this.replace(l,function(n,r,i){return e(i,r,t)?["&#",t.c,";"].join(""):""})};var u=/[^\w.%-]/g;i.encodeURIComponent=i.encodeUrl=function(){return encodeURIComponent(this).replace(u,function(e){var t=e.charCodeAt(0).toString(16);return"%"+(1==t.length?"0"+t:t).toUpperCase()})};var d=/[^\w .,-]/g;i.encodeJson=function(){return this.replace(d,function(e){var t=e.charCodeAt(0).toString(16),n=new Array(4-t.length+1).join("0");return"\\u"+n+t.toUpperCase()})},i.decodeURIComponent=i.decodeUrl=function(){return decodeURIComponent(this)};var c=/([\\\.\{\}\(\)\[\]\/\+\*\?\|\^\$])/gi;i.escapeRegex=function(e){return(0==arguments.length?this:e).replace(c,"\\$1")},r.__typeName="String"}(),function(){var e,t=window,n=(t.jQuery,t.Debug);e=t.wLive?t.wLive:t.wLive={},e.__namespace=!0,e.Core={__namespace:!0},e.Controls={__namespace:!0},n.assert(t.$Config,"ConfigBurner should output: $Config");var r=t.$Config;if(r.handlerBaseUrl=r.handlerBaseUrl||"",!r.sd){var i=document.domain,a=i.split(".");r.sd=1===a.length?"":"."+a[a.length-2]+".com"}n.assert(r.mkt,"ConfigBurner should output: $.$Config.mkt"),r.mkt=r.mkt||"na",r.prop=r.prop||"Account","undefined"!=typeof window.SymRealWinOpen&&(window.open=window.SymRealWinOpen)}(),function(){function e(){var e=document.title,t=document.location.hash;e!=a&&t&&e.indexOf(t)==e.length-t.length&&(document.title=a),a=document.title}function t(){for(var e=0,t=arguments.length;t>e;e++)for(var r=this,i=arguments[e].split("."),a=0,o=i.length;o>a;a++){var s=i[a],l=r[s];l||(l=r[s]={}),l.__namespace||(0===a&&"Sys"!==arguments[e]&&(n.Sys.__rootNamespaces[Sys.__rootNamespaces.length]=l),l.__namespace=!0,l.__typeName=i.slice(0,a+1).join("."),l.getName=function(){return this.__typeName}),r=l}return r}var n=window,r=n.wLive;n.$Debug||(n.$Debug={enabled:!1,trace:function(){}});var i=n.document;n._d=i,n._ce=function(e){return i.createElement(e)},n._ge=function(e){return i.getElementById(e)},n._get=function(e){return i.getElementsByTagName(e)},n._dh=i.head=i.head||n._get("head")[0],r.dh=jQuery("#head")[0]||n._dh;var a;jQuery(document).bind("propertychange",e),n.registerNamespace=t,t("Sys"),n.Sys.__rootNamespaces||(n.Sys.__rootNamespaces=[Sys])}(),function(){function updateObject(e,t){for(var n in t){var r=e[n],i=t[n];i.constructor==Array?(r&&r.constructor==Array||(r=e[n]=[]),updateObject(r,i)):"object"==typeof i?("object"!=typeof r&&(r=e[n]={}),updateObject(r,i)):e[n]=i}}function evalStringsAndAddScripts(e,t){for(var n=0;n<e.length;n++)$Utility.eval(e[n]);for(n=0;n<t.length;n++)if(t[n]&&""!=t[n]){var r=document.createElement("SCRIPT");r.src=t[n],document.body.appendChild(r)}}var w=window,$config=w.$Config,jQuery=w.jQuery;w.wLive=w.wLive;var wl=w.wLive,Debug=window.Debug,_ConstDefaultDeliminator="&",_ConstKeyValueDeliminator="=";wl.truncateEllipsis=function(e,t){return t=Math.max(parseInt(t,10)||1e5,4),e?e.length>t?e.substring(0,t-3)+"...":e:""};var $Utility=w.$Utility={};$Utility.eval=function(s){eval(s)},$Utility.navigateTo=function(e,t){try{t?window.open(e,t):window.location.href=e}catch(n){}},$Utility.postTo=function(e,t){if(e&&"object"==typeof t){var n,r=document.createElement("form");r.action=e,r.method="post",jQuery.each(t,function(e,t){n=document.createElement("input"),n.type="hidden",n.id=e,n.name=e,n.value=t,r.appendChild(n)}),document.body.appendChild(r),r.submit()}},$Utility.deserialize=function(e,t,n,r){var i={};if(t=t||_ConstDefaultDeliminator,e)for(var a=e.split(t),o=a.length,s=0;o>s;s++){var l=a[s],u=l.split(_ConstKeyValueDeliminator);if(u.length>0){var d=u[0].trim();u.splice(0,1);var c=u.join(_ConstKeyValueDeliminator).trim();try{Debug.assert(n||void 0===i[d],"Duplicate key detected: "+d+" value: "+i[d]+" new value: "+(r?c:c.decodeUrl())),i[d]=r?c:c.decodeUrl()}catch(p){Debug.assert(!1,"Deserialize Failed on value: "+c),i[d]=""}}}return i},$Utility.serialize=function(e,t,n){Debug.assert(e,"hashtable must be provided"),t=t||_ConstDefaultDeliminator;var r=[];for(var i in e){var a=e[i];a=null==a?"":a.toString(),r.push(i,_ConstKeyValueDeliminator,n?a:a.encodeUrl(),t)}return r.length>0&&r.pop(),r.join("")},$Utility.updateObject=updateObject;var ajaxInnerHtmlRegex=new RegExp('<script type="text/javascript"( src="([^"]*?)"){0,1}(( loadfirst="true")|( defer="defer")){0,1}( id="[^"]*?"){0,1}>([\\w\\W]*?)</script>',"gim"),debuggerAjaxInnerHtmlRegex=new RegExp("<script","gim");$Utility.ajaxInnerHtml=function(e,t){ajaxInnerHtmlRegex.lastIndex=0;for(var n,r=[],i=[],a=[],o=[],s=[],l=0;n=ajaxInnerHtmlRegex.exec(t);)r.push(t.substring(l,n.index)),n[4]&&""!=n[4]?(o.push(n[7]),s.push(n[2])):(i.push(n[7]),a.push(n[2])),l=ajaxInnerHtmlRegex.lastIndex;r.push(t.substring(l)),Debug.assert(0==(debuggerAjaxInnerHtmlRegex.lastIndex=0)&&!debuggerAjaxInnerHtmlRegex.exec(r.join("")),"Invalid ajax script reference"),evalStringsAndAddScripts(o,s),e.innerHTML=r.join(""),evalStringsAndAddScripts(i,a)},$Utility.generateGuid=function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=Math.floor(16*Math.random()),n="x"==e?t:3&t|8;return n.toString(16)});return e},$Utility.firePltEvent=function(e){w.performance&&w.performance.timing&&$config.reportPerfData&&0===$config.isCustomPerf&&setTimeout(function(){w.$ReportEvent.PageLoadCompleted(),w.$ReportEvent.Fire(e+"_Client")},0)},$Utility.generateUrl=function(e,t,n){var r="";return e&&t?(r=e+t,n&&(r+=-1!==r.indexOf("?")?w.location.search.replace("?","&"):w.location.search),r):r},$Utility.addQueryString=function(e,t,n){if(e&&t&&n){var r=-1!==e.indexOf("?"),i=r?"&":"?";return e+=i+t+"="+encodeURI(n)}return e}}(),function(){var e=window.jQuery;e(function(){var t=e("body"),n=e("<span/>").css({borderLeftColor:"red",borderRightColor:"blue",position:"absolute",top:"-999px"}).appendTo(t);$Utility._isHighContrast=n.css("borderLeftColor")===n.css("borderRightColor"),n.remove(),$Utility._isHighContrast&&t.addClass("highContrast")}),$Utility.isHighContrast=function(){return $Utility._isHighContrast}}(),function(){function e(e,a,s,l,u,d){o.assert(e,"$Beacon.fire: target required. Caller:"+arguments.callee.caller);var c=t();e=i(e,a),o.assert(d||e.length<=2e3,"Url is too long and will be truncated: "+e),e=e.substr(0,Math.min(e.length,2e3)),u||(e=i(e,{r:Math.random()})),r(c,n(s,c),n(l,c)),c.src=e}function t(){for(var e,t=u.length,n=0;t>n;n++){var r=u[n];if(!r.inUse){e=r;break}}return e||(e=new Image,u.push(e)),e.inUse=!0,e}function n(e,t){return function(){r(t,null,null),t.inUse=!1,e&&e()}}function r(e,t,n){e.onload=t,e.onabort=e.onerror=n}function i(e,t){if(e=e||"",t){var n=s.serialize(t),r="?";if(e.indexOf("?")>=0){var i=e.charAt(e.length-1);r="?"==i||"&"==i?"":"&"}e+=r+n}return e}var a=window,o=(a.jQuery,a.Debug),s=a.$Utility,l=(a.wLive,a.$Beacon={}),u=[],d=150;l.Pool=u,l.fire=function(t,n,r,i,a,o){setTimeout(function(){e(t,n,r,i,a,o)},0)},l.fireAndHold=function(t,n){if(e(t,n),!$B.IE)for(var r=(new Date).getTime()+d;(new Date).getTime()<r;);},l.fireNow=e}(),function(){function e(e,t,n){var i=r&&r[o]?r[o]:null;i&&i[s]&&i[s](e,t,n)}function t(){l.w=void 0}function n(e,t){return Array.prototype.slice.call(e,t?3:2)}var r=window,i=r.jQuery,a=r.$Static,o="Page",s="_webConsoleLog";r.$Do||(r.$Do={q:[],w:void 0});var l=window.$Do;l.r||(l.r=[]),l.removeItems||(l.removeItems=[]),void 0===l.lock&&(l.lock=0);var u=i(document);u.bind("keydown",t),u.bind("mousedown",t),l.register=function(t,n,r){if(e("$Do.register('{0}')",t),!l.r[t]){l.r[t]={method:n,skipTimeout:r},l.lock++;try{for(var i=0;i<l.q.length;i++){var a=l.q[i];a.id==t&&l.c(t,a.c,0,a.a,void 0,a.x)&&l.removeItems.push(a)}if(l.w){var o=l.w;o.id==t&&(l.w=null,l.c(t,o.c,0,o.a))}}catch(s){throw s}finally{if(l.lock--,0==l.lock){for(var u=0;u<l.removeItems.length;u++)l.q.remove(l.removeItems[u]);l.removeItems=[]}}}},l.unregister=function(t){e("$Do.unregister('{0}')",t),l.r[t]&&delete l.r[t]},l.c=function(t,i,o,s,u,d){function c(){var e=!!p.method,t=e?p.method:s[2],a=r.$WebWatson;try{t.apply(i,n(s,!e))}catch(o){return void(a&&a.submitFromException(o))}}var p=l.r&&l.r[t];if(i=i?i:this,e("$Do.call('{0}', {1})",t,p?"true":"false"),p)p.skipTimeout?c():setTimeout(c,0);else if(a){var f=a.exec(t);o&&2==f&&(u?l.w={id:t,c:i,a:arguments}:l.q.push({id:t,c:i,a:s,x:d}))}return p},$Do.register("$Do.Full")}(),function(){var e,t,n,r=window,i=(r.jQuery,r.$Utility),a=r.Debug,o=r.$Cookie={};o.getCookie=function(r,o){a.assert(r,"name must be provided");var s=document.cookie;if(s==e){if(o&&n)return n[r];if(!o&&t)return t[r]}else t=0,n=0,e=s;var l=i.deserialize(document.cookie,";",!0,o);return o?n=l:t=l,l[r]},o.deleteCookie=function(e,t,n){a.assert(e,"name must be provided"),o.setCookie(e,"",t,n,new Date(2e3,1,1))},o.setCookie=function(e,t,n,r,o,s){a.assert(e,"name must be provided");var l={};l[e]=t,document.cookie="{0};path={1};{2}{3}secure".format(i.serialize(l,null,s),r?r:"/",n?"domain="+n+";":"",o?"expires="+o.toUTCString()+";":"")},$Do.register("$Cookie"),$Do.register("$Cookie.setCookie")}(),function(){var e=window;e.wLive.PageStats={d:[],add:function(t,n){var r=e.wLive.PageStats;n=n||(new Date).getTime(),t=t||{url:"Missing page stats.",tasks:[],executionTimeMs:0,schedulerTimeMs:0};var i=new Date;t.clientStart=n,t.clientLength=i.getTime()-n,t.clientTime=i,r.d.push(t),jQuery(r).trigger("go")}}}(),function(){var e=window;e.$f={getSelectedText:function(){if(document.selection)return document.selection.createRange();var t;try{t=e.getSelection().getRangeAt(0)}catch(n){t=e.document.createRange()}return t},replaceQs:function(e,t,n){var r="([?|&])"+t+"=([^&]+)",i=new RegExp(r,"i"),a=e,o="",s=e.indexOf("#");return s>-1&&(a=e.substr(0,s),o=e.substr(s)),a.replace(i,"$1"+t+"="+n)+o},doc:document,getDocType:function(){var e,t=$f.doc,n=t.doctype,r=t.all;return n?e=n.publicId:r&&r.length&&(e=r[0].nodeValue),e||""},createLoading:function(e,t,n,r,i,a,o){var s,l=e;"object"==typeof e&&(l=e.returnMarkup,t=e.type,n=e.width,r=e.height,i=e.size,a=e.color,o=e.text,s=e.useTransparentFallback),t=t||$f.loadingType.spinning,n=n||"20px",r=r||n,i=i||"3px",a=a&&a.toLowerCase()||"#666";var u,d="c_spinningDots",c=$Config.imgsBase+"/common/";t==$f.loadingType.flying?(d="c_flyingDots",u="flyingdots.gif"):(u="spinner_",u+="#fff"==a?"white_":"grey_","60px"==n?u+="120":"30px"==n?u+="60":(u+="40",s&&"#fff"!=a&&(u+="_transparent")),u+=".gif");var p=c+u,f=document.createElement("div");jQuery(f).css({width:n,height:r,"font-size":i}),f.className=d+" c_loadingDots c_dotsPlaying";var m;m='<div class="c_loadingFallback"><img role="presentation" src="'+p+'" alt="" width="'+n+'" height="'+r+'" /></div>',f.innerHTML=m;var v=jQuery("<div></div>").append(f);if(t==$f.loadingType.flying&&v.css({width:n}),o&&v.append('<span class="c_loadingText">'+o.encodeHtml()+"</span>"),l){var g=jQuery("<span></span>").append(v),b=g.html();return g.remove(),b}return v[0]},loadingType:{spinning:0,flying:1},hideLoading:function(e){e.hide(),e.removeClass("c_dotsPlaying")},showLoading:function(e){e.show(),e.addClass("c_dotsPlaying")}},$Do.register("$f")}(),function(){function e(e){function n(e){return e&&e.state==u&&(e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),S==e&&(S=e.next),N==e&&(N=e.prev),e.state=l,e.prev=e.next=null,w--),e}function r(e){if(e&&e.state==l){var t=N;t?(t.next=e,e.prev=t):S=e,N=e,e.state=u,w++}}function i(){!M&&!x&&w&&y>C&&(x=window.setTimeout(m,s))}function f(e){var t=(new Date).getTime()-e<o;return t}function m(){var e=(new Date).getTime();for(x=0,M=!0;w>0&&y>C;){var t=S;if(t&&y>C?(Debug.assert(t.state===u,"Task was not in a pending state and we were just about to execute it."),t=v(n(t))):t=null,t&&!f(e))break}M=!1,i()}function v(e){if(e){Debug.assert(void 0!=e.id&&!E[e.id],"Task didn't have an id or was already active!"),C++,E[e.id]=e,e.startTime=(new Date).getTime(),e.state=d;var t=e.exec(function(t){g(e,t)});t||g(e)}return e}function g(e,t){e.state===d&&(C--,Debug.assert(E[e.id],"A task is being completed without being in the active task list."),delete E[e.id],t&&"number"==typeof t?(e.state=c,e.timeoutId=window.setTimeout(function(){b(e)},t)):b(e))}function b(e){var t=k;e.state=p,delete t[e.id],i()}var h=this,y=e||a,w=0,C=0,x=0,A=0,k={},S=null,N=null,E={},P=!1,M=!1;h.enqueue=function(e,a,o){var s=!1;if(!P){o=o||String(A++);var l=k,d=l[o];(!d||d.state==u&&d.next)&&(d?n(d):(Debug.assert(!E[o],"An active task was found during an enqueue that wasn't in the queue list."),s=!0,d=l[o]=new t(e,a,o)),r(d),i())}return s},h.abortAll=function(){P=!0;h.abort(),P=!1,Debug.assert(0==w,"After abortAll, _pendingTaskCount should be 0. (Was "+w+")"),Debug.assert(0==C,"After abortAll, _activeTaskCount should be 0. (Was "+C+")")},h.abort=function(){var e=k;if(e){for(taskId in e){Debug.assert(e.hasOwnProperty(taskId),"priorityQueue::abort ran across a property in queue that wasn't a task id.");var t=e[taskId];t.state==d?(g(t),t.abort&&t.abort()):t.state==c?(t.timeoutId&&clearTimeout(t.timeoutId),b(t)):n(t)}k={}}},h.getActiveTaskCount=function(){return C},h.getActiveTasks=function(){return E}}function t(e,t,n){var r=this;r.id=n,r.exec=e,r.abort=t,r.timeoutId=0,r.next=null,r.prev=null,r.state=l}var n=window,r=n.wLive,i=r.Core,a=1,o=25,s=0,l=0,u=1,d=2,c=3,p=4;i.TaskQueue=e,t.prototype={id:"",queueId:"",exec:function(){},abort:function(){},timeoutId:0,next:null,prev:null,state:l}}(),function(){var e=wLive.Core,t=1;window.requests=new e.TaskQueue(t)}(),function(){function e(e,t,n,r,i,d,P,T,I){function D(e,t){var n={};if(500==e.status)try{n=JSON.parse(e.responseText)||{}}catch(r){}if(!n.error&&!n.items){var i=!0,a=!1,o=h;switch(n.pageStats={url:_,error:t,tasks:[],executionTimeMs:0,schedulerTimeMs:0},t){case"timeout":o=8001,a=!0;break;case"abort":o=y,i=!1,n.pageStats.info=t,n.pageStats.error=null}n.error={isRetriable:i,code:o,message:"",debugMessage:"(xhr status "+e.status+") xhr.responseText: "+e.responseText,stackTrace:"",isFatal:a}}return n}function F(e,t,n){var s,l=e?e.error:null;if(e=e||{},u.PageStats.add(e.pageStats,$),e.apiCanary&&(c.apiCanary=e.apiCanary,delete e.apiCanary),e.telemetryContext&&(c.tcxt=e.telemetryContext,delete e.telemetryContext),e.error){c.tcxt=e.error.telemetryContext,delete e.error.telemetryContext,s=e.error.stackTrace,s=s&&s.encodeJson?s.encodeJson():"";var d='{"code": "'+e.error.code+'", "message": "'+e.error.message+'", "debug": "'+e.error.debugMessage+'", "stacktrace": "'+s+'", "retriesLeft": "'+B+'", "requestUrl": "'+_+'"}';E.push(d),E.length>k&&E.shift()}if(e.error&&e.error.isRetriable&&B>0)L&&L(),N&&$ReportEvent.ReportApiCall({apiId:N,errorCode:e.error.code,success:!1}),B--,H.start();else if(e.error?(L&&L(H.failureReentranceDelay),e.error.code!=y&&(N&&$ReportEvent.ReportApiCall({apiId:N,errorCode:e.error.code,success:!1}),o(t,e,_),i&&i(e,P),n.reject(e,P))):(L&&L(H.successReentranceDelay),N&&$ReportEvent.ReportApiCall({apiId:N,success:!0}),a(t),r&&r(e,P),n.resolve(e,P)),H.apiId&&H.propertyId){var p=l?l.code:void 0;Qos&&Qos.log(H.apiId,H.propertyId,$,p,void 0,s)}}var H=this,_=t;s(t)?N=null:(_=t.url,N=t.apiId);var O,L,B=void 0!==I&&null!==I?I:w;d=d||b;var $;null===M&&(M=!1,c&&c.isINT&&c.isCorpnet&&(M=!0)),e=e||"key"+S++,H.originId=null,H.jsonpParameterName=void 0,H.successReentranceDelay=0,H.failureReentranceDelay=0,H.apiId="",H.propertyId="",H.start=function(t){var r=jQuery.Deferred();return a(t),l.requests.enqueue(function(e){L=e,$=(new Date).getTime();var i,a={canary:c.apiCanary,Accept:"application/json"},o=_;c.eipt&&(a[x]=c.eipt),c.apiUseIpt&&(a[C]="1"),c.authz&&(a[A]=c.authz);var l=n;return n&&!s(n)&&(void 0===n[p]&&void 0!==c.uiflvr&&(n[p]=c.uiflvr),void 0===n[m]&&void 0!==c.uaid&&(n[m]=c.uaid),void 0===n[f]&&void 0!==c.scid&&(n[f]=c.scid),void 0===n[v]&&void 0!==c.hpgid&&(n[v]=c.hpgid),void 0===n[g]&&void 0!==c.tcxt&&(n[g]=c.tcxt),l=JSON.stringify(n)),l&&(l=l.replace(/\?/g,"\\u003F")),O=jQuery.ajax({url:o,dataType:"json",jsonp:H.jsonpParameterName,jsonpCallback:i?"wLive.Core.DataRequest."+i:void 0,data:l,processData:!1,type:l?"POST":"GET",headers:a,timeout:d}).done(function(e){F(e,t,r),t=null}).fail(function(e,n,i){F(D(e,n,i),t,r),t=null}),!0},H.abort,e),r.promise()},H.abort=function(){O&&(O.abort(),O=null),L&&(L(),L=null)}}function t(e){return e?"<span style='font-weight: bold;'>"+e.toString().encodeHtml()+":</span> ":""}function n(e,n){return n?"<div>"+t(e)+n.toString().encodeHtml()+"</div>":""}function r(e){for(var t=[],n=(e||"").split("\n"),r=0;r<n.length;r++)for(var i=n[r],a=(i||"").split("\\u000d"),o=0;o<a.length;o++){var s=(a[o]||"").replace("\\u000a","").replace("\\u0028","(").replace("\\u0029",")").replace("\\u003a",":").replace("\\u003c","&lt;").replace("\\u003d","=").replace("\\u003e","&gt;").replace("\\u005c","\\");t.push(s)}return t}function i(e){var t="<div id='c_eps'><pre>";if(e)for(var n=0;n<e.length;n++)t+=e[n]+"\n";return t+="<pre></div>",jQuery(t)}function a(e){if(M&&e){var t=jQuery("#iDataRequestErrorDetail",e);t.hide(),jQuery(".dataRequestErrorDetails",t).empty()}}function o(e,t,o){if(a(e),M&&t&&t.error&&(t.error.stackTrace||t.error.debugMessage)){var s=r(t.error.stackTrace),l=null;if(s.length>0){if(l=i(s),e&&(t.error.isFatal||t.error.showError||T)){var u=jQuery("#iDataRequestErrorDetail",e);u&&0==u.length&&(u=jQuery(P),e.append(u));var d=jQuery(".dataRequestErrorDetails",e);d.empty(),o&&d.append(jQuery(n("Url",o))),d.append(jQuery(n("Error Code",t.error.code))),t.error.message&&d.append(jQuery(n("Message",t.error.message))),t.error.isFatal&&d.append(jQuery(n("Is Fatal",t.error.isFatal))),t.error.debugMessage&&d.append(jQuery(n("Debug",t.error.debugMessage))),t.error.data&&t.error.data.length>0&&d.append(jQuery(n("Data",t.error.data))),l&&d.append(l),u.show()}if(window.$Debug&&$Debug.scriptConsole){var c=$Debug.scriptConsole;c.errorHtml(n("Url",o)+n("Error Code",t.error.code)+(t.error.message?n("Message",t.error.message):"")+(t.error.isFatal?n("Is Fatal",t.error.isFatal):"")+(t.error.debugMessage?n("Debug",t.error.debugMessage):""),{url:o,code:t.error.code,data:t.error.data,stackTrace:s,rsp:t})}}}}function s(e){return"string"===jQuery.type(e)}var l=window,u=l.wLive,d=u.Core,c=l.$Config,p="uiflvr",f="scid",m="uaid",v="hpgid",g="tcxt",b=3e4,h=8e3,y=8002,w=0,C="wlPreferIpt",x="eipt",A="authz",k=100,S=0,N=null;d.DataRequest=e;var E=d.DataRequest.Errors=[];d.DataRequest.ApiErrorCodes={GeneralError:"6000",AuthFailure:"6001",InvalidArgs:"6002",Timeout:h,Aborted:y};var P="<div id='iDataRequestErrorDetail' class='dataRequestErrorDetail' style='display:none'><h2><font color='red'>Microsoft confidential - corpnet only</font></h2><div class='dataRequestErrorDetails'></div></div>",M=null,T=!1;e.forceShowErrors=function(e){T=e}}(),function(){function e(e){return function(t){t&&t.error&&e.testFailureMethod?e.testFailureMethod():e.testSuccessMethod&&e.testSuccessMethod(),setTimeout(function(){$Utility.navigateTo(e.redirectUrl)},0)}}function t(e,t){var a=null,o=null,l=null,u=null,d=s.WLXAccount&&s.WLXAccount.countryCode?s.WLXAccount.countryCode:"";a=r(),"number"===jQuery.type(e)||"string"===jQuery.type(e)?(l=e,u=""):(l=e.pageId,u=i(e.userAction));var c=n(e,l,t);return null!=a?(v=!0,o={pageApiId:l,country:d,perfData:a,clientDetails:f,userAction:u,source:t,clientTelemetryData:c}):(v=!0,o={pageApiId:l,clientDetails:f,country:d,userAction:u,source:t,clientTelemetryData:c}),o}function n(e,t,n){var r={};try{var i=a.performance&&a.performance.timing?a.performance.timing:null;r.category=n,r.pageName=t?String(t).replace(/_Client$/,""):"",r.eventInfo={},r.eventInfo.timestamp=(new Date).getTime(),null!=i&&!v&&m&&(r.eventInfo.perceivedPlt=g>i.loadEventEnd?g-i.navigationStart:i.loadEventEnd-i.navigationStart,r.eventInfo.networkLatency=i.responseEnd-i.navigationStart),n!==d||v||(r.category=u),"undefined"!=typeof ExternalHelper&&(r.eventInfo.networkType=ExternalHelper.getProperty("TelemetryNetworkType"),r.eventInfo.appVersion=ExternalHelper.getProperty("TelemetryAppVersion")),"undefined"!=typeof ExternalHelper&&r.category===u?(r.eventInfo.precaching=ExternalHelper.getProperty("TelemetryPrecaching"),r.eventInfo.bundleVersion=ExternalHelper.getProperty("TelemetryResourceBundleVersion"),r.eventInfo.deviceYear=ExternalHelper.getProperty("TelemetryDeviceYearClass"),r.eventInfo.isMaster=ExternalHelper.getProperty("TelemetryIsRequestorMaster"),r.eventInfo.bundleHits=ExternalHelper.getProperty("TelemetryResourceBundleHits"),r.eventInfo.bundleMisses=ExternalHelper.getProperty("TelemetryResourceBundleMisses"),ExternalHelper.setProperty("TelemetryResourceBundleHits","0"),ExternalHelper.setProperty("TelemetryResourceBundleMisses","0")):r.category===c&&(e.suggestedAccountType&&(r.eventInfo.suggestedAccountType=e.suggestedAccountType),e.accountType&&(r.eventInfo.accountType=e.accountType),e.duration&&(r.eventInfo.duration=e.duration),e.errorCode&&(r.eventInfo.errorCode=e.errorCode)),"undefined"!=typeof ExternalHelper&&ExternalHelper.reportTelemetry(JSON.stringify(r))}catch(o){}return r}function r(){var e=null;if(a.performance&&a.performance.timing&&s.reportPerfData&&!v&&m){e={};var t=a.performance.timing.navigationStart;jQuery.each(a.performance.timing,function(n,r){jQuery.isNumeric(r)&&(e[n]=r>t?r-t:0)}),e.customLoadEventEnd=g>0?g-t:0}return e}function i(e){var t="";return jQuery.isArray(e)?(jQuery.each(e,function(e,n){t+=n,t+=","}),t=t.substring(0,t.length-1)):"string"==typeof e&&(t=e),t}var a=window,o=a.wLive.Core.DataRequest,s=a.$Config,l=s&&s.WLXAccount?s.WLXAccount.urls:null,u="PageLoad",d="PageView",c="UserAction",p=1e4,f=[],m=!1,v=!1,g=0,b=a.$ReportEvent={};b.ApiTime=function(){if("undefined"!=String(a.wLive.PageStats)&&"undefined"!=String(a.wLive.PageStats.d)){var e=a.wLive.PageStats.d[0],t=e.clientStart;if("undefined"!=t)return(new Date).getTime()-t}return 0},b.ReportApiCall=function(e){if(e){var t=e.apiId;if(!t)throw"ApiId is missing for api call";{e.success,e.errorCode}e.time=b.ApiTime(),f.push(e)}},b.SetCustomPageLoadCompletedTime=function(e){g=e},b.PageLoadCompleted=function(){m=!0},b.Fire=function(e){if(l&&l.reportClientData){var n,r;"number"===jQuery.type(e)||"string"===jQuery.type(e)?(n="",r=""):(n=e.testSuccessMethod,r=e.testFailureMethod);var i=t(e,d),a=new o(null,$Utility.generateUrl(l.baseDomain,l.reportClientData,!0),i,n,r,p);a.start(),f=[]}},b.Action=function(e){if(l&&l.reportClientData){var n=t(e,c);if(!e.skipClientCall){var r=new o(null,$Utility.generateUrl(l.baseDomain,l.reportClientData,!0),n,e.testSuccessMethod,e.testFailureMethod,p);r.start()}f=[]}},b.Navigate=function(n){if(l&&l.reportClientData){var r=t(n,"Navigate"),i=new o(null,$Utility.generateUrl(l.baseDomain,l.reportClientData,!0),r,e(n),e(n),p);i.start(),f=[]}}}(),function(){function e(){}function t(t){var n=o.Animations;return!n||e.$forcejQuery||t?!1:n.Enabled||!1}function n(e,t,n){if($B.IE)try{e[0].style.removeAttribute("filter")}catch(i){}r(e,t,n)}function r(e,t,n){e&&(t?(e.show(),e.css("opacity","1")):(e.css("opacity","0"),e.hide())),n&&n()}function i(e,t,n){setTimeout(function(){r(e,t,n)},0)}var a=window,o=a.wLive,s=a.$Config.WLXAccount;registerNamespace("wLive.Account"),o.Account.AnimationHelper=e,e.$forcejQuery=!1,e.enabled=!s.isXbox&&!s.isWin10&&!s.disableAnimations,e.fadeIn=function(a,s,l){e.enabled?t(l)?o.Animations.fadeIn(a).then(function(){r(a,!0,s)}):a.fadeIn(100,function(){n(a,!0,s)}):i(a,!0,s)},e.fadeOut=function(a,s,l){e.enabled?t(l)?o.Animations.fadeOut(a).then(function(){r(a,!1,s)}):a.fadeOut(100,function(){n(a,!1,s)}):i(a,!1,s)},e.enterContent=function(a,s,l){if(e.enabled)if(t(l))o.Animations.enterContent(a).then(function(){r(a,!0,s)});else{var u="left",d=40;$B&&$B.rtl&&(u="right",d=-40);var c=(a.position(),""),p=a.prop("style");p&&(c=p[u]),a.css(u,"+="+d+"px"),a.css("opacity","0.0");var f={opacity:"1.0"};f[u]="-="+d+"px",a.animate(f,170,function(){a.css(u,c),n(a,!0,s)})}else i(a,!0,s)},e.exitContent=function(a,s,l){if($B.IE&&11==$B.V&&(l=!0),e.enabled)if(t(l))o.Animations.exitContent(a).then(function(){r(a,!1,s)});else{var u="left",d="-=10px";$B&&$B.rtl&&(u="right",d="+=10px");var c=(a.position(),""),p=a.prop("style");p&&(c=p[u]);var f={opacity:"0.0"};f[u]=d,a.animate(f,80,function(){a.css(u,c),n(a,!1,s)})}else i(a,!1,s)},e.addToList=function(a,s,l){e.enabled?t(l)?(a.show(),o.Animations.addToList(a).then(function(){r(a,!0,s)})):a.slideDown(100,function(){n(a,!0,s)}):i(a,!0,s)},e.deleteFromList=function(a,s,l){e.enabled?t(l)?o.Animations.deleteFromList(a).then(function(){r(a,!1,s)}):a.slideUp(100,function(){n(a,!1,s)}):i(a,!1,s)},e.deleteFromListFast=function(a,s,l){e.enabled?t(l)?o.Animations.deleteFromListFast(a).then(function(){r(a,!1,s)}):a.slideUp(50,function(){n(a,!1,s)}):i(a,!1,s)},e.expand=function(a,s,l){e.enabled?t(l)?(a.show(),o.Animations.expand(a).then(function(){r(a,!0,s)})):a.slideDown(100,function(){n(a,!0,s)}):i(a,!0,s)},e.collapse=function(a,s,l){e.enabled?t(l)?o.Animations.collapse(a).then(function(){r(a,!0,s)}):a.slideUp(100,function(){n(a,!0,s)}):i(a,!0,s)}}(),function(){function e(e,t){if(e){if("undefined"!=typeof t&&t[e])return GetString("live.accounts.strings."+t[e]);if(E[e])return GetString("live.accounts.strings."+E[e])}var n=GetString("live.accounts.strings.error_"+e);return n||(n=GetString("live.accounts.strings."+e)),n||(n=GetString("live.accounts.strings."+C)),n}function t(e){return"string"==typeof e}function n(e,n,r){return t(e)&&t(n)?r?e.toLowerCase()===n.toLowerCase():e===n:!1}function r(e,t,r){if(e=(e||"").trim(),t&&""===e)return x;if(e.length>113)return k;if(r&&n(e,r,!0))return S;var i=new RegExp(h.AltEmailRegEx);return e.match(i)?null:k}function i(e,t){var n=e>=97&&122>=e,r=e>=65&&90>=e;return n&&t||r&&!t}function a(e,t,n){return e=(e||"").trim(),t&&""===e?x:e.length>(n?n:10)?A:null}function o(e,t){return e=(e||"").trim(),t&&""===e?x:e.length>30||e.length<1?A:null}function s(e,t){t&&(e?t.css("opacity",1):t.css("opacity",0))}function l(e,t){if(e){if(e.indexOf("@")>=0){var n=e.split("@");if(2===n.length){for(var r=n[1].toLowerCase(),i=0,a=t.length;a>i;i++)if(t[i].toLowerCase()===r)return N.Live;return N.EASI}return N.Unknown}return N.Phone}return N.Unknown}function u(e,t){var n=!1;if(e&&t&&e.indexOf("@")>=0){var r=e.split("@");if(2===r.length){var i=r[1].toLowerCase();t.toLowerCase()===i&&(n=!0)}}return n}function d(e,t){if(e){var n=new RegExp(h.PhoneNumberFormat);if(!e.match(n))return A}else if(t)return x;return null}function c(e,t,n){var r={buttons:{},text:{}},i={};i.disabled=ko.observable(!1),i.visible=ko.observable(!0);var a={};a.visible=ko.observable(e&&0===t);var o={};return o.disabled=ko.observable(!1),o.visible=ko.observable(!0),r.buttons.nextButton=i,r.buttons.consentCreateButton=a,r.buttons.backButton=o,r.text.visible=ko.computed(function(){return e&&r.buttons.nextButton.visible()}),r.buttons.visible=ko.computed(function(){return r.buttons.nextButton.visible()||r.buttons.backButton.visible()}),r.additionalLegalText=n,w&&(r.strings=w.strings,r.config=w.page),r}function p(){if(y&&y.url&&("undefined"==typeof m.HIPAMFE&&(HIPAMFE={holder:"hipContent",scriptHolder:"hipScript",done:!1,showMenu:!0,showAddAccountOption:!1,inputWidth:$B.IE&&$B.major<9?200:"100%",cssSet:{cssCdHIPInput:"form-control input-max-width",cssCdHIPList:"form-control",cssCdHIPError:"alert alert-error",cssCdHIPErrorImg:"hide",cssCdHIPButton:"btn btn-default",cssCdHIPLabel:"text-base"},createObservable:function(){var e=m.HIPAMFE;return e.observable={},v.extend(e.observable,b.viewModelHandle),e.observable.hip.suppressMessages(!0),e.observable.hip(""),e.observable},updateTitle:function(){var e=m.HIPAMFE,t=v("#HipPane");e.type&&("sms"===e.type?(v(".forVisualHip",t).addClass("hide"),v(".forSmsHip",t).removeClass("hide")):(v(".forVisualHip",t).removeClass("hide"),v(".forSmsHip",t).addClass("hide")))},postLoad:function(){function e(e){return v("label",e).addClass("text-base text-body"),h.isWin10?(v("select",e).addClass("win-dropdown").parent().addClass("template-input inputType_large"),v("input[type=text]",e).addClass("win-textbox").parent().addClass("template-input inputType_large")):h.isWin10InclusiveOOBE?(v("select",e).removeClass().addClass("win-dropdown").parent().addClass("template-input"),v("input[type=text]",e).removeClass().addClass("win-textbox").parent().addClass("template-input")):(v("select",e).addClass("input-max-width").parent().addClass(t).removeAttr("style"),v("input[type=text]",e).removeClass("hiddenHipInputText").addClass("input-max-width").parent().addClass(t).removeAttr("style")),"#hipContent #wlspispHipControlButtonsContainer"===e.selector&&(v("body").hasClass("cb")?v("a",e).addClass("btn btn-block").parent().addClass(t).removeAttr("style"):v("a",e).addClass("btn btn-primary btn-block").parent().addClass(t).removeAttr("style")),e
}var t="form-group col-xs-24 template-input",n="col-xs-12",r=!1;v(".col-md-24").length>0?(t="form-group col-md-24 template-input",n="col-md-12",r=!1):v(".col-xs-18").length>0&&(t="form-group col-xs-18 template-input",n="col-xs-9",r=!0);var i=m.HIPAMFE,a=v("#hipDesc"),o=v("#hipTemplateContainer"),s=(v("#HipPane"),v("#"+i.holder));if(a.length>0&&a.addClass("text-block-body"),o.addClass("text-block-body"),i.updateTitle(),ko.cleanNode(o[0]),"sms"===i.type){var l=v("#pageControlHost input[type=submit]:visible");b.ftrViewModelHandle?b.ftrViewModelHandle.buttons.nextButton.disabled(!0):l.length>0&&l.attr("disabled","disabled"),r&&v("#hipSection div.col-xs-18").addClass("alert alert-error");var u=e(v("#wlspispHIPErrorContainer",s).removeAttr("style").addClass(t)).detach().attr("data-bind","visible: !hip.suppressMessages() && !hip.isValid()"),d=e(v("#wlspispHipChallengeContainer",s).removeAttr("style")).detach(),c=e(v("#wlspispHipControlButtonsContainer",s).removeAttr("style")).detach().on("click",function(){i&&i.observable&&i.observable.hip.suppressMessages(!0)}),p=e(v("#wlspispHipSolutionContainer",s)).hide().detach();v(".form-control",p).attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }"),o.html("").append(d).append(c).append(p).append(u),i.createObservable(),i.observable.hip.suppressMessages(!0),ko.applyBindings(i.observable,o[0]);try{var f=b.viewModelHandle;f.phoneNumber&&f.phoneCountry&&i.setPhoneNumber(f.phoneCountry(),f.phoneNumber())}catch(g){}var y=i.getHipDataResponse;i.getHipDataResponse=function(e){y(e),e||(b.ftrViewModelHandle?b.ftrViewModelHandle.buttons.nextButton.disabled(!1):l.length>0&&l.removeAttr("disabled"))}}else{var c=v("<div></div>").addClass("text-body btn-group").addClass(n).append(v("a",s).addClass("btn btn-block captchaHIPLinks").attr("role","button").removeAttr("style").detach()),d=v("<div></div>").addClass(n);if(i.type===P)d.append(v(".cssWLSPHIPAudio",c).parent().detach().removeClass("btn btn-block"));else{var w=v("img",s).filter(function(){return this.src.indexOf("GetHIPData")>-1}).css("height","auto").css("width","100%").css("max-width","200px");r||w.addClass("text-body"),d.append(w.detach())}var p=v("<div></div>").addClass("form-group template-input").addClass(t),C=v(".form-control",s);C.attr("name",C.attr("id")),i.type!==P&&0!==$Config.isPlaceholderSupported&&v("body").hasClass("cb")?p.append(C.removeAttr("style").attr("placeholder",HIPAMFE.getInstruction()).attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }").detach()):(p.append(v("<label></label>").addClass("text-base").text(HIPAMFE.getInstruction())),p.append(C.removeAttr("style").attr("data-bind","value: hip, setFocus: hip.focused, css: { 'has-error': !hip.suppressMessages() && !hip.isValid() }").detach()),i.type===P&&setTimeout(function(){C.focus()},0));var u=v("<div></div>").addClass(t).append(v(".alert-error",s).detach().addClass("floatLeft"));o.html("").append(d).append(c).append(p).append(u),i.createObservable(),ko.applyBindingsWithValidation(i.observable,o[0])}i.observable.hip.serverError&&(i.error=1,i.setError(),i.observable.hip.serverError=null,v.each(v(".alert-error",o),function(e,t){var n=v(t);return"inline"===n.css("display")?(n.css("display","block"),!1):void 0}))}}),m.HIPAMFE&&!m.HIPAMFE.done)){var e=v("#hipScript")[0],t=v("#hipScript script")[0];if(t)t.src=y.url;else{var n=document.createElement("script");n.type="text/javascript",n.src=y.url,e.appendChild(n)}}}function f(e){var t=!1;if(0!==w.autoVerify){e&&(e=e.replace(/[^0-9]/g,""));var n=w.viewContext.data;if(n.devicePhone){var r=n.devicePhone;v.each(r,function(n,r){return r&&r.phoneNumber&&e&&e.indexOf(r.phoneNumber)>=0?(t=!0,!1):void 0})}}return t}var m=window,v=m.jQuery,g=m.wLive,b=g.Account,h=(g.Core.DataRequest,m.$Config.WLXAccount),y=h.hip,w=h.signup,C="error_500",x="errorFieldRequired",A="errorInvalidFormat",k="errorEmailInvalidFormat",S="errorEmailIsMembername",N={EASI:"EASI",Live:"Live",Phone:"Phone",Unknown:"Unknown"},E={errorFieldRequired:"error_1018",errorEmailInvalidFormat:"error_1035",errorEmailIsMembername:"error_1267",errorEmailExists:"error_1287"},P="audio";registerNamespace("wLive.Account.FieldHelper"),g.Account.FieldHelper.verifyEmailAddress=r,g.Account.FieldHelper.verifyOttCode=a,g.Account.FieldHelper.verifyRecoveryCode=o,g.Account.FieldHelper.strEquals=n,g.Account.FieldHelper.isCapsLockOn=i,g.Account.FieldHelper.toggleInlineLabel=s,g.Account.FieldHelper.getMemberNameType=l,g.Account.FieldHelper.doesDomainMatch=u,g.Account.FieldHelper.verifyPhoneNumber=d,g.Account.FieldHelper.getErrorString=e,g.Account.FieldHelper.loadHip=p,g.Account.FieldHelper.memberNameTypes=N,g.Account.FieldHelper.createFooterObservable=c,g.Account.FieldHelper.isAutoVerificationSupported=f,g.Account.FieldHelper.errors={required:x,invalidFormat:A,emailInvalidFormat:k,emailIsMembername:S}}(),function(){function e(e){if(!e)return r;if("string"!=typeof e||e.length<5||":"!=e.charAt(1))return p;var t=e.charAt(0);return f[t]?f[t]:r}var t=window,n=t.wLive,r=0,i=1,a=2,o=3,s=4,l=5,u=6,d=7,c=8,p=-1,f={"-":r,e:i,a:o,h:l,r:a,v:s,s:u,i:d,c:c};registerNamespace("wLive.Account.TokenHelper"),n.Account.TokenHelper.getTokenType=e,n.Account.TokenHelper.Types={none:r,hip:l,email:i,reset:a,authz:o,recover:s,acsrInit:d,acsrSubmit:c,invalid:p}}(),function(){function e(e,t){var n="&"+t.toLowerCase()+"=",r=e.toLowerCase().indexOf(n);if(-1==r&&(n="?"+t.toLowerCase()+"=",r=e.toLowerCase().indexOf(n),-1==r))return null;var i=e.indexOf("&",r+1);return-1==i&&(i=e.length),e.substring(r+n.length,i)}function t(e,t,n){if(!e)return"";var r="&"+t.toLowerCase()+"=",i=e.toLowerCase().indexOf(r);if(-1==i&&(r="?"+t.toLowerCase()+"=",i=e.toLowerCase().indexOf(r),-1==i)){var a="&";return-1==e.indexOf("?")&&(a="?"),e+a+t+"="+n}var o=e.indexOf("&",i+1);return-1==o&&(o=e.length),e.substring(0,i)+r+n+e.substring(o)}var n=window,r=n.wLive;registerNamespace("wLive.Account.UrlHelper"),r.Account.UrlHelper.SetQSValue=t,r.Account.UrlHelper.GetQSValue=e}(),function(){function e(){function e(){o.on("unload"+r,function(){i()})}function i(){a.$.triggerHandler(n),o.off(r),o=null,a=null}var a=this,o=jQuery(t);a.$=jQuery(a),e()}var t=window,n="dispose",r=".pageEvents";e.prototype={next:"onNext",back:"onBack",dispose:n,setFocus:"setFocus"},registerNamespace("wLive.Account"),wLive.Account.PageEvents=new e}(),function(){function e(e){function n(){a++}function o(e,t,n,r){function i(){m[e]=setTimeout(function(){n(),delete m[e],r&&v[e]&&(n=v[e],delete v[e],i())},t)}return r&&m[e]?void(v[e]=n):(m[e]&&(clearTimeout(m[e]),delete m[e]),void i())}function s(e){m[e]&&(clearTimeout(m[e]),delete m[e])}var l=this,u=null,d=e,c=r.isXbox,p=!1,f=t.WIZARDUI,m={},v={};l.dispose=function(){p||(u&&(u.empty(),u=null),p=!0)},l.showLoading=function(){o("LoadingIndicatorControl$loading#"+a,500,function(){p||(c?f&&f.notReady&&f.notReady():d&&(d.show(),i&&(u||(u=jQuery(i.createLoading(0,i.loadingType.spinning,"25px","25px")),jQuery(".loadingSpinner",d).append(u)),i.showLoading(u))))})},l.hideLoading=function(e){s("LoadingIndicatorControl$loading#"+a),p||(c?f&&f.ready&&f.ready({fKeyboardEnabled:e}):d&&(d.hide(),i&&u&&i.hideLoading(u)))},n()}var t=window,n=t.wLive,r=t.$Config.WLXAccount,i=t.$f,a=0;e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.LoadingIndicatorControl=e}(),function(){function e(e,h,y){function w(){}function C(){var e=W&&W.pageTitle;e&&(document.title=e,et&&lt&&lt.setHeaderText&&lt.setHeaderText(e))}function x(){var e=W&&W.removeLeftNav;e&&(jQuery(".LeftNav").hide(),jQuery("body").removeClass("am_fxlnav"))}function A(){var e=W.sectionId,t=W.annotations;if(e&&t)for(var n=jQuery("#"+e,Q),r=0,i=t.length;i>r;r++){var a=t[r][0],o=t[r][1];a&&o&&n.attr("data-"+a,o)}}function k(e){return J&&J[e]?Z[e]?Z[e]:("string"==typeof J[e]?(Z[e]=jQuery("#"+J[e],z),Debug.trace("PageDialogControl.getButton ["+e+"(#"+J[e]+")] = "+Z[e].length)):Z[e]=J[e]instanceof jQuery?J[e]:jQuery(),Z[e]):jQuery()}function S(e){e?(k("action").removeAttr("disabled"),k("alternate").removeAttr("disabled"),k("cancel").removeAttr("disabled")):(k("action").attr("disabled","disabled"),k("alternate").attr("disabled","disabled"),k("cancel").attr("disabled","disabled")),G=e}function N(e){var t="action",n=jQuery(e.currentTarget).attr("id");if(n==g+rt||n==g+rt+b){for(var r=jQuery(".default:visible",it),i=r.length,a=0;i>a;a++){var o=jQuery(r[a]).attr("id");if(o==J.action){t="action";break}if(o==J.alternate){t="alternate";break}if(o==J.cancel){t="cancel";break}if(o==J.skip){t="skip";break}}return E(e,t)}}function E(e,t){if(Debug.trace("PageDialogControl.buttonClick ["+t+"] enabled:["+G+"]"),G){var n=k(t);if(n.length>0&&"disabled"==n.attr("disabled"))return!1;R.triggerHandler(s,{actionName:t,control:U,viewModel:ot})}return e&&(e.preventDefault(),e.stopPropagation()),!1}function P(e){if(J&&J[e]){var t=k(e);t.length>0&&(Debug.trace("PageDialogControl.on(Click) ["+e+"]"),t.on("click"+v+rt,function(t){return E(t,e)}))}a&&$Config.WLXAccount.isWin10InclusiveOOBE&&"cancel"===e&&(y.hasCancel?(a.setDisableBackNavigation(!1),a.handleBackButton(function(){return E(null,e)})):a.setDisableBackNavigation(!0))}function M(e){Z[e]&&(Debug.trace("PageDialogControl.clearButton ["+e+"(#"+J[e]+")]"),Z[e].off("click"+v+rt),delete Z[e])}function T(e){if(Z[e]&&Z[e].length>0&&"string"==typeof J[e]){var t=jQuery("#"+J[e],z);Debug.assert(0!=t.length,"Html has been modified and removed the linked ["+e+"] button -- hook the onCreateContent event to alter the HTML"),Debug.assert(t[0]===Z[e][0],"Html has been modified and has replaced the linked ["+e+"] button -- hook the onCreateContent event to alter the HTML")}}function I(){if(P("action"),P("alternate"),P("revert"),P("cancel"),P("skip"),"undefined"!=typeof OnNext&&"undefined"!=typeof OnBack&&"undefined"!=typeof i&&(i.$.on(i.next+v+rt,function(){var e="action";W&&W.pageNextAction&&(e=W.pageNextAction);var t=k(e);if(t.length>0){if("disabled"==t.attr("disabled"))return;E(null,e)}else W&&W.pageNextAction&&E(null,e)}),i.$.on(i.back+v+rt,function(){var e="cancel";W&&W.pageBackAction&&(e=W.pageBackAction);var t=k(e);if(t.length>0){if("disabled"==t.attr("disabled"))return;E(null,e)}else W&&W.pageBackAction&&E(null,e)})),n.Account.DialogManager){var e=n.Account.DialogManager;e.$.on("action"+v+rt,function(){var e=W.pageNextAction||"action";E(null,e)}),e.$.on("cancel"+v+rt,function(){U.dispose()})}it&&it.on("submit"+v+rt,N),at&&at.on("click"+v+rt,N);var t=W.viewModel,a=n.Account.ViewModels;if(a&&t&&st){var o,l={trigger:function(e){R.triggerHandler(s,{actionName:e,control:U,viewModel:ot})}};o="function"==typeof t?t:a[t],ot=new o(X,W.viewModelOptions,l),n.Account.viewModelHandle=ot,r.applyBindingsWithValidation(ot,jQuery("#"+st,Q)[0],{insertMessages:!1,messagesOnModified:!0})}R.triggerHandler(d,{content:z,control:U,viewModel:ot})}function D(){(et||tt||nt)&&i.$.off(v+rt),n.Account.DialogManager&&n.Account.DialogManager.$.off(v+rt),R.triggerHandler(c,{content:z,control:U}),M("action"),M("alternate"),M("revert"),M("cancel"),M("skip"),it&&it.off("submit"+v+rt),at&&at.off("click"+v+rt)}function F(){if(T("action"),T("alternate"),T("revert"),T("cancel"),T("skip"),it&&it.length>0){var e=z;z!==it&&(e=jQuery("#"+g+rt,z)),Debug.assert(0!=e.length,"AutoForm has been removed -- hook the onCreateContent event to alter the HTML"),Debug.assert(it[0]===e[0],"AutoForm has been modified and has replaced -- hook the onCreateContent event to alter the HTML")}if(at&&at.length>0){var t=jQuery("input[type=submit]",z);Debug.assert(0!=t.length,"AutoFormSubmit button has been removed -- hook the onCreateContent event to alter the HTML"),Debug.assert(at[0]===t[0],"AutoFormSubmit button has been modified and has replaced -- hook the onCreateContent event to alter the HTML")}}function H(e,t){for(var n=t.split("."),r=n.length,i=0;r>i&&null!==e&&void 0!==e;)e=e[n[i++]];return e}function _(e,t,n){return e.indexOf(t)>-1&&(e=e.replace(t,n)),e}function O(e){return W.getViewContextTokenValue?W.getViewContextTokenValue(X,e):H(X,e)}function L(e){if(!K)return!1;var t=jQuery("form",e);if(t.length>0)return!1;var n=jQuery(":input",e);return 0==n.length?!1:!0}function B(e){if(L(e)){if(it=jQuery("<form id='"+g+rt+"' action='#' onsubmit='return false;' novalidate='novalidate'></form>"),it.append(e),0==jQuery("input[type=submit]",e).length){var t=jQuery("<input aria-hidden='true' id='"+g+rt+b+"' type='submit' tabindex='-1' style='position: absolute; height: 0px; width: 0px; border: none; padding: 0px; min-width: 0px; min-height: 0px;' />");it.append(t)}return at=jQuery("input[type=submit]",e),it}return e}function $(){var e=jQuery(W.viewTemplate).clone(),t=W.viewContextTokens;if(t&&t.length>0){for(var n=e.html(),r=0;r<t.length;r++){var i=t[r],o=O(i);void 0!==o&&null!==o&&(n=_(n,"{"+i+"}",jQuery("<span />").text(o).html()))}e.html(n)}return a&&($Config.WLXAccount.isWin10||$Config.WLXAccount.isHolo)&&a.getContext(function(t){var n=t.host.toUpperCase()===a.Hosts.OOBE||t.host.toUpperCase()===a.Hosts.NthUserFirstLogon;jQuery(".icon-win-easeOfAccess",e).toggle(n)}),R.triggerHandler(p,{content:e,control:U}),B(e)}function V(){W.focusFirstButton?setTimeout(function(){z.find(".Buttons input[type=button], .buttons input[type=button]").first().focus()},10):W.focusFirstInput?setTimeout(function(){var e=jQuery("input,select",z).not(":hidden").first();0==e.length&&(e=jQuery("a,button,input[type=button]",z).not(":hidden").first()),e.focus()},10):W.focusSubmit?setTimeout(function(){z.find("input[type=submit]").not(":hidden").first().focus()},10):W.focusFirstElemId&&setTimeout(function(){jQuery("#"+W.focusElemId,z).first().focus()},10)}var U=this,R=U.$=jQuery(U),j=!1,q=!1,Q=e,W=y,z=null,X=h,J=y.buttons,G=!0,K=y.autoForm!==!1&&0!==y.autoForm&&"False"!==y.autoForm,Z={},Y=o.isWinWab,et=o.isWinWiz,tt=o.isXbox,nt=o.isWPBlue,rt=m++,it=null,at=null,ot=null,st=y.sectionId,lt=t.WIZARDUI;U.content=function(){return z},U.show=function(){Debug.trace("PageDialogControl.show()"),z||(z=$()),q||(Q.append(z),q=!0),A(),C(),I(),z.show(),Y&&(jQuery("form").parents("div").css("height","100%"),"undefined"!=typeof setContentWidth&&setContentWidth()),R.triggerHandler(l,{content:z,control:U}),V(),x(),F(),Debug.trace("PageDialogControl.~show()")},U.hide=function(){Debug.trace("PageDialogControl.hide()"),z.hide(),R.triggerHandler(u,{content:z,control:U}),D(),z.detach(),q=!1},U.setEnabled=function(e){Debug.trace("PageDialogControl.setEnabled("+e+")"),S(e)},U.getButton=k,U.dispose=function(){Debug.trace("PageDialogControl.dispose()"),j||(R.triggerHandler(f,{control:U}),D(),z.empty(),q&&z.remove(),z=null,j=!0,U.$=null),U=null,R=null,J=null,Z=null,Q=null,W=null,h=null,y=null},w()}var t=window,n=t.wLive,r=t.ko,i=n.Account.PageEvents,a=t.MSA&&t.MSA.CXH,o=t.$Config.WLXAccount,s="onAction",l="onShow",u="onHide",d="onSetupEvents",c="onRemoveEvents",p="onCreateContent",f="onDispose",m=0,v=".pagedialog",g="pageDialogForm_",b="_submit";e.prototype.events={action:s,createContent:p,show:l,hide:u,setupEvents:d,removeEvents:c,dispose:f},e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.PageDialogControl=e}(),function(){function e(e,n,y){function w(){}function C(e){var t,n=Q[e];return t=r(n.template?n.template:y.defaultTemplate?y.defaultTemplate:"<div></div>"),t.hide(),t}function x(e,t){var n,r=Q[t];return new(n="function"==typeof r.control?r.control:a[r.control])(e,q,r.options)}function A(e,t){Debug.trace("FlowController.notifyVisible ["+t+"]"),!L&&e&&e[b]&&e[b](),S(e,!0),O.triggerHandler(l,{controller:_,control:e,state:t,viewContext:q})}function k(e,t,n,i){if(i[g]&&!i[g](e))return null;if(z[h]){var a=z[h](t,n,q,e);if(a)if(r.isArray(n)){for(var o=0;o<n.length;o++)if(n[o]===a)return a}else if(a===n)return a;return null}return n}function S(e,t){e&&e[v]&&e[v](t)}function N(e,n,a,o,s){if(!L&&V===e){B.append(e),R=r(n),Debug.trace("Hooking control events for ["+a+"]");var l=n.events;for(var u in l){var d=l[u];R.on(d,{eventName:d,state:a,control:n},F)}R.on(n.events.action,{state:a,control:n},H),j=e,e.show(),n.show();var c=function(){if(e.show(),U===n&&A(n,a),o.pageId){var r={pageId:o.pageId,userAction:o.userAction};$ReportEvent.SetCustomPageLoadCompletedTime((new Date).getTime()),$ReportEvent.PageLoadCompleted(),$ReportEvent.Fire(r),t.$Config.hpgid=o.pageId}};s?i.enterContent(e,c):c(),O.triggerHandler(f,{controller:_,activeState:a,control:n,container:e,viewContext:q})}}function E(){X=[]}function P(e,t){if(!e.skipBackStack){if(X.length>0&&X[0]!=t)for(var n=0;n<X.length;n++)if(X[n]==t){X=X.slice(0,n);break}X.push(t)}}function M(e){if(X.length>0)for(var t=X.length-1;t>=0;t--)if(X[t]==e){X=X.slice(0,t);break}}function T(e,t){if(X.length>0){Debug.trace("FlowController.getBackState("+e+", "+t+") -- "+X);for(var n=X.length-1;n>=0;n--){var i=X[n];if(i!=e&&i)if(r.isArray(t)){for(var a=0;a<t.length;a++)if(t[a]==i)return i}else if(i==t)return i}}return null}function I(e,t){if(!L)if(Debug.trace("FlowController.showControl("+e+")"),$!=e&&Q[e]){Debug.trace("New State ["+e+"] from ["+$+"]"),O.triggerHandler(p,{control:_,activeState:$,newState:e,viewContext:q});var n=Q[e],a=n.url,s=n.target,l=n.cancelUrl,d=n.triggerAction;if(a)return Debug.trace("Navigate to ["+a+"]"),O.triggerHandler(c,{control:_,url:a,viewContext:q}),void(l?((J||G)&&o?o.openExternalWebBrowser(a):s&&$Utility.navigateTo(a,s),$Utility.navigateTo(l)):$Utility.navigateTo(a));if(d)return Debug.trace("Trigger action ["+d+"]"),void O.triggerHandler(u,{actionName:d,control:_});var f=V,m=U,v=R,g=$,b=C(e),h=x(b,e);if(V=b,U=h,R=null,v&&(Debug.trace("Clearing action event for ["+g+"]"),v.off(m.events.action,H)),m&&m.prepareDispose&&m.prepareDispose(),$=e,n.clearBackStack&&E(),P(n,$),f&&j===f)i.exitContent(f,function(){if(f.hide(),m){m.hide&&m.hide(),Debug.trace("Clearing control hooked events ["+g+"]");var t=r(m);for(var i in h.events)t.off(i,F);t=null,m.dispose(),delete m}f.empty(),f.remove(),f=null,delete f,N(b,h,e,n,!0)});else{var y=!0;t&&W.animateInitial===!1&&(y=!1),N(b,h,e,n,y)}}else Debug.assert(Q[e],"Undefined state ["+e+"] -- re-enabling existing control"),$==e&&Debug.trace("Same state re-enabling the control ["+e+"]"),S(U,!0)}function D(e,t){return{controller:_,state:e.state,control:e.control,controlData:t,viewContext:q}}function F(e,t){var n=e.data;Debug.trace("FlowController.handleControlEvent ["+n.eventName+"] for ["+n.state+"]");var r=D(n,t);return O.triggerHandler(n.eventName+"$Control",r),!0}function H(e,t){var n=t.actionName,i=t.control,a=e.data,o=a.state,s=Q[o].actions,l=s[n];if(Debug.trace("FlowController.processActionEvent["+n+"] for ["+o+"]"),Debug.assert(o==$,"processAction state mismatch ev:["+o+"] act:["+$+"]"),o==$){var u=!1;if("backStack"==n){var d=T(o,l);d&&(l=d,u=!0)}l=k(n,o,l,i);var c=l;if(l&&r.isArray(l)&&(c=l[0]),Debug.trace("FlowController.processActionEvent newState ["+c+"]"),c){if(Q[c])return u&&M(c),S(i,!1),I(c,!1),!0;Debug.fail("Invalid State ["+c+"] from ["+o+"] action ["+n+"]")}}return I($,!1),!1}var _=this,O=_.$=r(_),L=!1,B=r(e),$=s,V=null,U=null,R=null,j=null,q=n,Q=y.viewDefs,W=y,z=y.callbacks||{},X=[],J=t.$Config.WLXAccount.isWin10,G=t.$Config.WLXAccount.isHolo;_.show=function(e){I(e,!0),O.triggerHandler(d,{control:_,viewContext:q})},_.setStateChangeFunc=function(e){z[h]=e},_.dispose=function(){if(!L){if($=s,U){if(null!=R){Debug.trace("Clearing control events ["+$+"]"),R.off(U.events.action,H);for(var e in U.events)R.off(e,F);R=null}U.dispose()}U=null,V&&V.empty(),V=null,O.triggerHandler(m,{control:_,viewContext:q}),L=!0,_.$=null}O=null,_=null,L=!0,B&&B.empty(),B=null,q=null,Q=null,W=null},w()}var t=window,n=t.wLive,r=t.jQuery,i=n.Account.AnimationHelper,a=n.Account.Controls,o=t.MSA&&t.MSA.CXH,s="none",l="onControlVisible",u="onAction",d="onShow",c="onNavigate",p="onStateChanging",f="onStateChanged",m="onDispose",v="setEnabled",g="validate",b="notifyVisible",h="validateStateChange";e.prototype.events={action:u,show:d,stateChanged:f,stateChanging:p,controlVisible:l,dispose:m},e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.FlowController=e}(),function(){function e(e,t,n){function r(){}var i=this,a=(i.$=jQuery(i),n),o=t,s=o.data,l=a.params;i.show=function(){for(var t=jQuery(a.viewTemplate).clone(),n=a.formId,r=jQuery("#"+n,t),i=0,o=l.length;o>i;i++){var u=l[i];jQuery("#"+u,r).val(s[u])}e.append(t),document.forms[n].submit()},r()}var t=window,n=t.wLive,r="onShow";e.prototype.events={show:r},e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.RedirectionControl=e}(),function(){function e(e,t,n){function a(){}function u(e){if(e&&x[e])return GetString("live.accounts.strings."+x[e]);var t=GetString(y+e);return t||(t=GetString("live.accounts.strings."+e)),t||(t=GetString("live.accounts.strings."+w)),t}function A(){return{control:I,viewContext:_,pollAttempts:z,numErrors:W}}function k(e){if(!F){J&&(clearTimeout(J),J=null);var t=(new Date).getTime();if(W>=O||t>X)Q&&Q.hideLoading(),D.triggerHandler(f,A());else if(e){var n=A();n.sendPollingRequest=!0,D.triggerHandler(d,n),n.sendPollingRequest&&(J=setTimeout(E,$))}else B?J=setTimeout(E,$):(Q&&Q.hideLoading(),D.triggerHandler(p,A()))}}function S(){if(!F){var e=0,t=0;null!=K&&(e=K.height(),t=K.width()),2==e?(Q&&Q.hideLoading(),1==t?D.triggerHandler(m,A()):D.triggerHandler(v,A())):(1!=t&&W++,k(!1)),null!=K&&(K.empty(),K.remove(),K=null)}}function N(){F||(W++,k(!1),null!=K&&(K.empty(),K.remove(),K=null))}function E(){if(!F){J=null;var e=(new Date).getTime();null!=K&&(K.empty(),K=null),K=i("<img />").attr({id:"iSessionPollingImg",style:"display: none"}),K.load(S),K.error(N);var t="?slk";V.indexOf("?")>-1&&(t="&slk="),K.attr("src",V+t+encodeURIComponent(G)+"&pa="+encodeURIComponent(e)),i("body").append(K),z++,D.triggerHandler(c,A())}}function P(e){F||(G=e.sessionLookupKey,_&&(_.sessionLookupKey=G),D.triggerHandler(g,A()),k(!0))}function M(e){if(!F){if(G=null,_&&delete _.sessionLookupKey,e.error&&e.error.code==C)return void D.triggerHandler(m,A());_.pollingError=errorMessage=u(String(e.error.code)),D.triggerHandler(b,A()),R&&k(!0)}}function T(){if(!F){var t=(new Date).getTime();if(X=t+L,W=0,z=0,j){var n=i(".loadingArea",e);0==n.length&&(n=i(".waitingArea",e)),Q=new l.LoadingIndicatorControl(n),Q.showLoading()}if(q){var a={channel:"PushNotifications",purpose:U},o=new r.DataRequest(null,s.sendOtt,a,P,M,1e4);o.start(e)}else k(!0)}}var I=this,D=I.$=i(I),F=!1,H=n,_=t||{},O=H.maxErrors||o.polling.maxErrors,L=H.timeout||o.polling.timeout,B=void 0!==o.polling.enabled?o.polling.enabled:!0,$=B?H.pollInterval||o.polling.interval:0,V=H.approvalUrl||o.url,U=H.ottPurpose||o.ottPurpose,R=void 0!==H.pollOnSendError?H.pollOnSendError:!0,j=void 0!==H.showLoading?H.showLoading:!0,q=void 0!==H.sendNotification?H.sendNotification:!0,Q=null,W=0,z=0,X=null,J=null,G=o.lookupKey,K=null;I.forcePollRequest=function(){k(!0)},I.show=function(){T()},I.dispose=function(){if(!F){if(D.triggerHandler(h,A()),J&&(clearTimeout(J),J=null),Q&&Q.dispose(),Q=null,null!=K&&(K.empty(),K.remove(),K=null),I&&I.$){for(var e in I.events)I.$.off(e);D=I.$=null}I=null,H=null,_=null,O=null,L=null,B=null,$=null,V=null,U=null,R=!1,j=!1,X=null,G=null,F=!0}},a()}var t=window,n=t.wLive,r=n.Core,i=t.jQuery,a=t.$Config.WLXAccount,o=a.sessionApproval,s=a.urls.dataRequest,l=n.Account.Controls,u="onShow",d="onStartPolling",c="onPolling",p="onPending",f="onTimeout",m="onApproved",v="onDenied",g="onSendSuccess",b="onSendError",h="onDisposing",y="live.accounts.strings.error_",w="pollingdefaulterror",C="1306",x={errorFieldRequired:"error_1018",errorEmailInvalidFormat:"error_1035",errorEmailIsMembername:"error_1267",errorEmailExists:"error_1287"};e.prototype.events={show:u,startPolling:d,polling:c,pending:p,timeout:f,approved:m,denied:v,sendSuccess:g,sendError:b,disposing:h},e.__class=!0,registerNamespace("wLive.Account.Controls"),n.Account.Controls.SessionPolling=e}(),function(){function e(e,t,n){if(e[t]){var r=e.__appendedFunctions=e.__appendedFunctions||{};if(r[t])r[t].push(n);else{{r[t]=[]}r[t].push(e[t]),r[t].push(n),e[t]=function(){for(var e=this.__appendedFunctions[t],n=0;n<e.length;n++)e[n].apply(this,arguments)}}}else e[t]=n}function t(n,r,i){for(var a in r)r.hasOwnProperty(a)&&("initialize"!==a&&"dispose"!==a||i?i&&n[a]?t(n[a],r[a],i):n[a]=r[a]:e(n,a,r[a]));return n}function n(e){var t={};for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];t[n]=r&&"[object Array]"===Object.prototype.toString.call(r)?r.slice(0):r}return t}var r=1;t(window,{getId:function(e){var t;return e?(e.__id||(e.__id=String(r++)),t=e.__id):t=String(r++),t},getKey:function(e){var t;return e&&(e.key||(e.key=getId(e)),t=e.key),t},defineNamespace:function(e,n,r,i){for(var a=e.split("."),o=r||window,s=0;s<a.length-1;s++)o=o[a[s]]=o[a[s]]||{};var l=a[a.length-1];return o[l]?t(o[l],n,i):o[l]=n,l},defineClass:function(e,n,r,i){var a=n.prototype,o=defineNamespace(e,n);if(a.__fullName=e,a.__className=o,r&&t(a,r),i&&t(n,i),arguments.length>4)for(var s=4;s<arguments.length;s++)t(a,arguments[s])},defineSubClass:function(e,r,i,a,o){var s=i||function(){};i=function(){r.apply(this,arguments),s.apply(this,arguments)};var l=i.prototype;if(t(l,r.prototype),l._base=r.prototype,l.__appendedFunctions&&(l.__appendedFunctions=n(l.__appendedFunctions)),defineClass(e,i,a,o),arguments.length>5)for(var u=5;u<arguments.length;u++)t(l,arguments[u])},appendFunction:e,mix:t,bind:function(e,t){return function(){return t.apply(e,arguments)}}})}(),function(){function e(e,t){if(e&&t){var r=n.Account.viewModelHandle;if(r&&r.validationOrder){var i=jQuery.inArray(e,r.validationOrder);if(r.validationOrder.length>i+1){var a=r.validationOrder[i+1];a&&a.focused&&(e.focused&&e.focused(!1),a.focused(!0))}}}}var t=window,n=t.wLive;registerNamespace("wLive.Account.Extensions.Utils"),n.Account.Extensions.Utils.setFocusOnObservable=e}(),function(){var e=window,t=e.jQuery,n=".placeholder";ko.bindingHandlers.autoSubmit={update:function(e,n){var r=n(),i=ko.unwrap(r);i&&(ko.isObservable(r)&&r(!1),t(e).submit())}},ko.bindingHandlers.errorMessage={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){{var a=null,o=t();ko.utils.unwrapObservable(o)}if(o.isValid()?o.isModified()||(a=o.serverError||null):a=o.error,ko.utils.setHtml(e,a),n.has("childBindings")){var s=n.get("childBindings")||{};for(var l in s){var u=document.getElementById(l);u&&u.setAttribute("data-bind",s[l])}ko.applyBindingsToDescendants(i,e)}}},ko.bindingHandlers.hasFocusSelect={init:function(e,t,n){ko.bindingHandlers.hasfocus.init(e,t,n)},update:function(e,n){ko.bindingHandlers.hasfocus.update(e,n);var r=n(),i=ko.utils.unwrapObservable(r);i&&t(e).select()}},ko.bindingHandlers.setFocus={update:function(e,n){var r=n(),i=ko.utils.unwrapObservable(r);i&&t(e).focus()}},ko.bindingHandlers.tooltip={init:function(e,n){if(!($B&&$B.IE&&$B.V&&$B.V<=8)){var r=n(),i=ko.utils.unwrapObservable(r),a=t(e),o=t(window),s=".tooltip";if(i&&i.target){var l=t(i.target);l&&l.length>0&&(a.on("blur"+s,function(){l.is(":focus")||l.tooltip("hide")}),a.on("focus"+s,function(){l.tooltip("show")})),o.on("resize",function(){a.is(":focus")&&(l.tooltip("hide"),l.tooltip("show"))})}else{a.on("show.bs.tooltip",function(){t(".tooltip").not(this).hide()});var u={};u.animation=!1,u.placement="right",$B&&!$B.ltr&&(u.placement="left"),u.container="#maincontent",u.viewport="#maincontent",i&&i.html&&(u.html=!0,u.delay={show:150,hide:100}),i&&i.setup?(u.trigger="manual",i.setup()):u.trigger="focus",i&&i.dynamic&&a.on("change"+s,function(){a.tooltip("hide"),a.tooltip("show")}),i&&i.hover&&(a.on("mouseover"+s,function(){a.tooltip("show")}),a.on("mouseout"+s,function(){a.tooltip("hide")})),i&&i.click&&(a.on("click"+s,function(){a.tooltip("show")}),a.on("focus"+s,function(){a.tooltip("show")}),a.on("blur"+s,function(){a.tooltip("hide")})),a.tooltip(u),o.on("resize",function(){a.is(":focus")&&(a.tooltip("hide"),a.tooltip("show"))})}ko.utils.domNodeDisposal.addDisposeCallback(e,function(){o.off("resize"),a.off(s),o=null,a=null})}}},ko.bindingHandlers.inputWithPlaceholder={init:function(e,r,i){ko.bindingHandlers.textInput.init(e,r,i);var a=".placeholder",o=t(e),s=o.next(n);s.on("click"+a,function(){setTimeout(function(){o.focus()},0)}),ko.utils.domNodeDisposal.addDisposeCallback(e,function(){o=null,s.off(a),s=null})},update:function(e,r,i){var a=ko.bindingHandlers.textInput.update;a&&a();var o=r(),s=ko.utils.unwrapObservable(o),l=t(e).next(n);l.length>0&&ko.bindingHandlers.visible.update(l[0],function(){var e=i.get("inlineLabelId");if(e){var n=t("#"+e);s?n.css("opacity",1):n.css("opacity",0)}return!s})}},ko.bindingHandlers.htmlWithBindings={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,i){ko.utils.setHtml(e,t());var a=n.get("childBindings");if(a)for(var o in a){var s=document.getElementById(o);s&&ko.applyBindingsToNode(s,a[o],i)}ko.applyBindingsToDescendants(i,e)}}}(),function(){function e(e,t){return!e||!Boolean(e.match(t))}function t(e,t,n){var r=!0;return a.each(t,function(t,i){return r=Boolean(e.match(i)),n?r:!r}),r}function n(e,t,n){return n&&(e=e.toLowerCase(),t=t.toLowerCase()),0===e.indexOf(t)}function r(e,t,n){return n&&(e=e.toLowerCase(),t=t.toLowerCase()),e.lastIndexOf(t)+t.length===e.length}var i=window,a=i.jQuery,o=i.wLive,s=o.Core,l=o.Account,u=i.$Config.WLXAccount,d=u.signup,c=s.DataRequest,p=l.FieldHelper,f=l.Extensions.Utils,m="newpwd";a.extend(ko.validation.rules,{birthdatePartRequired:{validator:function(e){var t="",n="",r="",i=e.split(":");return 3===i.length&&(t=i[0],n=i[1],r=i[2]),Boolean(t&&n&&r)},message:""},birthdateValid:{validator:function(e){var t=new Date,n="",r="",i="",a=e.split(":");3===a.length&&(n=a[0],r=a[1],i=a[2]);var o=parseInt(i,10),s=parseInt(r,10)-1,l=parseInt(n,10),u=new Date(o,s,l);return!(u>t||0/0===o||0/0===s||0/0===l||l!==u.getDate()||s!==u.getMonth()||o!==u.getFullYear())},message:""},pwdContainsMemberName:{validator:function(e){var t=d.viewContext&&d.viewContext.data&&d.viewContext.data.input?d.viewContext.data.input.memberNameInput:"";return e&&t&&0!==t.length?-1===e.toLowerCase().indexOf(t.toLowerCase().split("@")[0]):!0},message:""},pwdComplexity:{validator:function(e){for(var t=[/[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+/,/[\x30-\x39]+/,/[\x41-\x5A]+/,/[\x61-\x7A]+/],n=2,r=0,i=0,a=t.length;a>i;i++)if(e.match(t[i])&&r++,r>=n)return!0;return!1},message:""},strongPwdComplexity:{validator:function(e){for(var t=[/[\x21-\x2F\x3A-\x40\x5B-\x60\x7B-\x7E]+/,/[\x30-\x39]+/,/[\x41-\x5A]+/,/[\x61-\x7A]+/],n=3,r=0,i=0,a=t.length;a>i;i++)if(e.match(t[i])&&r++,r>=n)return!0;return!1},message:""},notMatchingPattern:{validator:function(t,n){return e(t,n)},message:""},allPatterns:{validator:function(e,n){return t(e,n,!0)},message:""},onePattern:{validator:function(e,n){return t(e,n,!1)},message:""},userNamePattern:{validator:function(e,n){if(!e||0===e.length||-1===e.indexOf("@"))return!1;var r=e.split("@");return 2!==r.length?!1:t(r[0],n,!1)}},userNameRequired:{validator:function(e){if(!e||0===e.length||-1===e.indexOf("@"))return!1;var t=e.split("@");return 2!==t.length?!1:t[0].trim().length>0}},liveMemberNameValid:{validator:function(e,n){var r=n.domains,i=n.patterns;return r&&0!==r.length&&p.getMemberNameType(e,r)===p.memberNameTypes.Live?t(e.split("@")[0],i,!0):!0}},proofClearPortionMatchEmail:{validator:function(e,i){if(e){var a=n(e,i.clearPortion(),!0),o=i.domainPortion(),s=i.patterns,l=i.allowZero;return l&&"0"===String(e)?!0:e.indexOf("@")>=0?a&&r(e,o,!0)&&t(e,s,!0):a&&t(e+o,s,!0)}return!1}},proofClearPortionMatchPhone:{validator:function(e,t){return t.allowZero&&"0"===String(e)?!0:Boolean(e&&e.length===t.matchDigits&&e.match(/^\d+$/)&&r(e,t.clearPortion(),!0))}},memberNameValidForFl:{validator:function(e,t){var n=t.fl,r=p.getMemberNameType(e,t.domains);return"EASI"===n&&r!==p.memberNameTypes.EASI?!1:"Live"===n&&r!==p.memberNameTypes.Live?!1:"Phone"===n&&r!==p.memberNameTypes.Phone?!1:!0}},hipValidation:{validator:function(e){var t=i.HIPAMFE;return t&&t.done?(a("#hipContent .hiddenHipInputText").val(e),o.Account&&o.Account.viewModelHandle&&o.Account.viewModelHandle.hip&&o.Account.viewModelHandle.hip.serverError&&""===o.Account.viewModelHandle.hip()?(this.message=o.Account.viewModelHandle.hip.serverError,!1):(t.clientValidation(),t.setError(),this.message=t.getError(),""===t.getError())):!0
}},bannedPwd:{async:!0,validator:function(e,t,n){var r={uaid:i.$Config.uaid};r.cipherValue=Encrypt("","",m,e),r.ski=t.ski;var a=new c(null,t.url,r,function(e){n(!e.isBanned),f.setFocusOnObservable(t.observable,!e.isBanned)},function(){n(!0),f.setFocusOnObservable(t.observable,!0)});a.start()},message:""},checkAvailable:{async:!0,validator:function(e,t,n){var r=t.dft,a={signInName:e,uaid:i.$Config.uaid};r&&(a.dft=r),void 0!==t.includeSuggestions&&(a.includeSuggestions=t.includeSuggestions);var o="Account_CheckAvailPage",s=new c(null,t.url,a,function(r){try{var a={},s=i.performance&&i.performance.now?i.performance.now():(new Date).getTime();a.pageId=o,a.duration=Math.round(s-checkAvailableNamesApiStartTime),a.skipClientCall=!0,$ReportEvent.Action(a)}catch(l){}var u=!r||r.isAvailable,c=r&&r.type,p=t.getResult&&t.getResult(0,e,u,c);t.getSuggestedMemberNames&&t.getSuggestedMemberNames(r&&r.suggestions||[]),t.setSuccessMessage&&u&&t.setSuccessMessage(c,e),d.viewContext&&d.viewContext.data&&d.viewContext.data.reporting&&(d.viewContext.data.reporting.memberNameChangeCount++,u?d.viewContext.data.reporting.memberNameAvailableCount++:d.viewContext.data.reporting.memberNameUnavailableCount++),n(p?p:u),f.setFocusOnObservable(t.observable,u&&1===$B.IE)},function(r){var a=r&&r.error;try{var s={},l=i.performance&&i.performance.now?i.performance.now():(new Date).getTime();s.pageId=o,s.duration=Math.round(l-checkAvailableNamesApiStartTime),s.errorCode=a?r.error.code:"",s.skipClientCall=!0,$ReportEvent.Action(s)}catch(u){}var c=t.getResult&&t.getResult(a&&r.error.code,e);t.getSuggestedMemberNames&&t.getSuggestedMemberNames(r&&r.suggestions||[]),d.viewContext&&d.viewContext.data&&d.viewContext.data.reporting&&(d.viewContext.data.reporting.memberNameChangeCount++,d.viewContext.data.reporting.memberNameUnavailableCount++),n(c?c:!1),f.setFocusOnObservable(t.observable,!0)});checkAvailableNamesApiStartTime=i.performance&&i.performance.now?i.performance.now():(new Date).getTime(),s.start()},message:""},getPhoneDetails:{async:!0,validator:function(e,t,n){function r(e){if(!e.phoneDetails||e.phoneDetails.length<=0)n(!1);else{var r=e.phoneDetails[0];t.phoneDetails&&t.phoneDetails(r),n(r.IsValid===!0)}}function a(e){t.onError&&t.onError(e),n(!1)}var o={phone:[].concat(e),uaid:i.$Config.uaid};t.country&&(o.country=[].concat(t.country()));var s=new c(null,t.url,o,r,a);s.start()}}}),ko.validation.registerExtenders()}();var KnockoutExtensions;!function(){var e=window,t=e.jQuery;ko.subscribable.fn.whenAttainsValue=function(e){var n=this,r=t.Deferred();if(!ko.isObservable(n)&&!ko.isComputed(n)||e!==n())var i=n.subscribe(function(t){t===e&&(i.dispose(),r.resolve())});else r.resolve();return r.promise()},ko.subscribable.fn.validation=function(){return this.isValidating.whenAttainsValue(!1)}}(KnockoutExtensions||(KnockoutExtensions={})),JSMPnumber.prototype={size:1,data:[0]},!function(){registerNamespace("$Config.WLXAccount.signup"),$Config.WLXAccount.signup.errorCodes={hipValidationError:"1043",hipNeeded:"1040",hipSMSNeeded:"1042",dailyLimitIDsReached:"450",oneTimeCodeInvalid:"1304",verificationSltInvalid:"1324",membernameTaken:"1058",domainNotAllowed:"1117",domainIsReserved:"1181",forbiddenWord:"403",passwordIncorrect:"1002",passwordConflict:"1009",invalidEmailFormat:"1062",invalidPhoneFormat:"1063",invalidBirthDate:"1039",invalidGender:"1243",invalidFirstName:"1240",invalidLastName:"1241",maximumOTTDailyError:"1204",bannedPassword:"1217",proofAlreadyExistsError:"1246",domainExistsInAad:"1184",domainExistsInAadSupportedLogin:"1185",membernameTakenEasi:"1242",membernameTakenPhone:"1052",signupBlocked:"1220",invalidMemberNameFormat:"1064",passwordRequired:"1330"}}(),!function(){registerNamespace("$Config.WLXAccount.signup"),$Config.WLXAccount.signup.regularexpressions={LiveMembernameRegex:"^(?:(?:[a-zA-Z])|(?:[\\w\\-](?:(?![\\.]{2,})[\\w\\.\\-]){0,62}[\\w\\-]))$",MembernameRegex:"^[a-zA-Z0-9_-]+(?:\\.[a-zA-Z0-9_-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$",PwdValidInput:"^[\\x20-\\x7e]{8,127}$",AltEmailRegEx:"^[a-zA-Z0-9!#$%\\x26'*+/=?^_`{|}~-]+(?:\\.[a-zA-Z0-9!#$%\\x26'*+/=?^_`{|}~-]+)*@(?:[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9-]*[a-zA-Z0-9])?$",PhoneNumberFormat:"^[\\+]{0,1}([\\(\\)\\- \\*\\.#/\\[\\]]*\\d[\\(\\)\\- \\*\\.#/\\[\\]]*){4,20}$",ProfileRegex:"([\\x00-\\x1f]|[\\x21-\\x26]|[\\x28-\\x2c]|\\x2f|[\\x3a-\\x40]|[\\x5b-\\x5e]|\\x60|[\\x7b-\\x7f]|\\x81|\\xa0|\\xad)"}}(),function(){registerNamespace("$Config.WLXAccount.signup"),$Config.WLXAccount.signup.urls={error:"error.aspx?errcode=",queryUrl:"query.aspx",dataRequest:{createAccount:"API/CreateAccount",bannedPwd:"API/CheckIfBannedPassword",checkAvailable:"API/CheckAvailableSigninNames",getPhoneNumberDetails:"API/GetPhoneNumberDetails",sendOtt:"API/Proofs/SendOtt",createAndUpdateFamily:"API/CreateAndUpdateFamily",addPendingMember:"API/AddPendingMemberToFamily"}},$Config.WLXAccount.signup.regex={verificationCode:"^\\d{4}$",verificationCodeInt:"^0$|^\\d{4}$"},$Config.WLXAccount.signup.signupObservableSets={firstName:{name:"firstName"},lastName:{name:"lastName"},memberName:{name:"memberName",clientPrefillKey:"PfUsernames"},password:{name:"password"},retypePassword:{name:"retypePassword"},country:{name:"country"},birthdate:{name:"birthdate"},birthdateHTML5:{name:"birthdateHTML5"},postalCode:{name:"postalCode"},gender:{name:"gender"},phoneCountry:{name:"phoneCountry"},phoneNumber:{name:"phoneNumber"},alternateEmail:{name:"alternateEmail"},hip:{name:"hip"},verification:{name:"verification"},additionalLegalText:{name:"additionalLegalText"}}}(),!function(){var e="credentials",t="cancel",n="action",r="create",i="finalBack";registerNamespace("$Config.WLXAccount.signup");var a=$Config.WLXAccount.signup,o=a.page,s=0!==o.collectDob,l=0!==o.collectFLName;a.startState=e,a.options={states:[e,"privacy","tou","dataCollection","dataUse","retention","hip","blocked","verification","profileAccrual","birthDateCountryAccrual","impressum"],viewDefs:{credentials:{pageId:"Signup_MemberNamePage_Client",sectionId:"Credentials",control:l||s?"SignupControl":"SignupCreateControl",options:{viewModel:"SignupViewModel",viewModelOptions:{observables:["memberName","password","additionalLegalText"]},focusFirstInput:0,optInEmailId:"iOptinEmail",pageBackAction:t,pageNextAction:n},actions:{cancel:i,privacy:"privacy",tou:"tou",dataCollection:"dataCollection",dataUse:"dataUse",retention:"retention",hip:"hip",blocked:"blocked",impressum:"impressum",action:l?"profileAccrual":s?"birthDateCountryAccrual":r,verification:"verification"}},privacy:{pageId:"Signup_PrivacyPage_Client",sectionId:"TOUPrivacy",control:"TouPrivacyControl",options:{viewModel:"SignupViewModel",isPrivacy:1,pageBackAction:t,pageNextAction:n},actions:{action:e,cancel:e}},tou:{pageId:"Signup_TouPage_Client",sectionId:"TOUPrivacy",control:"TouPrivacyControl",options:{viewModel:"SignupViewModel",isPrivacy:0,pageBackAction:t,pageNextAction:n},actions:{action:e,cancel:e}},impressum:{pageId:"Signup_ImpressumPage_Client",sectionId:"Impressum",control:"SignupControl",options:{viewModel:"SignupViewModel",pageBackAction:t,pageNextAction:n},actions:{action:e,cancel:e}},dataCollection:{pageId:"Signup_DataCollectionPage_Client",sectionId:"DataCollection",control:"PageDialogControl",options:{viewModel:"SignupViewModel",pageBackAction:t,pageNextAction:n},actions:{action:e,cancel:e}},dataUse:{pageId:"Signup_DataUsePage_Client",sectionId:"DataUse",control:"PageDialogControl",options:{viewModel:"SignupViewModel",pageBackAction:t,pageNextAction:n},actions:{action:e,cancel:e}},retention:{pageId:"Signup_DataRetentionPage_Client",sectionId:"Retention",control:"PageDialogControl",options:{viewModel:"SignupViewModel",pageBackAction:t,pageNextAction:n},actions:{action:e,cancel:e}},hip:{pageId:"Signup_HipPage_Client",sectionId:"HipPane",control:"SignupCreateControl",options:{viewModel:"SignupViewModel",viewModelOptions:{observables:["hip"]},focusFirstInput:0,pageBackAction:t,pageNextAction:n},actions:{action:r,cancel:e,blocked:"blocked",credentials:e,verification:"verification"}},blocked:{pageId:"Signup_BlockedPage_Client",sectionId:"Blocked",control:"PageDialogControl",options:{pageBackAction:t,pageNextAction:n},actions:{action:i,cancel:i}},verification:{pageId:"Signup_VerificationPage_Client",sectionId:"Verification",control:"SignupCreateControl",options:{viewModel:"SignupViewModel",viewModelOptions:{observables:["verification"]},pageBackAction:t,pageNextAction:n},actions:{action:r,hip:"hip",cancel:s?"birthDateCountryAccrual":l?"profileAccrual":e,credentials:e}},profileAccrual:{pageId:"Signup_ProfileAccrualPage_Client",userAction:"Action_ClientSideTelemetry",sectionId:"ProfileAccrual",control:s?"SignupControl":"SignupCreateControl",options:{viewModel:"SignupViewModel",viewModelOptions:{observables:["firstName","lastName"]},focusFirstInput:0,pageBackAction:t,pageNextAction:n},actions:{cancel:e,action:s?"birthDateCountryAccrual":r,credentials:e,verification:"verification",hip:"hip"}},birthDateCountryAccrual:{pageId:"Signup_BirthdatePage_Client",userAction:"Action_ClientSideTelemetry",sectionId:"BirthDateCountryAccrual",control:"SignupCreateControl",options:{viewModel:"SignupViewModel",viewModelOptions:{observables:s?["country","birthdate"]:[]},focusFirstInput:0,pageBackAction:t,pageNextAction:n},actions:{cancel:l?"profileAccrual":e,action:r,credentials:e,verification:"verification",hip:"hip"}},finalBack:{}}}}(),function(){defineNamespace("wLive.Account.SignupTemplates",{maincontent:'<section><div class="container" id="pageContent"><div id="pageControlHost"></div></div></section><div class="hide" id="hipScript"></div><div class="hide" id="hipContent"></div><div class="hide" id="hipTemplate"></div>',dynamiccontent:'<div id="signupTemplates"><div id="Credentials"><div class="container" id="CredentialsInputPane" data-bind="visible: !showSuggestions()"><!-- ko if: config.appCentipedeHtml --><div class="row" data-bind="html: config.appCentipedeHtml"></div><!-- /ko --><div class="row text-subheader" role="heading" data-bind="visible: config.showTitle !== 0, text: strings.pageTitle"></div><div class="row text-body" data-bind="visible: config.showDesc !== 0, text: strings.pageDescription"></div><fieldset data-bind="attr: { \'disabled\': memberName.isValidating() && $B.IE === 1 }"><div class="row"><div class="alert alert-error col-md-24" id="MemberNameError" data-bind="errorMessage: memberName, visible: showError(memberName)" role="alert" aria-live="assertive" aria-relevant="text" aria-atomic="true"></div><!-- ko if: config.supportsPhone !== 0 --><div class="alert col-md-24 left" data-bind="visible: showError(memberName) || memberNameExistsMessage(), text: memberNameExistsMessage" role="alert" aria-live="assertive" aria-relevant="text" aria-atomic="true"></div><!-- /ko --><div data-bind="css: { \'form-group\': memberNameType() !== \'Phone\' }"><label class="text-base" for="MemberName" data-bind="visible: !isPlaceholderSupported() && memberNameType() === \'Live\', text: strings.lblEmail"></label><label class="text-base" for="MemberName" data-bind="visible: !isPlaceholderSupported() && memberNameType() === \'EASI\', text: strings.lblEmail"></label><!-- ko if: config.supportsPhone !== 0 --><label class="text-base col-md-24 label-margin" for="MemberName" data-bind="visible: !isPlaceholderSupported() && memberNameType() === \'Phone\', text: strings.usernamePlaceholderPhone"></label><div class="col-md-24 form-group" data-bind="visible: memberNameType() === \'Phone\'"><select class="form-control" id="PhoneCountry" name="PhoneCountry" data-bind="options: memberNamePhoneCountries, optionsValue: \'iso\', optionsText: \'displayValue\', value: memberNamePhoneCountry, attr: {\'aria-label\': strings.ariaLblCountryDropdown}"></select></div><!-- /ko --><div class="form-group col-md-24"><div class="ltr_override" data-bind="css: { \'input-group\': memberNameType() === \'Live\' || (memberNamePrefill() && memberNamePrefill().length > 1) }"><input class="form-control ltr_override" id="MemberName" name="MemberName" autocomplete="off" data-bind="css: { \'has-error\': showError(memberName), \'noRightBorder\': memberNameType() === \'Live\' }, value: memberNameInput, hasFocus: memberName.focused, attr: { placeholder: placeholder, \'aria-label\': memberNameAriaLabel, type: memberNameInputType(), readonly: $B.Edge && memberName.isValidating() }, disable: !$B.Edge && memberName.isValidating()"><label class="input-group-addon noLeftBorder" data-bind="css: { \'focus-border-color\': memberName.focused, \'readonly-border-color\': $B.Edge && memberName.isValidating(), \'has-error\': showError(memberName) }, text: \'@\' + domain(), visible: memberNameType() === \'Live\'"></label><div class="input-group-btn" data-bind="css: { \'focus-border-color\': memberName.focused, \'has-error\': showError(memberName)}, visible: memberNameType() !== \'Live\' && memberNamePrefill() && memberNamePrefill().length > 1"><button class="btn dropdown-toggle" type="button" id="memberNameLabel" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="caret"></span></button><ul id="MemberNamePrefill" class="dropdown-menu pull-right" role="menu" aria-labelledby="memberNameLabel" data-bind="foreach: memberNamePrefill"><!-- ko if: $parent.config.supportsPhone !== 0 --><!-- ko if: $parent.memberNameType() === "Phone" --><li role="presentation"><a role="menuitem" tabindex="-1" href="#" data-bind="text: formattedPhoneNumber, click: $parent.prefillSelected"></a></li><!-- /ko --><!-- /ko --><!-- ko if: $parent.memberNameType() === "EASI" --><li role="presentation"><a role="menuitem" tabindex="-1" href="#" data-bind="text: $data.email, click: $parent.prefillSelected"></a></li><!-- /ko --></ul></div></div></div></div></div><!-- ko ifnot: config.pwdless !== 0 && memberNameType() === "Phone" --><div class="row"><div class="form-group col-md-24"><label class="text-base" for="Password" data-bind="visible: !isPlaceholderSupported(), text: strings.lblPwd"></label><div id="PasswordError" class="alert alert-error" data-bind="errorMessage: password, visible: showError(password)" role="alert" aria-live="assertive" aria-relevant="text" aria-atomic="true"></div><input class="form-control" type="password" id="Password" name="Password" data-bind="css: {\'has-error\': showError(password)}, value: password, hasFocus: password.focused, attr: { \'placeholder\': strings.ariaLblPassword, \'aria-label\': strings.ariaLblPassword }"></div></div><!-- /ko --><!-- ko if: config.showOptinEmail !== 0 --><div class="row" data-bind="visible: memberNameType() !== \'Phone\'"><div class="col-md-24 form-group checkbox"><label><input type="checkbox" id="iOptinEmail" data-bind="checked: config.checkOptinEmail !== 0"> <span data-bind="html: strings.emailOptInDescription"></span></label></div></div><!-- /ko --><!-- ko if: config.showSwitch !== 0 --><div class="row"><div class="col-md-24"><!-- ko if: config.supportsPhone !== 0 --><div class="form-group"><a id="phoneSwitch" href="#" onclick="return false;" data-bind="text: strings.phoneSwitch, visible: memberNameType() !== \'Phone\', hasFocus: phoneSwitchFocused, click: function () { switchMemberNameType(\'Phone\', true); }"></a></div><!-- /ko --><div class="form-group"><a id="easiSwitch" href="#" onclick="return false;" data-bind="text: strings.easiSwitch, visible: memberNameType() !== \'EASI\', hasFocus: easiSwitchFocused, click: function () { switchMemberNameType(\'EASI\', true); }"></a></div><div class="form-group"><a id="liveSwitch" href="#" onclick="return false;" data-bind="text: strings.liveSwitch, visible: memberNameType() === \'EASI\', hasFocus: liveSwitchFocused, click: function () { switchMemberNameType(\'Live\', true); }"></a></div></div></div><!-- /ko --></fieldset></div><div id="CredentialsSuggestionsPane" data-bind="visible: showSuggestions()"><!-- ko if: config.appCentipedeHtml --><div class="row" data-bind="html: config.appCentipedeHtml"></div><!-- /ko --><div class="row text-subheader" role="heading" data-bind="text: strings.suggPageTitle"></div><div id="Suggestions" data-bind="foreach: memberNameSuggestions"><div><a href="#" onclick="return false;" data-bind="text: $data, click: $parent.onPickSuggestion"></a></div></div><div class="row text-body"><input type="button" id="iSuggCancel" onclick="return false;" class="btn btn-block" data-bind="value: strings.backButton, click: onSuggestionsClose, attr: { \'title\': strings.backButton }"></div></div></div><!-- ko if: config.collectFLName !== 0 --><div id="ProfileAccrual"><div class="container" id="ProfileAccrualInputPane"><!-- ko if: config.appCentipedeHtml --><div class="row" data-bind="html: config.appCentipedeHtml"></div><!-- /ko --><div id="iPageTitle" class="row text-subheader" role="heading" data-bind="text: strings.profileAccrualPageTitle"></div><div class="row text-body" data-bind="visible: config.showProfileDesc !== 0, text: strings.profileAccrualPageDescription"></div><div class="row"><!-- ko if: config.isFLOrder !== 0 --><div class="form-group col-md-24"><label class="text-base" for="FirstName" data-bind="visible: !isPlaceholderSupported(), text: strings.lblFirstName"></label><div class="alert alert-error" data-bind="errorMessage: firstName, visible: showError(firstName)" role="alert" aria-live="assertive" aria-relevant="text" aria-atomic="true"></div><input type="text" id="FirstName" class="form-control" name="FirstName" data-bind="value: firstName, css: { \'has-error\': showError(firstName) }, hasFocus: firstName.focused, attr: { \'placeholder\': strings.lblFirstName }"></div><div class="form-group col-md-24"><label class="text-base" for="LastName" data-bind="visible: !isPlaceholderSupported(), text: strings.lblLastName"></label><div class="alert alert-error" data-bind="errorMessage: lastName, visible: showError(lastName)" role="alert" aria-live="assertive" aria-relevant="text" aria-atomic="true"></div><input type="text" id="LastName" class="form-control" name="LastName" data-bind="value: lastName, hasFocus: lastName.focused, css: { \'has-error\': showError(lastName) }, attr: { \'placeholder\': strings.lblLastName }"></div><!-- /ko --><!-- ko ifnot: config.isFLOrder !== 0 --><div class="form-group col-md-24"><label class="text-base" for="LastName" data-bind="visible: !isPlaceholderSupported(), text: strings.lblLastName"></label><div class="alert alert-error" data-bind="errorMessage: lastName, visible: showError(lastName)" role="alert" aria-live="assertive" aria-relevant="text" aria-atomic="true"></div><input type="text" id="LastName" class="form-control" name="LastName" data-bind="value: lastName, hasFocus: lastName.focused, css: { \'has-error\': showError(lastName) }, attr: { \'placeholder\': strings.lblLastName }"></div><div class="form-group col-md-24"><label class="text-base" for="FirstName" data-bind="visible: !isPlaceholderSupported(), text: strings.lblFirstName"></label><div class="alert alert-error" data-bind="errorMessage: firstName, visible: showError(firstName)" role="alert" aria-live="assertive" aria-relevant="text" aria-atomic="true"></div><input type="text" id="FirstName" class="form-control" name="FirstName" data-bind="value: firstName, css: { \'has-error\': showError(firstName) }, hasFocus: firstName.focused, attr: { \'placeholder\': strings.lblFirstName }"></div><!-- /ko --></div></div></div><!-- /ko --><!-- ko if: config.collectDob !== 0 --><div id="BirthDateCountryAccrual"><div class="container" id="BirthDateCountryAccrualInputPane"><!-- ko if: config.appCentipedeHtml --><div class="row" data-bind="html: config.appCentipedeHtml"></div><!-- /ko --><div id="iPageTitle" class="row text-subheader" role="heading" data-bind="text: strings.birthdatePageTitle || strings.profileAccrualPageTitle"></div><div class="row text-body" data-bind="visible: config.showBirthdateDesc !== 0, text: strings.birthdatePageDescription || strings.profileAccrualPageDescription"></div><div class="row"><div class="form-group col-md-24 left"><label class="text-base" for="Country" data-bind="text: strings.lblCountryRegion"></label><select id="Country" class="form-control" name="Country" data-bind="options: countries, optionsValue: \'iso\', optionsText: \'name\', value: country"></select></div></div><div class="row" data-bind="visible: showBirthDate"><div class="col-md-24 left"><label class="text-base label-margin" data-bind="text: strings.lblBirthdate, attr: { \'for\': config.datePartString0 }"></label></div><div class="alert alert-error col-md-24" data-bind="errorMessage: birthdate, visible: showError(birthdate)" role="alert" aria-live="assertive" aria-relevant="text" aria-atomic="true"></div><div class="col-xs-8 form-group" data-bind="attr: { \'id\': config.datePartString0 + \'Container\' }"><select class="datepart0 form-control" role="listbox" aria-labelledby="BirthDateLabel" data-bind="html: config.datePartDropDown0, value: birthdateParts[0], hasFocus: birthdate.focused, attr: { \'id\': config.datePartString0, \'name\': config.datePartString0 }"></select></div><div class="col-xs-8 form-group" data-bind="attr: { \'id\': config.datePartString1 + \'Container\' }"><select class="datepart1 form-control" role="listbox" aria-labelledby="BirthDateLabel" data-bind="html: config.datePartDropDown1, value: birthdateParts[1], attr: { \'id\': config.datePartString1, \'name\': config.datePartString1 }"></select></div><div class="col-xs-8 form-group" data-bind="attr: { \'id\': config.datePartString2 + \'Container\' }"><select class="datepart2 form-control" role="listbox" aria-labelledby="BirthDateLabel" data-bind="html: config.datePartDropDown2, value: birthdateParts[2], attr: { \'id\': config.datePartString2, \'name\': config.datePartString2 }"></select></div></div></div></div><!-- /ko --><div id="Verification"><div class="container" id="AutoVerification" data-bind="visible: showAutoVerificationUI()"><div class="row"><div class="col-md-24 text-subheader" role="heading" data-bind="text: strings.autoVerifyPageTitle"></div></div><div class="row"><div class="col-md-24" data-bind="text: strings.autoVerifyPageDescription"></div></div><!-- ko if: config.showProgress !== 0 --><div class="row"><h2 class="col-md-24"><img data-bind="attr: { \'alt\': strings.sendingOTT, \'src\': $Utility.generateUrl(config.imgs.baseUrl, config.imgs.progressIndicator, false) }"></h2></div><!-- /ko --></div><div class="container" data-bind="visible: !showAutoVerificationUI()"><!-- ko if: config.appCentipedeHtml --><div class="row" data-bind="html: config.appCentipedeHtml"></div><!-- /ko --><div class="row text-subheader" role="heading" data-bind="text: strings.lblVerificationCode"></div><div class="row"><div class="col-md-24 form-group"><div id="resendCodeText" class="text-caption" data-bind="visible: false, html: strings.resendCodeText"></div><label data-bind="text: verificationSubTitle"></label><div class="alert alert-error" data-bind="errorMessage: verification, visible: showError(verification)" role="alert" aria-live="assertive" aria-relevant="text" aria-atomic="true"></div><input type="tel" class="form-control" id="VerificationCode" name="VerificationCode" autocomplete="off" data-bind="attr: { \'placeholder\': strings.lblVerificationCode }, value: verification, css: { \'has-error\': showError(verification) }"></div></div></div></div><div id="HipPane"><!-- ko if: config.appCentipedeHtml --><div class="row" data-bind="html: config.appCentipedeHtml"></div><!-- /ko --><div class="row"><div class="col-md-24 text-subheader forSmsHip hide" role="heading" data-bind="text: strings.hipHeading"></div><div class="col-md-24 text-subheader forVisualHip hide" role="heading" data-bind="text: strings.hipPageTitle"></div></div><div class="row" id="hipDesc"><div class="col-md-24 forSmsHip hide" data-bind="text: strings.hipPageDescription"></div><div class="col-md-24 text-body forSmsHip hide" data-bind="text: strings.hipPageDescription1"></div><div class="col-md-24 forVisualHip hide" data-bind="text: strings.hipVisualDescription"></div></div><div class="row" id="hipTemplateContainer"></div></div><div id="TOUPrivacy"><input type="button" onclick="OnBack();" class="btn btn-block hidden" id="touBackBtn" data-bind="value: strings.backButton, attr: { \'title\': strings.backButton }"><pre style="white-space: pre-wrap"></pre></div><div id="DataCollection" data-bind="html: config.dataCollectionHtml"></div><div id="DataUse" data-bind="html: config.dataUseHtml"></div><div id="Retention" data-bind="html: config.RetentionHtml"></div><div id="Impressum"><div class="col-md-24 text-body" data-bind="text: strings.impressumDesc || \'\'"></div></div><div id="Blocked"><!-- ko if: config.appCentipedeHtml --><div class="row" data-bind="html: config.appCentipedeHtml"></div><!-- /ko --><div class="row text-subheader"><div class="col-md-24" role="heading" data-bind="text: strings.accountProduct"></div></div><div class="row form-group text-title"><div class="col-md-24" data-bind="text: strings.throttled"></div></div></div></div>',pageContent:'<div id="ftr" class="hide text-body"><div id="ftrText" class="text-caption" data-bind="visible: text.visible, html: strings.touPrivacyText"></div><!-- ko if: config.showButtons !== 0 --><div id="ftrButton" class="row" data-bind="visible: buttons.visible, css: {\'skypeIconBtn\': config.useSkypeIcon !== 0}"><div class="col-xs-24" data-bind="visible: buttons.consentCreateButton.visible()"><!-- ko if: config.useSkypeIcon !== 0 --> <button type="submit" id="iConsentAction" onclick="OnNext();"><span></span></button><!-- /ko --><!-- ko ifnot: config.useSkypeIcon !== 0 --> <input type="submit" id="iConsentAction" onclick="OnNext();" class="btn btn-block btn-primary" data-bind="attr: { disabled: buttons.nextButton.disabled() }, visible: buttons.nextButton.visible(), value: strings.createBtnText"><!-- /ko --></div><div data-bind="css: { \'col-xs-12\': buttons.nextButton.visible() && !buttons.consentCreateButton.visible(), \'col-xs-24\': !buttons.nextButton.visible() || buttons.consentCreateButton.visible() }, visible: buttons.backButton.visible()"><!-- ko if: config.useSkypeIcon !== 0 --> <button type="button" id="iSignupCancel" onclick="OnBack();"><span></span></button><!-- /ko --><!-- ko ifnot: config.useSkypeIcon !== 0 --> <input type="button" id="iSignupCancel" onclick="OnBack();" class="btn btn-block" data-bind="attr: { disabled: buttons.backButton.disabled() }, visible: buttons.backButton.visible(), value: strings.backButton"><!-- /ko --></div><div data-bind="css: { \'col-xs-12\': buttons.backButton.visible(), \'col-xs-24\': !buttons.backButton.visible() }, visible: buttons.nextButton.visible() && !buttons.consentCreateButton.visible()"><!-- ko if: config.useSkypeIcon !== 0 --> <button type="submit" id="iSignupAction" onclick="OnNext();"><span></span></button><!-- /ko --><!-- ko ifnot: config.useSkypeIcon !== 0 --> <input type="submit" id="iSignupAction" onclick="OnNext();" class="btn btn-block btn-primary" data-bind="attr: { disabled: buttons.nextButton.disabled() }, visible: buttons.nextButton.visible(), value: strings.nextButton"><!-- /ko --></div></div><div id="ftrLegalText" class="text-caption" data-bind="visible: text.visible, html: additionalLegalText"></div><!-- /ko --><div data-bind="visible: config.impressumUrl && text.visible"><a id="impressumLink" data-bind="attr: { href: config.impressumUrl, title: strings.impressumText }, text: strings.impressumText"></a></div><div id="ftrLogo" class="text-base text-secondary"></div></div>'})}(),function(){var e=window,t=e.wLive,n=t.Core.DataRequest,r=e.jQuery,i=t.Account,a=i.Extensions.Utils,o=i.FieldHelper,s=e.ExternalHelper,l=e.MSA&&e.MSA.CXH,u=e.$Config.WLXAccount,d=(u.hip,u.signup),c=d.memberNameType,p=d.page,f={},m={},v={},g={},b={},h=d.signupObservableSets,y=u.isWin10,w=u.isWin10InclusiveOOBE,C="onAction",x="credentials";defineNamespace("wLive.Account.SignupObservableFactory",{createObservableSetByPrefillName:function(e,n,r){var i=t.Account.SignupObservableFactory;switch(v=d.strings,g=v.errors,m=d.urls.dataRequest,b=d.errorCodes,f=d.regex,e){case h.firstName.name:return i.createFirstNameObservableSet(n,r);case h.lastName.name:return i.createLastNameObservableSet(n,r);case h.memberName.name:return i.createMemberNameObservableSet(n,r);case h.password.name:return i.createPasswordObservableSet(n,r);case h.country.name:return i.createCountryObservableSet(n,r);case h.birthdate.name:return i.createBirthdateObservableSet(n,r);case h.birthdateHTML5.name:return i.createBirthdateHTML5ObservableSet(n,r);case h.gender.name:return i.createGenderObservableSet(n,r);case h.phoneCountry.name:return i.createPhoneCountryObservableSet(n,r);case h.phoneNumber.name:return i.createPhoneNumberObservableSet(n,r);case h.alternateEmail.name:return i.createAlternateEmailObservableSet(n,r);case h.hip.name:return i.createHipObservableSet(n,r);case h.verification.name:return i.createVerificationObservableSet(n,r);case h.additionalLegalText.name:return i.createAdditionalLegalTextObservableSet(n,r);default:return null}},createFirstNameObservableSet:function(e,t){var n={};!e&&s&&(e=s.getProperty("PfFirstName")),n.firstName=ko.observable(e||"").extend({required:{params:!0,message:g.required}}).extend({notMatchingPattern:{params:f.ProfileRegex,message:g.invalidFirstName}});var r=function(){n.firstName.suppressMessages(!1),d.viewContext.data.input[h.firstName.name]=n.firstName()};return n.firstName.suppressMessages=ko.observable(!0),n.firstName.subscribe(r),n.firstName.serverError=t,n.firstName.focused=ko.observable(!1),e&&r(),n},createLastNameObservableSet:function(e,t){var n={};!e&&s&&(e=s.getProperty("PfLastName")),n.lastName=ko.observable(e||"").extend({required:{params:!0,message:g.required}}).extend({notMatchingPattern:{params:f.ProfileRegex,message:g.invalidLastName}});var r=function(){n.lastName.suppressMessages(!1),d.viewContext.data.input[h.lastName.name]=n.lastName()};return n.lastName.suppressMessages=ko.observable(!0),n.lastName.subscribe(r),n.lastName.serverError=t,n.lastName.focused=ko.observable(!1),e&&r(),n},createMemberNameObservableSet:function(t,s){var l={},w=0!==p.supportsPhone,C=l.domains=d.domains,x=d.defaultDomain,A="",k="",S=d.viewContext.data.prefill[h.memberName.name],N=d.viewContext.data.prefill[h.country.name],E=w?d.memberNameType.Phone:d.memberNameType.EASI;d.isWin10Desktop&&(E=d.memberNameType.EASI);var P=S&&S[c.Live]&&S[c.Live].length>0,M=S&&S[c.EASI]&&S[c.EASI].length>0,T=w&&S&&S[c.Phone]&&S[c.Phone].length>0,I=!P&&!M&&!T,D="Default_Live"===d.fl&&!P,F="Default_EASI"===d.fl&&!M,H="Default_Phone"===d.fl&&!T;if(t)if(k=d.viewContext.data.input.memberNameInput,E=o.getMemberNameType(t,C),E===c.Live){var _=t.split("@");_&&_.length>1&&(x=_[1])}else w&&E===c.Phone&&(A=d.viewContext.data.input.memberNamePhoneCountry);else if(w&&("Phone"===d.fl||"Always_Default_Phone"===d.fl||"Default_Phone"===d.fl&&(T||I)||T&&(D||F)))E=c.Phone,T?(k=S[c.Phone][0].phoneNumber,A=S[c.Phone][0].country):N&&(A=N);else if("EASI"===d.fl||"Default_EASI"===d.fl&&(M||I)||M&&(D||H))E=c.EASI,M&&(k=S[c.EASI][0].email);else if("Live"===d.fl||"Default_Live"===d.fl&&(P||I)||P&&(F||H)){if(E=c.Live,P){var O=S[c.Live][0].email.split("@");k=O[0],x=O[1]}}else if("Email"===d.fl)if(E=c.EASI,M)k=S[c.EASI][0].email;else if(P){E=c.Live;var O=S[c.Live][0].email.split("@");k=O[0],x=O[1]}var L=l.memberNameType=ko.observable(E);L.subscribe(function(){U(""),R("")});var B=l.domain=ko.observable(x||C[0]),$=(l.placeholder=ko.computed(function(){switch(L()){case c.EASI:return v.usernamePlaceholderEASI;case c.Phone:return v.usernamePlaceholderPhone;case c.Live:return v.usernamePlaceholderLive;default:return""}}),l.memberNameAriaLabel=ko.computed(function(){switch(L()){case c.Phone:return v.ariaLblUsernamePhone;case c.Live:case c.EASI:return v.ariaLblUsernameEmail;default:return""}}),l.cssWin10InclusiveOOBE=ko.computed(function(){return L()===c.Live?"win-textbox win-textarea md padding":"win-textbox win-textarea"}),l.memberNameInput=ko.observable(k||""));
if("EASI"!==d.fl&&"Live"!==d.fl&&"Phone"!==d.fl&&$.subscribe(function(e){var t=this;if(t.memberNameType()!==c.Phone){var n=o.getMemberNameType(e,t.domains);if(n===c.EASI)t.memberNameType(c.EASI);else if(n===c.Live){var r=e.split("@");t.domain(r[1]),t.memberNameInput(r[0]),t.memberNameType(c.Live)}}else d.viewContext.data.input[h.verification.name]="";t.memberNameSuccessMessage(""),t.memberNameExistsMessage("")},l),w){var V=d.phoneCountryListJson;l.memberNamePhoneCountries=V.list,l.memberNamePhoneCountry=ko.observable(A||V["default"])}var U=l.memberNameSuccessMessage=ko.observable(""),R=l.memberNameExistsMessage=ko.observable(""),j=l.memberNameSuggestions=ko.observable([]).extend({rateLimit:300}),q=l.showSuggestions=ko.observable(!1);l.onClickSuggestionsLink=function(){var e=j().length>0;e&&(r("#CredentialsSuggestionsModal").length>0&&r("#CredentialsSuggestionsModal").modal("show"),y&&r("#MemberNameSuggestions").show(),q(!0),i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.visible(!1),i.ftrViewModelHandle.buttons.nextButton.visible(!1)))},l.onPickSuggestion=function(e){if(e){var t=e.split("@");t&&t.length>1&&($(t[0]),B(t[1])),l.onSuggestionsClose()}},l.onSuggestionsClose=function(){r("#CredentialsSuggestionsModal").length>0&&r("#CredentialsSuggestionsModal").modal("hide"),q(!1),i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.visible(0===d.noAuthCancel),i.ftrViewModelHandle.buttons.nextButton.visible(!0))};var Q=d.viewContext.data.previouslyCheckedMemberName||"",W=!1,z=function(e,t){e===c.Live?U(g.memberNameAvailable.format(t)):e===c.EASI&&U(g.memberNameAvailableEasi)},X=function(e,t,n,r){var i=g.memberNameTaken,a="",o="";switch(0!==d.displaySignInLinkInMnError?(d.signinUrl=$Utility.addQueryString(d.signinUrl,"username",t||""),i=g.memberNameTaken.format(t,d.signinUrl),a=g.memberNameTakenEasi.format(t,d.signinUrl),o=g.memberNameTakenPhone.format(t,d.signinUrl)):(a=g.memberNameTakenEasi.format(t),o=g.memberNameTakenPhone.format(t)),e){case b.domainExistsInAad:return{isValid:!1,message:g.domainExistsInAad.format("domainExistsInAadSwitchToOutlook")};case b.domainExistsInAadSupportedLogin:return{isValid:!1,message:g.domainExistsInAadSupportedLogin.format(t)};case b.domainIsReserved:case b.domainNotAllowed:return{isValid:!1,message:g.domainNotAllowed};case b.signupBlocked:return{isValid:!1,message:g.signupBlocked.format(t)};case b.invalidEmailFormat:return{isValid:!1,message:g.invalidEmailFormat};case b.invalidPhoneFormat:return{isValid:!1,message:g.invalidPhoneFormat};case b.invalidMemberNameFormat:return{isValid:!1,message:w&&L()===c.Phone?g.invalidPhoneFormat:g.invalidEmailFormat};case b.membernameTaken:return{isValid:!1,message:i};case b.membernameTakenEasi:return{isValid:!1,message:a};case b.membernameTakenPhone:return w?0!==d.forceEviction?(R(g.memberNameExistsPhone),{isValid:!0,message:""}):{isValid:!1,message:o}:{isValid:!1,message:i}}return 0===e&&n===!1?r===c.Live?{isValid:!1,message:i}:{isValid:!1,message:a}:{isValid:!0,message:""}},J=ko.computed(function(){var e=this,t=e.memberNameInput();if(e.memberNameType()===c.Live)return t+"@"+e.domain();if(w&&e.memberNameType()===c.Phone)for(var n=0,r=e.memberNamePhoneCountries.length;r>n;n++)if(e.memberNamePhoneCountries[n].iso===e.memberNamePhoneCountry())return"+"+e.memberNamePhoneCountries[n].code+t;return t},l).extend({required:{params:!0,message:g.required}}).extend({liveMemberNameValid:{params:{domains:C,patterns:[f.LiveMembernameRegex]},message:g.invalidEmailFormat}}).extend({memberNameValidForFl:{params:{fl:d.fl,domains:C},message:g.domainNotAllowed}}).extend({validation:{onlyIf:function(){return L()===c.EASI},validator:function(e){return e.match(f.MembernameRegex)},message:g.invalidEmailFormat}}).extend({validation:{onlyIf:function(){return w&&L()===c.Phone&&$()},validator:function(e){return e.match(f.PhoneNumberFormat)},message:g.invalidPhoneFormat}}).extend({validation:{onlyIf:function(){return w&&L()===c.Phone&&!$()},validator:function(e){return e.match(/ /)},message:g.required}}).extend({pattern:{onlyIf:function(){return L()===c.Live},params:"^[a-zA-Z]",message:g.emailMustStartWithLetter}}).extend({validation:{onlyIf:function(){var e=d.viewContext.data.prefill.checkServerSideCache&&(L()===c.EASI&&M||L()===c.Phone&&T);return e||(W=!1),e},validator:function(t){var r=d.viewContext.data.prefill[h.memberName.name];for(index=0;index<r[L()].length;++index)if(prefill=r[L()][index],prefill.phoneNumber&&prefill.countryCode&&"+"+prefill.countryCode+prefill.phoneNumber==t||prefill.email&&prefill.email==t){if(Q!=t){d.viewContext.data.reporting.memberNameChangeCount++,prefill.isAvailable?d.viewContext.data.reporting.memberNameAvailableCount++:d.viewContext.data.reporting.memberNameUnavailableCount++;var i={signInName:t,uaid:e.$Config.uaid,skipBECall:!0,isAvailableOnServerCache:prefill.isAvailable,isEasiCheck:!0},o=new n(null,$Utility.generateUrl(u.urls.baseDomain,m.checkAvailable,!0),i,null,null);o.start()}if(d.viewContext.data.previouslyCheckedMemberName=Q=t,prefill.isAvailable)return z(L(),t),a.setFocusOnObservable(J,!0),W=!0,!0;if(prefill.errorCode){var s=X(prefill.errorCode,t);if(s)return this.message=s.message,a.setFocusOnObservable(J,!1),W=!0,s.isValid}break}return W=!1,!0},message:""}});J.extend({checkAvailable:{onlyIf:function(){var e=!!$()&&J&&Q!=J()&&!W;return J&&(d.viewContext.data.previouslyCheckedMemberName=Q=J()),e},params:{url:$Utility.generateUrl(u.urls.baseDomain,m.checkAvailable,!0),observable:J,getSuggestedMemberNames:function(e){j(e)},setSuccessMessage:z,getResult:X,includeSuggestions:!0,message:g.checkAvailableFail}}});var G=function(){if(d.viewContext.data.input[h.memberName.name]=J(),d.viewContext.data.input.memberNameInput=$(),d.viewContext.data.input.memberNameType=L(),w){R(""),d.viewContext.data.input.memberNamePhoneCountry=l.memberNamePhoneCountry();for(var e=0,t=l.memberNamePhoneCountries.length;t>e;e++)if(l.memberNamePhoneCountries[e].iso===l.memberNamePhoneCountry())return void(d.viewContext.data.input.memberNamePhoneCountryCode=l.memberNamePhoneCountries[e].code)}};return G(),J.subscribe(function(e){l.memberName.suppressMessages(!1),G(),l.memberName.previousValue(e)}),J.previousValue=ko.observable(""),J.suppressMessages=ko.observable(!l.memberNameInput()),J.serverError=s,J.focused=ko.observable(!1),l.memberName=J,l.domainDropdownClick=function(e){J.isValidating()||B(e)},l.phoneSwitchFocused=ko.observable(!1),l.easiSwitchFocused=ko.observable(!1),l.liveSwitchFocused=ko.observable(!1),l.switchMemberNameType=function(e,t){var n=c,r=L();if(!J.isValidating()&&e!==r){if(d.viewContext.data.previouslyCheckedMemberName=Q=null,e===n.Live){if($(""),L(e),B(C[0]),P){var i=S[c.Live][0].email.split("@");$(i[0]),B(i[1])}}else if(e===n.EASI)$(""),L(e),$(M?S[n.EASI][0].email:""),B(C[0]);else if(w&&e===n.Phone){if(0!==p.pwdless){var a=window.wLive.Account.viewModelHandle;a&&a.password&&a.password("")}$(""),L(e),$(T?S[n.Phone][0].phoneNumber:""),B(C[0])}else e||(L()===n.Phone?l.switchMemberNameType(n.EASI):L()===n.EASI?l.switchMemberNameType(n.Live):L()===n.Live&&l.switchMemberNameType(w?n.Phone:n.EASI));if(J.suppressMessages(!$()),t)switch(e){case n.Phone:case n.Live:l.easiSwitchFocused(!0);break;case n.EASI:r===n.Phone?l.phoneSwitchFocused(!0):r===n.Live&&l.liveSwitchFocused(!0)}else J.focused(!0)}},l.memberNameInputType=ko.computed(function(){return $B&&$B.IE&&$B.V&&$B.V<=8?"text":w&&L()===c.Phone?"tel":L()===c.EASI?"email":"text"}),l.liveEasiSwitchText=ko.computed(function(){return L()===c.Live?v.easiSwitch:v.liveSwitch}),l.memberNamePrefill=ko.computed(function(){return S?S[L()]:null}),l.prefillSelected=function(e){w&&e&&e.phoneNumber?(l.memberNameInput(e.phoneNumber),l.memberNamePhoneCountry(e.country)):e&&e.email&&l.memberNameInput(e.email)},l},createPasswordObservableSet:function(t,n){var r={};r.skipPasswordValidation=function(){if(n)return!0;if(0!==p.pwdless){var e=window.wLive.Account.viewModelHandle,t=e&&e.memberName&&e.memberName()?e.memberName():d.viewContext.data.input.memberName,r=o.getMemberNameType(t,d.domains);return r===c.Phone}return!1};var i=ko.observable(t||"").extend({required:{onlyIf:function(){return!r.skipPasswordValidation()},params:!0,message:g.required},minLength:{onlyIf:function(){return!r.skipPasswordValidation()},params:8,message:g.passwordTooSimple},pattern:{onlyIf:function(){return!r.skipPasswordValidation()},params:f.PwdValidInput,message:g.passwordInvalidChar},pwdComplexity:{onlyIf:function(){return!r.skipPasswordValidation()},params:!0,message:g.passwordTooSimple},pwdContainsMemberName:{onlyIf:function(){return 0!==d.pwdMnCheck&&!r.skipPasswordValidation()},params:!0,message:g.pwdContainsMn}});if(0!==d.noBPCheck||r.skipPasswordValidation()?i.isValidating=ko.observable(!1):i.extend({bannedPwd:{onlyIf:function(){var e=i()&&d.viewContext.data.previouslyCheckedPassword!=i();return e&&(d.viewContext.data.previouslyCheckedPassword=i()),e},params:{url:$Utility.generateUrl(u.urls.baseDomain,m.bannedPwd,!0),ski:SKI||"",observable:i},message:g.bannedPassword}}),i.subscribe(function(t){if(r.password.suppressMessages(!1),d.viewContext.data.input[h.password.name]=t,y||w){var n=e.MSA&&e.MSA.CXH;n&&n.encryptUserDataAsync(t,function(e){n.propertyBagSetAsync("encPwd",e)})}}),i.suppressMessages=ko.observable(!0),i.serverError=n,n=null,i.focused=ko.observable(!1),r.password=i,h.retypePassword){var a=ko.observable(t||"").extend({required:{params:!0,message:g.required},equal:{onlyIf:function(){return i()},params:i,message:g.passwordNotMatch}});a.focused=ko.observable(!1),a.suppressMessages=ko.observable(!0),a.subscribe(function(){r.retypePassword.suppressMessages(!1)}),r.retypePassword=a,a.subscribe(function(e){r.retypePassword.suppressMessages(!1),d.viewContext.data.input[h.retypePassword.name]=e})}return r},createCountryObservableSet:function(e){var t={},n=ko.observable(e||"");n.subscribe(function(e){t.country.suppressMessages(!1),d.viewContext.data.input[h.country.name]=e}),n.suppressMessages=ko.observable(!0),n.focused=ko.observable(!1),t.country=n;t.countries=d.countryList,t.showBirthDate=ko.computed(function(){var e=this.country(),t=d.countryDetailMap,n=t&&t[e]?t[e].childAge:0;return t&&0!==n||0!==d.dobReq},t);return t},createBirthdateObservableSet:function(e){e=e||"";var t={},n="",r="",i="",a=e.split(":");3===a.length&&(n=a[0],r=a[1],i=a[2]),t.birthYear=ko.observable(i),t.birthMonth=ko.observable(r.replace(/^0/,"")),t.birthDay=ko.observable(n.replace(/^0/,"")),t.birthdate=ko.computed(function(){var e=this,t=e.birthDay(),n=e.birthMonth(),r=e.birthYear();return t=1===t.length?"0"+t:t,n=1===n.length?"0"+n:n,t+":"+n+":"+r},t),t.birthYear.suppressMessages=ko.observable(!0),t.birthMonth.suppressMessages=ko.observable(!0),t.birthDay.suppressMessages=ko.observable(!0),t.birthdate.subscribe(function(e){d.viewContext.data.input[h.birthdate.name]=e}),t.birthYear.subscribe(function(){t.birthYear.suppressMessages(!1)}),t.birthMonth.subscribe(function(){t.birthMonth.suppressMessages(!1)}),t.birthDay.subscribe(function(){t.birthDay.suppressMessages(!1)}),t.birthdate.suppressMessages=ko.computed({read:function(){var e=this;return e.birthYear.suppressMessages()||e.birthMonth.suppressMessages()||e.birthDay.suppressMessages()},write:function(e){var t=this;t.birthYear.suppressMessages(e),t.birthMonth.suppressMessages(e),t.birthDay.suppressMessages(e)},owner:t}),t.birthdate.focused=ko.observable(!1);var o=d.dateOrder.toUpperCase();return t.birthdateParts=new Array(3),t.birthdateParts[o.indexOf("D")]=t.birthDay,t.birthdateParts[o.indexOf("M")]=t.birthMonth,t.birthdateParts[o.indexOf("Y")]=t.birthYear,t},createBirthdateHTML5ObservableSet:function(e){e=e||"";var t={},n=ko.observable(e).extend({required:{params:!0,message:g.required}});return n.extend({validation:{validator:function(e){var t=e.split("-");if(3===t.length){var n=new Date(t[0],t[1],t[2]);return!isNaN(n)}return!1},message:g.invalidBirthDate}}),n.subscribe(function(e){if(t.birthdateHTML5.suppressMessages(!1),e){var n=e.split("-");if(3===n.length){var r=n[2]+":"+n[1]+":"+n[0];d.viewContext.data.input[h.birthdate.name]=r,d.viewContext.data.input[h.birthdateHTML5.name]=e}}}),n.suppressMessages=ko.observable(!0),n.focused=ko.observable(!1),t.birthdateHTML5=n,t},createGenderObservableSet:function(e){var t={},n=ko.observable(e||"").extend({required:{params:!0,message:g.required}});return n.subscribe(function(e){t.gender.suppressMessages(!1),d.viewContext.data.input[h.gender.name]=e}),n.suppressMessages=ko.observable(!0),n.focused=ko.observable(!1),t.gender=n,t},createPhoneCountryObservableSet:function(e){var t=d.phoneCountryListJson,n=t["default"]||"";y&&(n=d.viewContext.data.input[h.country.name]||"");var r=ko.observable(e||n);return d.viewContext.data.input[h.phoneCountry.name]=r(),r.subscribe(function(e){d.viewContext.data.input[h.phoneCountry.name]=e}),{phoneCountries:t.list,phoneCountry:r}},createPhoneNumberObservableSet:function(e){var t={},n=ko.observable(e||"").extend({onePattern:{onlyIf:function(){return n&&n()},params:[f.PhoneNumberFormat],message:g.invalidPhoneFormat},required:{onlyIf:function(){var e=window.wLive.Account.viewModelHandle,t=e&&e.memberName&&e.memberName()?e.memberName():d.viewContext.data.input.memberName,n=o.getMemberNameType(t,d.domains),r=e&&e.alternateEmail&&Boolean(e.alternateEmail().match(f.AltEmailRegEx));return e&&n===c.Live&&!r},message:g.required}});return n.subscribe(function(e){t.phoneNumber.suppressMessages(!1),d.viewContext.data.input[h.phoneNumber.name]=e}),n.suppressMessages=ko.observable(!0),n.focused=ko.observable(!1),t.phoneNumber=n,t},createAlternateEmailObservableSet:function(e,t){var n={},r=ko.observable(e||"").extend({allPatterns:{onlyIf:function(){return r&&r()&&r.isVisble()},params:[f.AltEmailRegEx],message:g.invalidEmailFormat},required:{onlyIf:function(){var e=window.wLive.Account.viewModelHandle,t=e&&e.memberName&&e.memberName()?e.memberName():d.viewContext.data.input.memberName,n=o.getMemberNameType(t,d.domains);return e&&n===c.Live&&(!e.phoneNumber||!e.phoneNumber())},message:g.required}});return r.subscribe(function(e){n.alternateEmail.suppressMessages(!1),d.viewContext.data.input[h.alternateEmail.name]=e}),r.suppressMessages=ko.observable(!0),r.serverError=t,r.focused=ko.observable(!1),r.isVisble=ko.observable(!!t||d.viewContext.data.input[h.alternateEmail.name]&&!d.viewContext.data.input[h.phoneNumber.name]),n.alternateEmail=r,n},createHipObservableSet:function(){var t={},n=e.HIPAMFE;if(n&&n.observable)return n.observable;var r=ko.observable("").extend({hipValidation:{}});return r.subscribe(function(){e.HIPAMFE;t.hip.suppressMessages(!1),t.hip.isModified(!0)}),r.suppressMessages=ko.observable(!0),r.focused=ko.observable(!1),r.focused.extend({notify:"always"}),t.hip=r,t},createVerificationObservableSet:function(e,t){var n={};return n.verification=ko.observable(e||"").extend({required:{params:!0,message:g.required},pattern:{params:$Config.isINT?f.verificationCodeInt:f.verificationCode,message:g.oneTimeCodeInvalidFormat}}),n.verification.terminalState=ko.observable(!0),n.verification.serverError=t,n.verification.focused=ko.observable(!1),n.verification.suppressMessages=ko.observable(!0),n.verifyTimeout=null,n.startTimestamp=(new Date).getTime(),n.verificationSubTitle=v.verificationSubTitle.format(d.viewContext.data.input.memberNameInput),n.showAutoVerificationUI=ko.observable(!1),n.showAutoVerificationUI.subscribe(function(e){s&&s.setWizardButtons&&s.setWizardButtons(!e,!e,!1),i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.disabled(e),i.ftrViewModelHandle.buttons.nextButton.disabled(e)),d.viewContext.data.input.autoVerify=e}),n.showAutoVerificationUI(o.isAutoVerificationSupported(d.viewContext.data.input.memberNameInput)),n.verification.subscribe(function(e){e!==r.trim(e)&&(e=r.trim(e),n.verification(e)),n.verification.suppressMessages(!1),d.viewContext.data.input[h.verification.name]=e}),n.doAutoVerify=function(){var e=this;if(n.showAutoVerificationUI()){d.viewContext.data.reporting.autoVerifyShown=!0,i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.disabled(!0),i.ftrViewModelHandle.buttons.nextButton.disabled(!0));var t=s.getProperty("SmsCode");if(y&&l)try{l.getVerificationCode(function(t){n.onCodeSuccess(t,e)},function(e){l.logError(e),n.onVerifyFailed()})}catch(r){l.logError(r),n.onVerifyFailed()}else n.onCodeSuccess(t,e)}},n.stopAutoVerify=function(){null!=n.verifyTimeout&&(clearTimeout(n.verifyTimeout),n.verifyTimeout=null),s.setWizardButtons(!0,!0,!1),i.ftrViewModelHandle&&(i.ftrViewModelHandle.buttons.backButton.disabled(!1),i.ftrViewModelHandle.buttons.nextButton.disabled(!1))},n.onVerifyFailed=function(e){var t=e&&e.error,r=this;r._viewContext.data.serverErrors||(r._viewContext.data.serverErrors={}),t&&e.error.code===b.maximumOTTDailyError?r._viewContext.data.serverErrors[h.memberName.name]=g.verificationThrottled:0!==d.autoVerify?(n.stopAutoVerify(),r._viewContext.data.serverErrors[h.memberName.name]=g.autoVerificationFailed):r._viewContext.data.serverErrors[h.memberName.name]=g.generic,r.$.triggerHandler(C,{actionName:x,control:r})},n.onCodeSuccess=function(e,t){if("string"===r.type(e))"-1"==e?n.onVerifyFailed():(n.verification(e),t.handleActionButton());else{var i=(new Date).getTime()-n.startTimestamp;i>d.sendOttTimeout?(n.stopAutoVerify(),n.showAutoVerificationUI(!1)):n.verifyTimeout=setTimeout(r.proxy(n.doAutoVerify,t),100)}},n},createAdditionalLegalTextObservableSet:function(){var e={};return e.additionalLegalText=ko.computed(function(){return v.frenchLegalText?v.frenchLegalText:void 0}),e}})}(),function(){var e=window,t=e.wLive,n=e.jQuery,r=t.Account,i=r.SignupObservableFactory,a=e.$Config.WLXAccount,o=a.signup,s=o.page,l={},u={};defineClass("wLive.Account.ViewModels.SignupViewModel",function(e,t){var a=this,d=e.data,c=d.input||{},p=d.serverErrors||{},f=i.createObservableSetByPrefillName,m=a._observables=[];t&&t.observables&&(m=a._observables=t.observables),a._viewContext=e,l=o.strings,u=l.errors;var v=m.length;a.validationOrder=new Array(v);for(var g=0;v>g;g++){var b=m[g];mix(a,f(b,c[b],p[b])),a.validationOrder[g]=a[b]}mix(a,{strings:l,config:s});var h=n(".skypeSpinner .spinnerText p");if(h.length>0){var y={loadingString:o.strings.sendingOTT};ko.cleanNode(h[0]),ko.applyBindings(y,h[0])}var w=n("#ftr");if(w.length>0&&(r.ftrViewModelHandle=r.FieldHelper.createFooterObservable(a.memberName,s.noConsentText,a.additionalLegalText),ko.cleanNode(w[0]),ko.applyBindings(r.ftrViewModelHandle,w[0])),a.birthdate){if(0!==o.dobCheck&&0===o.dobReq){var C=o.countryDetailMap;a.birthdate.extend({birthdatePartRequired:{onlyIf:function(){return C&&C[a.country()]&&0!==C[a.country()].childAge},params:!0,message:u.required},birthdateValid:{onlyIf:function(){return C&&C[a.country()]&&0!==C[a.country()].childAge},params:!0,message:u.invalidBirthDate}})}else a.birthdate.extend({birthdatePartRequired:{params:!0,message:u.required},birthdateValid:{params:!0,message:u.invalidBirthDate}});a.birthdate.isValid()||(a.birthDay(""),a.birthMonth(""),a.birthYear(""))}a.initErrorGroup()},{validationOrder:null,errors:null,isValid:null,_viewContext:null,_observables:null,initErrorGroup:function(){var e=this;e.errors=ko.validation.group(e.validationOrder),e.errors.showAllMessages(!1),e.isValid=function(){return e.errors().length>0?!1:e._viewContext.hasAttemptedSubmit?!e.getFirstError():!0}},notifyAllSubscribers:function(){var e=this;n.each(e.validationOrder,function(e,t){t&&t.suppressMessages&&t.suppressMessages(!1),t&&!t()&&t.notifySubscribers&&t.notifySubscribers()})},validation:function(){var e=this,t=n.map(e.validationOrder,function(e){return e&&e.isValidating?e.validation():null});return t},showError:function(e){var t=this;return!e.suppressMessages()||t._viewContext.hasAttemptedSubmit?e.isValid&&!e.isValid()||e.isModified&&!e.isModified()&&e.serverError:e.serverError},getFirstError:function(){var e=this,t=null;return n.each(e.validationOrder,function(e,n){return n&&n.isValid&&!n.isValid()||n&&n.isModified&&!n.isModified()&&n.serverError?(t=n,!1):!0}),t},placeholderVisible:function(e){return!e},isPlaceholderSupported:function(){return"placeholder"in document.createElement("input")}})}(),function(){var e=window,t=e.wLive,n=e.jQuery,r=t.Account,i=r.Controls,a=e.ExternalHelper,o=e.$Config.WLXAccount,s=o.signup,l={},u=e.MSA&&e.MSA.CXH,d="onAction",c="onShow",p="onHide",f="onSetupEvents",m="onRemoveEvents",v="onDispose";defineClass("wLive.Account.Controls.TouPrivacyControl",function(e,t,r){var a=this;a.$=n(a),a._$container=e,a._viewContext=t,a._options=r;var o=a._pageDialogControl=new i.PageDialogControl(e,t,r);a._$pageDialogControl=o.$,t.data||(t.data={}),l=s.strings},{_pageDialogControl:null,_$pageDialogControl:null,_viewContext:null,_options:null,$:null,dispose:function(){},show:function(){var e=this;e._setupDialogEvents(),e._pageDialogControl&&e._pageDialogControl.show()},hide:function(){var e=this;e._pageDialogControl&&e._pageDialogControl.hide(),e._removeDialogEvents()},pageReady:function(){if(a){var e=n(".wpBluePage");a.setProperty("FrameWidth",parseInt(e.innerWidth()).toString()),a.setProperty("FrameHeight",parseInt(e.innerHeight()).toString()),a.ready()}},notifyVisible:function(){this.pageReady()},_setupDialogEvents:function(){var e=this,t=e._$pageDialogControl;if(t){var r=e._pageDialogControl.events;t.on(r.action,n.proxy(e._processDialogActionEvent,e)),t.on(r.setupEvents,n.proxy(e._processDialogSetupEvent,e)),t.on(r.removeEvents,n.proxy(e._processDialogRemoveEvent,e)),t.on(r.show,n.proxy(e._processDialogShowEvent,e)),t.on(r.hide,n.proxy(e._processDialogHideEvent,e))}},_removeDialogEvents:function(){var e=this,t=e._$pageDialogControl;if(t){var n=e._pageDialogControl.events;t.off(n.action),t.off(n.setupEvents),t.off(n.removeEvents),t.off(n.show),t.off(n.hide)}},_processDialogActionEvent:function(e,t){this.$.triggerHandler(d,{actionName:t.actionName,control:this}),e&&(e.preventDefault(),e.stopPropagation())},_processDialogSetupEvent:function(e,t){this.$.triggerHandler(f,{content:t.content,control:this}),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.visible(!0),r.ftrViewModelHandle.buttons.nextButton.visible(!1)),o.isWin10InclusiveOOBE&&u&&u.showBackButton(!0)},_processDialogRemoveEvent:function(e,t){this.$.triggerHandler(m,{content:t.content,control:this})},inclusiveOOBECancelBack:function(){this.$.triggerHandler(d,{actionName:"cancel",control:this})},_processDialogShowEvent:function(e,t){var r=this,i=t.content,a=r._options,p=a.queryUrl?a.queryUrl:$Utility.generateUrl(o.urls.baseDomain,s.urls.queryUrl,!0),f=a.isPrivacy,m=f?"privacy":"tou",v=r._viewContext.data=r._viewContext.data||{},g=f?v.privacyText:v.touText,b=n("pre",i).length>0?n("pre",i):n("#TOUPrivacyDiv",i),h=n("#TOUPrivacyHeader",i),y=n("#touBackBtn"),w=f?l.privacyHeader:l.touHeader;g?(y.removeClass("hidden"),b.html(g),h.text(w)):p&&n.ajax({type:"POST",url:p,data:{command:m},context:r,success:function(e){if(e){var t=String(e).encodeHtml();b.html(t),h.text(w),v[f?"privacyText":"touText"]=t,y.removeClass("hidden"),o.isWin10InclusiveOOBE&&u&&u.handleBackButton(r.inclusiveOOBECancelBack.bind(r))}},error:function(){r.$.triggerHandler(d,{actionName:"cancel",control:r})}}),r.$.triggerHandler(c,{content:i,control:r})},_processDialogHideEvent:function(e,t){this.$.triggerHandler(p,{content:t.content,control:this})},events:{action:d,show:c,hide:p,setupEvents:f,removeEvents:m,dispose:v}},{})}(),function(){var e=window,t=e.wLive,n=e.jQuery,r=t.Account,i=r.Controls,a=(r.ViewModels,r.AnimationHelper,e.ExternalHelper),o=t.Core.DataRequest,s=e.$Config.WLXAccount,l=s.hip,u=s.signup,d=u.regex,c={},p=(u.signupObservableSets,{}),f=e.MSA&&e.MSA.CXH,m=s.isWin10,v=s.isWin10InclusiveOOBE,g="action",b="alternate",h="skip",y="onAction",w="onShow",C="onHide",x="onSetupEvents",A="onRemoveEvents",k="onDispose",S=0;defineClass("wLive.Account.Controls.SignupControl",function(e,t,r){var a=this;a.$=n(a),a._$container=e,a._viewContext=t,a._options=r;var o=a._pageDialogControl=new i.PageDialogControl(e,t,r);a._$pageDialogControl=o.$,a._sectionId=r.sectionId,t.data||(t.data={}),p=u.strings,c=u.urls.dataRequest},{_pageDialogControl:null,_$pageDialogControl:null,_viewContext:null,_verifyTimeout:null,_options:null,$:null,dispose:function(){},show:function(){var e=this;e._setupDialogEvents(),e._pageDialogControl&&e._pageDialogControl.show()},hide:function(){var e=this;e._pageDialogControl&&e._pageDialogControl.hide(),e._removeDialogEvents()},pageReady:function(){if(a){var e=n("#maincontent");a.setProperty("FrameWidth",parseInt(e.innerWidth()).toString()),a.setProperty("FrameHeight",parseInt(e.innerHeight()).toString()),a.ready()}},notifyVisible:function(){this.pageReady()},handleActionButton:function(){this.$.triggerHandler(y,{actionName:g,control:this})},IsChild:function(e,t){var n=!1,r=u.countryDetailMap,i=r&&r[t]?r[t].childAge:0;if(t&&e&&0!==i){var a="",o="",s="",l=e.split(":");3===l.length&&(a=parseInt(l[0]),o=parseInt(l[1]),s=parseInt(l[2]));var d=new Date,e=new Date(s,o-1,a),c=d.getUTCFullYear()-e.getFullYear()+(d.getUTCMonth()-e.getMonth())/12+(d.getUTCDate()-e.getDate())/365;n=i>c}return n},setEnabled:function(e){a&&a.setWizardButtons(e,e,!1),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.disabled(!e),r.ftrViewModelHandle.buttons.nextButton.disabled(!e))},_setupDialogEvents:function(){var e=this,t=e._$pageDialogControl;if(t){var r=e._pageDialogControl.events;t.on(r.action,n.proxy(e._processDialogActionEvent,e)),t.on(r.setupEvents,n.proxy(e._processDialogSetupEvent,e)),t.on(r.removeEvents,n.proxy(e._processDialogRemoveEvent,e)),t.on(r.show,n.proxy(e._processDialogShowEvent,e)),t.on(r.hide,n.proxy(e._processDialogHideEvent,e))}},_removeDialogEvents:function(){var e=this,t=e._$pageDialogControl;if(t){var n=e._pageDialogControl.events;t.off(n.action),t.off(n.setupEvents),t.off(n.removeEvents),t.off(n.show),t.off(n.hide)}},_processDialogActionEvent:function(e,t){var i=this,a=t.viewModel,o=t.actionName,s=i._viewContext.data||{},l=s.input||{};i.setEnabled(!1),n(document.activeElement).blur(),a&&o===g&&(m?a._observables.indexOf("alternateEmail")>=0&&a.notifyAllSubscribers():a.notifyAllSubscribers()),setTimeout(function(){var t=a&&a.validation()||[];n.when.apply(n,t).done(function(){if(o===g||o===b||o===h){var t=!1;if(a)if(a.isValid())o===b?i.$.triggerHandler(y,{actionName:b,control:i}):o===h?i.$.triggerHandler(y,{actionName:o,control:i}):t=!0;else{var n=a.getFirstError();n.suppressMessages(!1),n.focused(!1),n.focused(!0)}else o===b?i.$.triggerHandler(y,{actionName:b,control:i}):t=!0;if(t&&a&&a.memberName&&0!==u.sendOttMnPage){var s=r.FieldHelper.getMemberNameType(l.memberNameInput,u.domains),d=u.channel.sms;s===u.memberNameType.EASI&&(d=u.channel.email),l.lastEnteredMemberName!==l.memberNameInput&&(l.lastEnteredMemberName=l.memberNameInput,i._sendOTT(d),t=!1)}t?i.handleActionButton():i.setEnabled(!0)}else i.setEnabled(!0),i.$.triggerHandler(y,{actionName:o,control:i});e&&(e.preventDefault(),e.stopPropagation())})},0)},inclusiveOOBECancelBack:function(){this.$.triggerHandler(y,{actionName:"cancel",control:this})},inclusiveOOBEAlternateBack:function(){this.$.triggerHandler(y,{actionName:"alternate",control:this})},_processDialogSetupEvent:function(e,t){var i=this,a=t.content,o=t.viewModel,c=(i._options,o&&o.onClickSuggestionsLink),g=i._viewContext.data||{},b=g.input||{};if(r.ftrViewModelHandle){var h=0!==u.noAuthCancel&&o&&o.memberName&&o.showSuggestions&&!o.showSuggestions();r.ftrViewModelHandle.buttons.backButton.visible(!h)}if(n("#tou").on("click",function(){i.$.triggerHandler(y,{actionName:"tou",control:i})}),n("#privacy").on("click",function(){i.$.triggerHandler(y,{actionName:"privacy",control:i})}),n("#pdc").on("click",function(){i.$.triggerHandler(y,{actionName:"dataCollection",control:i})}),n("#upd").on("click",function(){i.$.triggerHandler(y,{actionName:"dataUse",control:i})}),n("#rp").on("click",function(){i.$.triggerHandler(y,{actionName:"retention",control:i})}),a.on("click","#iSignIn",function(){$ReportEvent.Fire("Signup_SignIn_UserAction")}),1001!==$Config.uiflvr&&n("#impressumLink").attr("href","#").on("click",function(){i.$.triggerHandler(y,{actionName:"impressum",control:i})}),n("#atlas").length>0&&u.urls&&u.urls.atlas&&u.urls.atlas.signupStart&&n("<img>").attr("src",u.urls.atlas&&u.urls.atlas.signupStart).appendTo(n("#atlas")),n("#LocalAccount").length>0&&a.on("click","#LocalAccount",function(){i.$.triggerHandler(y,{actionName:"localAccount",control:i})}),n("#learnMore").length>0&&a.on("click","#learnMore",function(){f.getContext(function(e){var t="FRX"===e.host.toUpperCase();t?(n("#LearnMoreFlyoutContent").html(u.learnMoreContent),n("#HelpText").show(),n("#HelpClose").focus()):i.$.triggerHandler(y,{actionName:"learnMore",control:i})})}),n("#LearnMoreContent").length>0&&n("#LearnMoreContent").html(u.learnMoreContent),n("#HelpClose").length>0&&a.on("click","#HelpClose",function(){n("#HelpText").hide()}),u.getDeviceTicket&&f.postDeviceTicketToUrl(u.originalUrl,u.signupAuthPolicy),(m||v)&&(a.mouseup(function(e){var t=n("#MemberNameSuggestions");t.is(":visible")&&!t.is(e.target)&&0===t.has(e.target).length&&t.hide();var r=n("#HelpText");r.is(":visible")&&!r.is(e.target)&&0===r.has(e.target).length&&r.hide()}),!u.learnMoreContent&&u.urls.queryUrl&&n.post($Utility.generateUrl(s.urls.baseDomain,u.urls.queryUrl,!0),{command:"win10learnmore"},function(e){var t=n.parseJSON(e);t&&(u.learnMoreContent=t.html)},"html"),n("#Proofs").length>0&&(u.fss&&u.fss.memberRole===u.fss.userRole?(n("#ProofsHeading").text(p.proofs.familychildheader),n("#ProofsDesc").text(p.proofs.familychilddesc)):u.fss&&u.fss.memberRole===u.fss.adminRole?n("#ProofsDesc").text(p.proofs.familydesc):i.IsChild(b.birthdate,b.country)&&(n("#ProofsHeading").text(p.proofs.childheader),n("#ProofsDesc").text(p.proofs.childdesc))),n("#PreferencesAction").is(":visible")?b.memberNameInput.indexOf("@")>-1?(n("#PreferencesCancel").show(),s.isWin10InclusiveOOBE&&f&&f.handleBackButton(i.inclusiveOOBECancelBack.bind(i))):b.memberNameInput.match(d.PhoneNumberFormat)?n("#PhoneVerification").show():(n("#PreferencesAlternate").show(),s.isWin10InclusiveOOBE&&f&&f.handleBackButton(i.inclusiveOOBEAlternateBack.bind(i))):s.isWin10InclusiveOOBE&&f&&f.handleBackButton(i.inclusiveOOBECancelBack.bind(i))),o&&o.verification){var w=r.FieldHelper.getMemberNameType(b.memberName,u.domains),C=u.channel.sms,A="undefined"==typeof u.resendCodeTimeout?6e4:u.resendCodeTimeout,k=A||4e3,S=n("#resendCodeText"),N=n("#resendCodeLink",S);w===u.memberNameType.EASI&&(C=u.channel.email),S.delay(A).fadeIn(500),N.on("click",function(){i._sendOTT(C),S.hide(),$ReportEvent.Fire("Signup_ResendCode_UserAction"),S.delay(k).fadeIn(500)}),0!==u.sendOttMnPage?g.sendOttSuccessRsp?(n.proxy(o.doAutoVerify,i)(),delete g.sendOttSuccessRsp):g.sendOttErrorRsp&&(n.proxy(o.onVerifyFailed,i)(g.sendOttErrorRsp),delete g.sendOttErrorRsp):b.lastEnteredMemberName!==b.memberNameInput&&(b.lastEnteredMemberName=b.memberNameInput,i._sendOTT(C))}var E=n("#MemberNamePrefill");if(E.length>0&&E.parent().on("show.bs.dropdown",function(){E.width(E.parents("div .col-md-8").first().width())}),l.required?n("#hipTemplateContainer",t.content).length>0&&(r.FieldHelper.loadHip(),n("#hipSection").show()):n("#hipSection").hide(),c&&a.on("click","#suggLink",c),i._viewContext.hasAttemptedSubmit&&o&&!o.isValid()){var P=o.getFirstError();P.suppressMessages(!1),P.focused(!0)}n("body").on("click","#domainExistsInAadSwitchToOutlook",function(){r.viewModelHandle.switchMemberNameType("Live")}),i.$.triggerHandler(x,{content:a,control:i})},_processDialogRemoveEvent:function(e,t){var i=this,a=i._viewContext.data||{},o=(a.input||{},t.content),s=r.viewModelHandle;o.off("click"),s.verification&&s.showError(s.verification)&&s.verification(""),n("#hipTemplateContainer",t.content).length>0&&n("#hipTemplate").append(n("#hipTemplateContainer").children().detach()),this.$.triggerHandler(A,{content:t.content,control:this})},_processDialogShowEvent:function(t,r){this.$.triggerHandler(w,{content:r.content,control:this});
var i=e.HIPAMFE,a="undefined"!=typeof i&&i.done;n("#hipTemplateContainer",r.content).length>0&&a&&(i&&i.updateTitle&&i.updateTitle(),n("#hipTemplateContainer").append(n("#hipTemplate").children().detach())),n("#ftr").removeClass("hide")},_processDialogHideEvent:function(e,t){this.$.triggerHandler(C,{content:t.content,control:this})},_sendOTT:function(t){var i=this,a=i._viewContext.data||{},l=a.input||{},d={uaid:e.$Config.uaid};d.action=u.sendOttAction,d.proofId=l.memberNameInput,t===u.channel.sms&&(d.proofCountryIso=l.memberNamePhoneCountry,d.autoVerification=r.FieldHelper.isAutoVerificationSupported(l.memberNameInput)),d.channel=t;var p=e.location.hash;p&&(p=p.replace("#",""),p&&p.indexOf("ottErrCode=")>-1&&(d.TestErrorCode=p.replace("ottErrCode=",""),e.location.hash="#"));var f=new o(null,$Utility.generateUrl(s.urls.baseDomain,c.sendOtt,!0),d,n.proxy(i._onSendOttSuccess,i),n.proxy(i._onSendOttFailure,i),1e4,this);S=e.performance&&e.performance.now?e.performance.now():(new Date).getTime(),f.start()},_onSendOttSuccess:function(){var e=this;if(e._reportApiQos(),r.viewModelHandle.doAutoVerify)n.proxy(r.viewModelHandle.doAutoVerify,e)();else{var t=e._viewContext.data||{};t.sendOttSuccessRsp=!0,e.handleActionButton()}},_onSendOttFailure:function(e){var t=this,i=e&&e.error?e.error.code:"";if(t._reportApiQos(i),r.viewModelHandle.onVerifyFailed)n.proxy(r.viewModelHandle.onVerifyFailed,t)(e);else{var a=t._viewContext.data||{};a.sendOttErrorRsp=e,t.handleActionButton()}},_reportApiQos:function(t){try{var n=e.performance&&e.performance.now?e.performance.now():(new Date).getTime(),r={};r.pageId="Account_SendSMSOtt_API",r.duration=Math.round(n-S),t&&(r.errorCode=t),r.skipClientCall=!0,$ReportEvent.Action(r)}catch(i){}},events:{action:y,show:w,hide:C,setupEvents:x,removeEvents:A,dispose:k}},{})}(),function(){var e=window,t=e.wLive,n=e.jQuery,r=t.Account,i=r.Controls,a=t.Core.DataRequest,o=r.UrlHelper,s=e.ExternalHelper,l=e.MSA&&e.MSA.CXH,u=e.$Config.WLXAccount,d=u.signup,c=d.page,p=u.hip,f={},m={},v={},g={},b=u.isWin10,h=0!==u.isSkype,y="newpwd",w="https://",C="onAction",x="Account_CreatePassports_API",A=0;defineSubClass("wLive.Account.Controls.SignupCreateControl",i.SignupControl,function(){this._wreply=o.GetQSValue(e.location.href,"wreply"),this._ru=o.GetQSValue(e.location.href,"ru"),this._isSubmitting=!1,f=d.strings,m=f.errors,g=d.urls.dataRequest,v=d.errorCodes},{dispose:function(){this._base.dispose()},_onCreateSuccess:function(t){var i=r.FieldHelper.getMemberNameType(t.signinName,d.domains),o=this,c=o._viewContext.data||{},p=c.input||{},f=c.prefill||{},m={};m.pageId=x,m.userAction=[],m.skipClientCall=!0;for(var v in f)f[v]===p[v]?m.userAction.splice(0,0,"Action_"+v+"_Used"):m.userAction.splice(0,0,"Action_"+v+"_NotUsed");try{var b=e.performance&&e.performance.now?e.performance.now():(new Date).getTime();m.suggestedAccountType=d.fl,m.accountType=i,m.duration=Math.round(b-A),$ReportEvent.Action(m)}catch(h){}var y=n("#atlas");y.length>0&&d.urls&&d.urls.atlas&&(i===d.memberNameType.Live&&d.urls.atlas.createLive?n("<img>").attr("src",d.urls.atlas&&d.urls.atlas.createLive).appendTo(y):d.urls.atlas.createEasi&&n("<img>").attr("src",d.urls.atlas&&d.urls.atlas.createEasi).appendTo(y)),setTimeout(function(){if(s.setProperty("IsSignUp","1"),t)if(d.fss&&d.fss.isFamilyAddMemberFlow){var n=null,i={uaid:e.$Config.uaid},c=r.FieldHelper.getMemberNameType(t.signinName,d.domains),p=c===d.memberNameType.EASI;i.memberEmailPii=t.signinName||"",i.memberRole=d.fss.memberRole||"",p?n=new a(null,$Utility.generateUrl(u.urls.baseDomain,g.addPendingMember,!0),i,function(e){o._onAddToFamilySuccess(e,t,p)},function(e){o._onAddToFamilyFailure(e,t.signinName,p)}):(i.memberPuid=t.puid||"",n=new a(null,$Utility.generateUrl(u.urls.baseDomain,g.createAndUpdateFamily,!0),i,function(e){o._onAddToFamilySuccess(e,t,p)},function(e){o._onAddToFamilyFailure(e,t.signinName,p)})),l&&d.fss.isWinTsetFlow?l.createStubAccountAsync(t.signinName,!1,function(){n.start()},function(e){$ReportEvent.ReportApiCall({apiId:d.fss.errorApiId,success:!1,errorCode:e.number||""}),$Utility.navigateTo(d.fss.ruOnError)}):n.start()}else d.isAddUserFlow&&l?l.createStubAccountAsync(t.signinName,!1,function(){l.finish(l.FinishStates.Success)},function(e){$ReportEvent.ReportApiCall({apiId:d.addUserErrorApi,success:!1,errorCode:e.number||""}),l.finish(l.FinishStates.Error)}):$Utility.postTo(t.redirectUrl,{slt:t.slt})},1e3)},_onCreateFailure:function(t){var n=this,i=t&&t.error;try{var a=e.performance&&e.performance.now?e.performance.now():(new Date).getTime(),o=n._viewContext.data||{},l={};l.pageId=x,l.suggestedAccountType=d.fl,l.accountType=r.FieldHelper.getMemberNameType(o.input.memberName,d.domains),l.duration=Math.round(a-A),l.errorCode=i?t.error.code:"",l.skipClientCall=!0,$ReportEvent.Action(l)}catch(u){}s&&s.setWizardButtons(!0,!0,!1),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.disabled(!1),r.ftrViewModelHandle.buttons.nextButton.disabled(!1)),n._viewContext.hasAttemptedSubmit=!0,n._isSubmitting=!1,n._viewContext.data.serverErrors={},n._handleCreateError(t.error),n.setEnabled(!0)},_onAddToFamilySuccess:function(e,t,n){var r=this;if(r._updateFamilyCache(t.signinName),t.childInfo)$Cookie.setCookie(d.fss.childConsentCookieName,t.childInfo,d.fss.childConsentCookieDomain,0,0,1),$Cookie.setCookie(d.fss.childConsentRUCookieName,d.fss.ruOnSuccess,d.fss.childConsentCookieDomain,0,0,1),$Utility.navigateTo(d.fss.childConsentRu);else{var i="";i=d.fss.isWinTsetFlow&&n?decodeURIComponent(d.fss.ruOnEasiSuccess).format(e.encryptedMemberName):d.fss.isWinTsetFlow?decodeURIComponent(d.fss.ruOnSuccess).format(e.encryptedMemberName):d.fss.ruOnSuccess,$Utility.navigateTo(i)}},_onAddToFamilyFailure:function(e,t,n){var r=this;if(e&&e.error&&e.error.code){var i="";if(e.error.data)try{var a=JSON.parse(e.error.data);a&&a.encryptedMemberName&&(i=a.encryptedMemberName)}catch(o){}switch(e.error.code){case d.fss.errorCodes.familyInvitationAlreadyExists:r._updateFamilyCache(t);var s="";return s=d.fss.isWinTsetFlow&&n?decodeURIComponent(d.fss.ruOnEasiSuccess).format(i):d.fss.isWinTsetFlow?decodeURIComponent(d.fss.ruOnSuccess).format(i):d.fss.ruOnSuccess,void $Utility.navigateTo(s);case d.fss.errorCodes.memberAlreadyInFamily:return void $Utility.navigateTo(decodeURIComponent(d.fss.urls.memberAlreadyInFamily));case d.fss.errorCodes.cannotInviteExistingMember:return void $Utility.navigateTo(decodeURIComponent(d.fss.urls.cannotInviteExistingMember));case d.fss.errorCodes.notAllowedToAddMember:case d.fss.errorCodes.notAllowedToInviteMember:return void $Utility.navigateTo(decodeURIComponent(d.fss.urls.addToFamilyChildFailure).format(i));case v.familySizeExceedLimit:return void $Utility.navigateTo(decodeURIComponent(d.fss.urls.familySizeLimitReached).format(i));case d.fss.errorCodes.firstMemberAdminMissingAccountInfo:return void $Utility.navigateTo(decodeURIComponent(d.fss.urls.addToFamilyParentFailure))}}$Utility.navigateTo(d.fss.ruOnError)},_updateFamilyCache:function(e){if(l)try{var t=d.fss.memberRole===d.fss.userRole;l.createLocalMemberWithEmailAsync(e,t,!1)}catch(n){}},_createAccount:function(t){var i=this,o=new a(null,$Utility.generateUrl(u.urls.baseDomain,g.createAccount,!0),t,n.proxy(i._onCreateSuccess,i),n.proxy(i._onCreateFailure,i));s&&s.setWizardButtons(!1,!1,!1),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.disabled(!0),r.ftrViewModelHandle.buttons.nextButton.disabled(!0)),(b||h)&&n("#Spinner").show(),A=e.performance&&e.performance.now?e.performance.now():(new Date).getTime(),o.start()},_handleCreateError:function(t){var i=this,a=t.code,o=t.field,s="",l=i._viewContext.keyToStateMap,u=i._viewContext.data||{},f=i._viewContext.data.serverErrors=i._viewContext.data.serverErrors||{},g=e.HIPAMFE,y=!1;switch((b||h)&&n("#Spinner").hide(),a){case v.hipValidationError:if(g&&g.done)if(g.observable.hip(""),g.error=1,g.setError(),s=g.getError(),g.observable.hip.focused(!0),"sms"===g.type){if(t.data)try{var x=JSON.parse(t.data);x&&x.fid&&g.switchHIP("sms",x.fid)}catch(A){}}else g.reloadHIP();break;case v.hipNeeded:i._viewContext.hasAttemptedSubmit=!1,p.required=!0,n.inArray("hip",d.options.states)>=0?i.$.triggerHandler(C,{actionName:"hip",control:i}):(r.FieldHelper.loadHip(),n("#hipSection").show());break;case v.hipSMSNeeded:p.required=!0;var k,S,N=null;if(t.data)try{var x=JSON.parse(t.data);x&&(S=x.sid||null,k=x.fid||null,N=x.dc||null)}catch(A){}if(g&&g.done)S&&(g.urlId=S),k&&N?g.switchHIP("sms",k,N):k?g.switchHIP("sms",k):g.switchHIP("sms");else{for(var E in i._viewContext.keyToStateMap)if("hip"===E){if(p.url=$f.replaceQs(p.url,"type","sms"),S&&(p.url=$f.replaceQs(p.url,"id",S)),k)if(N)p.url=p.url.replace(w,w+N+"."),p.url=$f.replaceQs(p.url,"fid",k);else if(k.indexOf(".")>-1){var P=k.split(".");p.url=p.url.replace(w,w+P[0]+"."),p.url=$f.replaceQs(p.url,"fid",k)}else p.url=$f.replaceQs(p.url,"fid",k);n.inArray("hip",d.options.states)>=0?i.$.triggerHandler(C,{actionName:"hip",control:i}):(r.FieldHelper.loadHip(),n("#hipSection").show());break}i.$.triggerHandler(C,{actionName:"blocked",control:i})}break;case v.dailyLimitIDsReached:y=!0,i.$.triggerHandler(C,{actionName:"blocked",control:i});break;case v.oneTimeCodeInvalid:s=m.oneTimeCodeInvalid;break;case v.verificationSltInvalid:u.verificationCodeSlt=null;break;case v.membernameTaken:var M=r.FieldHelper.getMemberNameType(u.input.memberName,d.domains);s=M===d.memberNameType.Phone?m.memberNameTakenPhone:m.memberNameTakenEasi.format(u.input.memberName);break;case v.domainNotAllowed:s=m.domainNotAllowed;break;case v.forbiddenWord:s=m.forbiddenWord;break;case v.passwordIncorrect:s=m.passwordIncorrect;break;case v.passwordConflict:s=m.passwordConflict;break;case v.invalidEmailFormat:s=m.invalidEmailFormat;break;case v.proofAlreadyExistsError:s=m.proofAlreadyExistsError;break;case v.invalidPhoneFormat:s=m.invalidPhoneFormat;break;case v.invalidBirthDate:s=m.invalidBirthDate;break;case v.invalidGender:s=m.invalidGender;break;case v.invalidFirstName:s=m.invalidFirstName;break;case v.invalidLastName:s=m.invalidLastName;break;case v.maximumOTTDailyError:s=m.verificationThrottled;break;case v.bannedPassword:s=m.bannedPassword;break;case v.passwordRequired:c.pwdless=0,s=m.passwordRequired;break;case v.domainExistsInAad:s=m.domainExistsInAad.format("domainExistsInAadSwitchToOutlook");break;case v.domainExistsInAadSupportedLogin:s=m.domainExistsInAadSupportedLogin.format(u.input.memberName);break;default:y=!0,i._handleFatalError(a)}if(o){var T=l[o];if(f[o]=s,r.viewModelHandle[o]&&(r.viewModelHandle[o].serverError=s,r.viewModelHandle[o].notifySubscribers&&!r.viewModelHandle[o].terminalState&&r.viewModelHandle[o].notifySubscribers(),r.viewModelHandle[o].isModified(!1),r.viewModelHandle[o].focused(!0)),t.data)try{var I=JSON.parse(t.data);I&&I.verificationCodeSlt&&(u.verificationCodeSlt=I.verificationCodeSlt)}catch(A){}T&&i.$.triggerHandler(C,{actionName:T,control:i})}else y||i._handleFatalError(a)},_handleFatalError:function(e){s&&(s.setProperty("ErrorCode",parseInt(e)),s.setWizardButtons(!1,!1,!0),s.finalNext()),r.ftrViewModelHandle&&(r.ftrViewModelHandle.buttons.backButton.disabled(!0),r.ftrViewModelHandle.buttons.nextButton.disabled(!0)),l?l.finish(l.FinishStates.Error):$Utility.navigateTo(u.urls.baseDomain+d.urls.error+e)},handleActionButton:function(){var t=this,i=t._viewContext.data||{},a=i.prefill||{},o=i.input||{},s={},l=t._options.optInTargetedId,u=t._options.optInEmailId,f=(t._checkBoxBindings,e.HIPAMFE);if(!t._isSubmitting){var m=o.memberName;if(m||(r.viewModelHandle.memberName&&(r.viewModelHandle.memberName.notifySubscribers(),m=o.memberName),m)){var v=r.FieldHelper.getMemberNameType(m,d.domains);if(v===d.memberNameType.Phone||v===d.memberNameType.EASI&&0!==d.easiVerifyInline){if(i.reporting&&i.reporting.autoVerifyShown&&(s.AutoVerify=!0),!o.verification)return void t.$.triggerHandler(C,{actionName:"verification",control:t});i.verificationCodeSlt&&(s.VerificationCodeSlt=i.verificationCodeSlt),s.MemberName=m,s.VerificationCode=o.verification,o.autoVerify&&(s.AutoVerifySuccess=o.autoVerify)}else s.MemberName=m;if(a&&a.memberName){var g=a.memberName.Live,h=a.memberName.Phone,w=a.memberName.EASI;s.PrefillMemberNamePassed=!0,s.PrefillDomain=d.prefillDomain,v===d.memberNameType.Live?g&&n.each(g,function(e,t){return t&&t.email&&m&&m.indexOf(t.email)>=0?(s.PrefillMemberNameUsed=!0,!1):void 0}):v===d.memberNameType.Phone?h&&n.each(h,function(e,t){return t&&t.phoneNumber&&m&&m.indexOf(t.phoneNumber)>=0?(s.PrefillMemberNameUsed=!0,!1):void 0}):w&&n.each(w,function(e,t){return t&&t.email&&m&&m.indexOf(t.email)>=0?(s.PrefillMemberNameUsed=!0,!1):void 0})}if(s.FirstName=o.firstName,s.LastName=o.lastName,i.reporting&&(s.MemberNameChangeCount=i.reporting.memberNameChangeCount,s.MemberNameAvailableCount=i.reporting.memberNameAvailableCount,s.MemberNameUnavailableCount=i.reporting.memberNameUnavailableCount),(0===c.pwdless||v!==d.memberNameType.Phone)&&(s.CipherValue=Encrypt("","",y,o.password),s.SKI=SKI||""),0!==d.dobCheck?(o.birthdate||0!==d.createWithCountry)&&(s.BirthDate=o.birthdate,s.Country=o.country):(s.BirthDate=o.birthdate,s.Country=o.country,s.PostalCode=o.postalCode,s.Gender=o.gender),v===d.memberNameType.Phone&&b||(s.PhoneCountry=o.phoneCountry,s.PhoneNumber=o.phoneNumber,s.AltEmail=v===d.memberNameType.Live?o.alternateEmail:null),s.IsOptOutEmailDefault=0!==d.isOptOut,s.IsOptOutEmailShown=!1,u){var x=n("#"+u);x&&x.length>0&&(s.IsOptOutEmailShown=!0,s.IsOptOutEmail=!x.prop("checked"))}if(l){var A=n("#"+l);A&&A.length>0&&(s.IsOptOutTargeting=!A.prop("checked"))}s.LW=0!==d.lw,s.SiteId=i.siteId,s.IsRDM=i.isRdm;try{s.GWPC=window.external.SignString("bver=1")}catch(k){}s.WReply=t._wreply,s.ReturnUrl=t._ru,s.uiflvr=e.$Config.uiflvr,s.uaid=e.$Config.uaid,s.SuggestedAccountType=d.suggAccType,s.SuggestionType=d.suggType,d.DT&&(s.DT=d.DT);var S=e.location.hash;S&&(S=S.replace("#",""),S&&S.indexOf("errCode=")>-1&&(s.TestErrorCode=S.replace("errCode=",""),e.location.hash="#")),p&&p.fid&&(s.HFId=p.fid),v===d.memberNameType.Phone?t._createAccount(s):f&&f.done?r.viewModelHandle.hip||f.fake?(s.HType=f.type,s.HFId=f.urlFid,s.HSId=f.urlId,f.verify(function(e,n){if(f.clientValidation(),""!==f.getError()){if("sms"===f.type)return;r.viewModelHandle.hip.valueHasMutated()}s.HId=n,s.HSol=e,t._createAccount(s)},null)):t.$.triggerHandler(C,{actionName:"hip",control:t}):p.required?t.$.triggerHandler(C,{actionName:"hip",control:t}):(t._isSubmitting=!0,t._createAccount(s))}}}},{})}(),function(){function e(e,t){var n=h.options.viewDefs[e];if(n){var r=n.sectionId,i=n.actions,a=null;r&&(k[r]?a=k[r].clone():(a=c("#"+r,t),a.detach(),k[r]=a)),n.options.sectionId||(n.options.sectionId=r),n.options.viewTemplate=a;var o={action:r+"Action"};i.cancel&&(o.cancel=r+"Cancel"),i.alternate&&(o.alternate=r+"Alternate"),i.skip&&(o.skip="PhoneVerification"),i.tou&&(o.tou="tou"),i.privacy&&(o.privacy="privacy"),i.dataCollection&&(o.dataCollection="dataCollection"),i.dataUse&&(o.dataUse="dataUse"),i.retention&&(o.retention="retention"),i.localAccount&&(o.localAccount="LocalAccount"),i.hip&&(o.hip="hip"),i.learnMore&&(o.learnMore="learnMore"),n.options.buttons=o}}function t(){p.SignupTemplates&&0!==h.useTemplate&&c.each(p.SignupTemplates,function(e,t){c("#"+e).append(t)});var t=c("#signupTemplates"),n=h.options.states;for(var r in n)e(n[r],t)}function n(e,t,n,a){if(t===S){if($ReportEvent.Fire("Signup_FinalBack_UserAction"),h.finalBackUrl)b.isWin10InclusiveOOBE&&x?x.handleBackButton(function(){$Utility.navigateTo(h.finalBackUrl)}):h.options.viewDefs[S].url=h.finalBackUrl;else if(g)return g.finalBack(),null}else{if("cxhLocalAccount"===t)return x.loadIdentityProvider(h.localAccountProvider),null;if("cxhCancel"===t)return x.finish(A.Cancel),null}return"cancel"==a?r(t,N):i(t,N),t}function r(e,t){if(null!=e&&"undefined"!=typeof e&&y[e]){var n=y[e].userAction;n?(c.isArray(n)||(n=new Array(n)),-1===n.indexOf(t)&&n.push(t)):n=t,y[e].userAction=n}}function i(e,t){if(null!=e&&"undefined"!=typeof e&&y[e]){var n=y[e].userAction;if(n){if(n===t)n="";else{var r=n.indexOf(t);-1!==r&&n.splice(r,1)}y[e].userAction=n}}}function a(e){var t=new c.Deferred;if(e){var n={phone:e},r=new v(null,$Utility.generateUrl(b.urls.baseDomain,h.urls.dataRequest.getPhoneNumberDetails,!0),n,function(e){t.resolve(e)},function(){t.reject()});r.start()}else t.reject();return t.promise()}function o(e){var t=e.data=e.data||{},n=t.prefill=t.prefill||{},r=t.input=t.input||{};for(var i in e.keyToStateMap){var o=C[i].clientPrefillKey;if(!n[i]&&o&&g){var s=g.getProperty(o);if(s)if(i===C.phoneNumber.name)a([s]).done(function(e){e&&e.phoneDetails&&e.phoneDetails.length>0&&(n[C.phoneCountry.name]=e.phoneDetails[0].country,n[C.phoneNumber.name]=e.phoneDetails[0].phoneNumber)});else if(i===C.memberName.name){try{var l=c.parseJSON(s),u=[],d=[],f=[];c.isArray(l)||(l=[l]),c.each(l,function(e,t){var n=p.FieldHelper.getMemberNameType(t,h.domains),r=h.memberNameType;n===r.Phone?f.push(t):n===r.EASI?u.push(t):n===r.Live&&d.push(t)}),n[i]={EASI:u,Live:d},null!=f&&f.length>0&&a(f).done(function(e){e&&e.phoneDetails&&(n[i][h.memberNameType.Phone]=e.phoneDetails)})}catch(m){s=""}n[i]=s}else n[i]=s}}var v=n[C.country.name];v&&(n[C.country.name]=v.toUpperCase());for(var i in e.keyToStateMap)i!==C.memberName.name&&(r[i]=n[i])}function s(e){var t=h.options,n=t.viewDefs||{};e.keyToStateMap={};for(var r in n)if(n.hasOwnProperty(r)){var i=n[r];if(i&&i.options&&i.options.viewModelOptions&&i.options.viewModelOptions.observables){var a=i.options.viewModelOptions.observables;c.each(a,function(t,n){e.keyToStateMap[n]=r})}}}function l(){0!==h.lw&&(h.phoneCountryListJson={list:[]},h.phoneCountryListJson["default"]=h.defaultCountry,c.each(h.countryList,function(e,t){t.code&&(t.displayValue=h.showParens?t.name+" (+"+t.code+")":t.name+" +"+t.code,h.phoneCountryListJson.list.push(t))}))}var u=window,d=u.wLive,c=u.jQuery,p=d.Account,f=p.PageEvents,m=p.Controls,v=d.Core.DataRequest,g=u.ExternalHelper,b=u.$Config.WLXAccount,h=b.signup,y=h.options.viewDefs,w=h.page,C=h.signupObservableSets,x=u.MSA&&u.MSA.CXH,A=x&&x.FinishStates,k={},S="finalBack",N="Action_Back";u.OnBack||(u.OnBack=function(){f&&f.$.triggerHandler(f.back)}),u.OnNext||(u.OnNext=function(){f&&f.$.triggerHandler(f.next)}),defineNamespace("wLive.Account.Page",{Signup:function(){h.strings=h.strings||{},h.page=h.page||{},h.regex=h.regex||{},c.extend(!0,h.strings,u.$Config.sharedStrings),c.extend(!0,h.page,u.$Config.sharedPageConfig),c.extend(!0,h.regex,h.regularexpressions),c.extend(!0,h.strings,h.overrideStrings||{}),t();var e=h.viewContext=h.viewContext||{};e.data=e.data||{},e.data.reporting=e.data.reporting||{},e.data.reporting.memberNameChangeCount=e.data.reporting.memberNameChangeCount||0,e.data.reporting.memberNameAvailableCount=e.data.reporting.memberNameAvailableCount||0,e.data.reporting.memberNameUnavailableCount=e.data.reporting.memberNameUnavailableCount||0,l(),s(e),o(e);var r=new m.FlowController(c("#pageControlHost"),e,h.options);r.setStateChangeFunc(n),r.show(h.startState);var i=c("#maincontent")[0];if(w&&i){if(w.imgs&&w.logoTypeHtml){var a=c(document.body),d=(c(".img-centipede"),c("#ftrLogo")),p=a.css("backgroundColor").toLowerCase().replace(new RegExp(" ","g"),"");d.html("rgb(255,255,255)"===p||"#ffffff"===p||"#fff"===p?w.logoTypeHtml.format(w.imgs.baseUrl,"Gray",0!==w.useSvg?"svg":"png"):w.logoTypeHtml.format(w.imgs.baseUrl,"White",0!==w.useSvg?"svg":"png"))}w.behavioralTelemetryUrl&&u.setTimeout(function(){var e=document.createElement("script");e.type="text/javascript",e.src=w.behavioralTelemetryUrl,i.appendChild(e)},0)}b.isWin10InclusiveOOBE&&x&&!h.getDeviceTicket&&(x.speakAsync(h.strings.cortana),x.showBackButton(!0))}}),$Do.register("Account.Page.Signup")}();